<!DOCTYPE html>
<html>
<!-- Created by GNU Texinfo 7.1, https://www.gnu.org/software/texinfo/ -->
<head>
<meta http-equiv="Content-Type" content="text/html; charset=utf-8">
<!-- This is the GNU Emacs Lisp Reference Manual
corresponding to Emacs version 29.1.

Copyright Â© 1990-1996, 1998-2023 Free Software Foundation,
Inc.

Permission is granted to copy, distribute and/or modify this document
under the terms of the GNU Free Documentation License, Version 1.3 or
any later version published by the Free Software Foundation; with the
Invariant Sections being "GNU General Public License," with the
Front-Cover Texts being "A GNU Manual," and with the Back-Cover
Texts as in (a) below.  A copy of the license is included in the
section entitled "GNU Free Documentation License."

(a) The FSF's Back-Cover Text is: "You have the freedom to copy and
modify this GNU manual.  Buying copies from the FSF supports it in
developing GNU and promoting software freedom." -->
<title>Extended Menu Items (GNU Emacs Lisp Reference Manual)</title>

<meta name="description" content="Extended Menu Items (GNU Emacs Lisp Reference Manual)">
<meta name="keywords" content="Extended Menu Items (GNU Emacs Lisp Reference Manual)">
<meta name="resource-type" content="document">
<meta name="distribution" content="global">
<meta name="Generator" content="makeinfo">
<meta name="viewport" content="width=device-width,initial-scale=1">

<link href="index.html" rel="start" title="Top">
<link href="Index.html" rel="index" title="Index">
<link href="index.html#SEC_Contents" rel="contents" title="Table of Contents">
<link href="Defining-Menus.html" rel="up" title="Defining Menus">
<link href="Menu-Separators.html" rel="next" title="Menu Separators">
<link href="Simple-Menu-Items.html" rel="prev" title="Simple Menu Items">
<style type="text/css">
<!--
a.copiable-link {visibility: hidden; text-decoration: none; line-height: 0em}
div.example {margin-left: 3.2em}
span:hover a.copiable-link {visibility: visible}
-->
</style>
<link rel="stylesheet" type="text/css" href="./manual.css">


</head>

<body lang="en">
<div class="subsubsection-level-extent" id="Extended-Menu-Items">
<div class="nav-panel">
<p>
Next: <a href="Menu-Separators.html" accesskey="n" rel="next">Menu Separators</a>, Previous: <a href="Simple-Menu-Items.html" accesskey="p" rel="prev">Simple Menu Items</a>, Up: <a href="Defining-Menus.html" accesskey="u" rel="up">Defining Menus</a> &nbsp; [<a href="index.html#SEC_Contents" title="Table of contents" rel="contents">Contents</a>][<a href="Index.html" title="Index" rel="index">Index</a>]</p>
</div>
<hr>
<h4 class="subsubsection" id="Extended-Menu-Items-1"><span>23.18.1.2 Extended Menu Items<a class="copiable-link" href="#Extended-Menu-Items-1"> &para;</a></span></h4>
<a class="index-entry-id" id="index-menu_002ditem"></a>
<a class="index-entry-id" id="index-extended-menu-item"></a>

<p>An extended-format menu item is a more flexible and also cleaner
alternative to the simple format.  You define an event type with a
binding that&rsquo;s a list starting with the symbol <code class="code">menu-item</code>.
For a non-selectable string, the binding looks like this:
</p>
<div class="example">
<pre class="example-preformatted">(menu-item <var class="var">item-name</var>)
</pre></div>

<p>A string starting with two or more dashes specifies a separator line;
see <a class="ref" href="Menu-Separators.html">Menu Separators</a>.
</p>
<p>To define a real menu item which can be selected, the extended format
binding looks like this:
</p>
<div class="example">
<pre class="example-preformatted">(menu-item <var class="var">item-name</var> <var class="var">real-binding</var>
    . <var class="var">item-property-list</var>)
</pre></div>

<p>Here, <var class="var">item-name</var> is an expression which evaluates to the menu item
string.  Thus, the string need not be a constant.
</p>
<p>The third element, <var class="var">real-binding</var>, can be the command to execute
(in which case you get a normal menu item).  It can also be a keymap,
which will result in a submenu, and <var class="var">item-name</var> is used as the
submenu name.  Finally, it can be <code class="code">nil</code>, in which case you will
get a non-selectable menu item.  This is mostly useful when creating
separator lines and the like.
</p>
<p>The tail of the list, <var class="var">item-property-list</var>, has the form of a
property list (see <a class="pxref" href="Property-Lists.html">Property Lists</a>) which contains other
information.
</p>
<p>Here is a table of the properties that are supported:
</p>
<dl class="table">
<dt><code class="code">:enable <var class="var">form</var></code></dt>
<dd><p>The result of evaluating <var class="var">form</var> determines whether the item is
enabled (non-<code class="code">nil</code> means yes).  If the item is not enabled,
you can&rsquo;t really click on it.
</p>
</dd>
<dt><code class="code">:visible <var class="var">form</var></code></dt>
<dd><p>The result of evaluating <var class="var">form</var> determines whether the item should
actually appear in the menu (non-<code class="code">nil</code> means yes).  If the item
does not appear, then the menu is displayed as if this item were
not defined at all.
</p>
</dd>
<dt><code class="code">:help <var class="var">help</var></code></dt>
<dd><p>The value of this property, <var class="var">help</var>, specifies a help-echo string
to display while the mouse is on that item.  This is displayed in the
same way as <code class="code">help-echo</code> text properties (see <a class="pxref" href="Special-Properties.html#Help-display">Help display</a>).
Note that this must be a constant string, unlike the <code class="code">help-echo</code>
property for text and overlays.
</p>
</dd>
<dt><code class="code">:button (<var class="var">type</var> . <var class="var">selected</var>)</code></dt>
<dd><p>This property provides a way to define radio buttons and toggle buttons.
The <small class="sc">CAR</small>, <var class="var">type</var>, says which: it should be <code class="code">:toggle</code> or
<code class="code">:radio</code>.  The <small class="sc">CDR</small>, <var class="var">selected</var>, should be a form; the
result of evaluating it says whether this button is currently selected.
</p>
<p>A <em class="dfn">toggle</em> is a menu item which is labeled as either on or off
according to the value of <var class="var">selected</var>.  The command itself should
toggle <var class="var">selected</var>, setting it to <code class="code">t</code> if it is <code class="code">nil</code>,
and to <code class="code">nil</code> if it is <code class="code">t</code>.  Here is how the menu item
to toggle the <code class="code">debug-on-error</code> flag is defined:
</p>
<div class="example">
<pre class="example-preformatted">(menu-item &quot;Debug on Error&quot; toggle-debug-on-error
           :button (:toggle
                    . (and (boundp 'debug-on-error)
                           debug-on-error)))
</pre></div>

<p>This works because <code class="code">toggle-debug-on-error</code> is defined as a command
which toggles the variable <code class="code">debug-on-error</code>.
</p>
<p><em class="dfn">Radio buttons</em> are a group of menu items, in which at any time one
and only one is selected.  There should be a variable whose value
says which one is selected at any time.  The <var class="var">selected</var> form for
each radio button in the group should check whether the variable has the
right value for selecting that button.  Clicking on the button should
set the variable so that the button you clicked on becomes selected.
</p>
</dd>
<dt><code class="code">:key-sequence <var class="var">key-sequence</var></code></dt>
<dd><p>This property specifies which key sequence to display as keyboard equivalent.
Before Emacs displays <var class="var">key-sequence</var> in the menu, it verifies that
<var class="var">key-sequence</var> is really equivalent to this menu item, so it only
has an effect if you specify a correct key sequence.
Specifying <code class="code">nil</code> for <var class="var">key-sequence</var> is equivalent to the
<code class="code">:key-sequence</code> attribute being absent.
</p>
</dd>
<dt><code class="code">:keys <var class="var">string</var></code></dt>
<dd><p>This property specifies that <var class="var">string</var> is the string to display
as the keyboard equivalent for this menu item.  You can use
the &lsquo;<samp class="samp">\\[...]</samp>&rsquo; documentation construct in <var class="var">string</var>.
</p>
<p>This property can also be a function (which will be called with no
arguments).  This function should return a string.  This function will
be called every time the menu is computed, so using a function that
takes a lot of time to compute is not a good idea, and it should
expect to be called from any context.
</p>
</dd>
<dt><code class="code">:filter <var class="var">filter-fn</var></code></dt>
<dd><p>This property provides a way to compute the menu item dynamically.
The property value <var class="var">filter-fn</var> should be a function of one argument;
when it is called, its argument will be <var class="var">real-binding</var>.  The
function should return the binding to use instead.
</p>
<p>Emacs can call this function at any time that it does redisplay or
operates on menu data structures, so you should write it so it can
safely be called at any time.
</p></dd>
</dl>

</div>
<hr>
<div class="nav-panel">
<p>
Next: <a href="Menu-Separators.html">Menu Separators</a>, Previous: <a href="Simple-Menu-Items.html">Simple Menu Items</a>, Up: <a href="Defining-Menus.html">Defining Menus</a> &nbsp; [<a href="index.html#SEC_Contents" title="Table of contents" rel="contents">Contents</a>][<a href="Index.html" title="Index" rel="index">Index</a>]</p>
</div>



</body>
</html>
