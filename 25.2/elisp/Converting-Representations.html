<!DOCTYPE html>
<html>
<!-- Created by GNU Texinfo 7.1, https://www.gnu.org/software/texinfo/ -->
<head>
<meta http-equiv="Content-Type" content="text/html; charset=utf-8">
<!-- This is the GNU Emacs Lisp Reference Manual
corresponding to Emacs version 25.2.

Copyright Â© 1990-1996, 1998-2017 Free Software Foundation, Inc.

Permission is granted to copy, distribute and/or modify this document
under the terms of the GNU Free Documentation License, Version 1.3 or
any later version published by the Free Software Foundation; with the
Invariant Sections being "GNU General Public License," with the
Front-Cover Texts being "A GNU Manual," and with the Back-Cover
Texts as in (a) below.  A copy of the license is included in the
section entitled "GNU Free Documentation License."

(a) The FSF's Back-Cover Text is: "You have the freedom to copy and
modify this GNU manual.  Buying copies from the FSF supports it in
developing GNU and promoting software freedom." -->
<title>Converting Representations (GNU Emacs Lisp Reference Manual)</title>

<meta name="description" content="Converting Representations (GNU Emacs Lisp Reference Manual)">
<meta name="keywords" content="Converting Representations (GNU Emacs Lisp Reference Manual)">
<meta name="resource-type" content="document">
<meta name="distribution" content="global">
<meta name="Generator" content="makeinfo">
<meta name="viewport" content="width=device-width,initial-scale=1">

<link href="index.html" rel="start" title="Top">
<link href="Index.html" rel="index" title="Index">
<link href="index.html#SEC_Contents" rel="contents" title="Table of Contents">
<link href="Non_002dASCII-Characters.html" rel="up" title="Non-ASCII Characters">
<link href="Selecting-a-Representation.html" rel="next" title="Selecting a Representation">
<link href="Disabling-Multibyte.html" rel="prev" title="Disabling Multibyte">
<style type="text/css">
<!--
a.copiable-link {visibility: hidden; text-decoration: none; line-height: 0em}
span:hover a.copiable-link {visibility: visible}
strong.def-name {font-family: monospace; font-weight: bold; font-size: larger}
-->
</style>
<link rel="stylesheet" type="text/css" href="./manual.css">


</head>

<body lang="en">
<div class="section-level-extent" id="Converting-Representations">
<div class="nav-panel">
<p>
Next: <a href="Selecting-a-Representation.html" accesskey="n" rel="next">Selecting a Representation</a>, Previous: <a href="Disabling-Multibyte.html" accesskey="p" rel="prev">Disabling Multibyte Characters</a>, Up: <a href="Non_002dASCII-Characters.html" accesskey="u" rel="up">Non-<abbr class="acronym">ASCII</abbr> Characters</a> &nbsp; [<a href="index.html#SEC_Contents" title="Table of contents" rel="contents">Contents</a>][<a href="Index.html" title="Index" rel="index">Index</a>]</p>
</div>
<hr>
<h3 class="section" id="Converting-Text-Representations"><span>32.3 Converting Text Representations<a class="copiable-link" href="#Converting-Text-Representations"> &para;</a></span></h3>

<p>Emacs can convert unibyte text to multibyte; it can also convert
multibyte text to unibyte, provided that the multibyte text contains
only <abbr class="acronym">ASCII</abbr> and 8-bit raw bytes.  In general, these
conversions happen when inserting text into a buffer, or when putting
text from several strings together in one string.  You can also
explicitly convert a string&rsquo;s contents to either representation.
</p>
<p>Emacs chooses the representation for a string based on the text from
which it is constructed.  The general rule is to convert unibyte text
to multibyte text when combining it with other multibyte text, because
the multibyte representation is more general and can hold whatever
characters the unibyte text has.
</p>
<p>When inserting text into a buffer, Emacs converts the text to the
buffer&rsquo;s representation, as specified by
<code class="code">enable-multibyte-characters</code> in that buffer.  In particular, when
you insert multibyte text into a unibyte buffer, Emacs converts the text
to unibyte, even though this conversion cannot in general preserve all
the characters that might be in the multibyte text.  The other natural
alternative, to convert the buffer contents to multibyte, is not
acceptable because the buffer&rsquo;s representation is a choice made by the
user that cannot be overridden automatically.
</p>
<p>Converting unibyte text to multibyte text leaves <abbr class="acronym">ASCII</abbr>
characters unchanged, and converts bytes with codes 128 through 255 to
the multibyte representation of raw eight-bit bytes.
</p>
<p>Converting multibyte text to unibyte converts all <abbr class="acronym">ASCII</abbr>
and eight-bit characters to their single-byte form, but loses
information for non-<abbr class="acronym">ASCII</abbr> characters by discarding all but
the low 8 bits of each character&rsquo;s codepoint.  Converting unibyte text
to multibyte and back to unibyte reproduces the original unibyte text.
</p>
<p>The next two functions either return the argument <var class="var">string</var>, or a
newly created string with no text properties.
</p>
<dl class="first-deffn first-defun-alias-first-deffn">
<dt class="deffn defun-alias-deffn" id="index-string_002dto_002dmultibyte"><span class="category-def">Function: </span><span><strong class="def-name">string-to-multibyte</strong> <var class="def-var-arguments">string</var><a class="copiable-link" href="#index-string_002dto_002dmultibyte"> &para;</a></span></dt>
<dd><p>This function returns a multibyte string containing the same sequence
of characters as <var class="var">string</var>.  If <var class="var">string</var> is a multibyte string,
it is returned unchanged.  The function assumes that <var class="var">string</var>
includes only <abbr class="acronym">ASCII</abbr> characters and raw 8-bit bytes; the
latter are converted to their multibyte representation corresponding
to the codepoints <code class="code">#x3FFF80</code> through <code class="code">#x3FFFFF</code>, inclusive
(see <a class="pxref" href="Text-Representations.html">codepoints</a>).
</p></dd></dl>

<dl class="first-deffn first-defun-alias-first-deffn">
<dt class="deffn defun-alias-deffn" id="index-string_002dto_002dunibyte"><span class="category-def">Function: </span><span><strong class="def-name">string-to-unibyte</strong> <var class="def-var-arguments">string</var><a class="copiable-link" href="#index-string_002dto_002dunibyte"> &para;</a></span></dt>
<dd><p>This function returns a unibyte string containing the same sequence of
characters as <var class="var">string</var>.  It signals an error if <var class="var">string</var>
contains a non-<abbr class="acronym">ASCII</abbr> character.  If <var class="var">string</var> is a
unibyte string, it is returned unchanged.  Use this function for
<var class="var">string</var> arguments that contain only <abbr class="acronym">ASCII</abbr> and eight-bit
characters.
</p></dd></dl>

<dl class="first-deffn first-defun-alias-first-deffn">
<dt class="deffn defun-alias-deffn" id="index-byte_002dto_002dstring"><span class="category-def">Function: </span><span><strong class="def-name">byte-to-string</strong> <var class="def-var-arguments">byte</var><a class="copiable-link" href="#index-byte_002dto_002dstring"> &para;</a></span></dt>
<dd><a class="index-entry-id" id="index-byte-to-string"></a>
<p>This function returns a unibyte string containing a single byte of
character data, <var class="var">character</var>.  It signals an error if
<var class="var">character</var> is not an integer between 0 and 255.
</p></dd></dl>

<dl class="first-deffn first-defun-alias-first-deffn">
<dt class="deffn defun-alias-deffn" id="index-multibyte_002dchar_002dto_002dunibyte"><span class="category-def">Function: </span><span><strong class="def-name">multibyte-char-to-unibyte</strong> <var class="def-var-arguments">char</var><a class="copiable-link" href="#index-multibyte_002dchar_002dto_002dunibyte"> &para;</a></span></dt>
<dd><p>This converts the multibyte character <var class="var">char</var> to a unibyte
character, and returns that character.  If <var class="var">char</var> is neither
<abbr class="acronym">ASCII</abbr> nor eight-bit, the function returns &minus;1.
</p></dd></dl>

<dl class="first-deffn first-defun-alias-first-deffn">
<dt class="deffn defun-alias-deffn" id="index-unibyte_002dchar_002dto_002dmultibyte"><span class="category-def">Function: </span><span><strong class="def-name">unibyte-char-to-multibyte</strong> <var class="def-var-arguments">char</var><a class="copiable-link" href="#index-unibyte_002dchar_002dto_002dmultibyte"> &para;</a></span></dt>
<dd><p>This convert the unibyte character <var class="var">char</var> to a multibyte
character, assuming <var class="var">char</var> is either <abbr class="acronym">ASCII</abbr> or raw 8-bit
byte.
</p></dd></dl>

</div>
<hr>
<div class="nav-panel">
<p>
Next: <a href="Selecting-a-Representation.html">Selecting a Representation</a>, Previous: <a href="Disabling-Multibyte.html">Disabling Multibyte Characters</a>, Up: <a href="Non_002dASCII-Characters.html">Non-<abbr class="acronym">ASCII</abbr> Characters</a> &nbsp; [<a href="index.html#SEC_Contents" title="Table of contents" rel="contents">Contents</a>][<a href="Index.html" title="Index" rel="index">Index</a>]</p>
</div>



</body>
</html>
