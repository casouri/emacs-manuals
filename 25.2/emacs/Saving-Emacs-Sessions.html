<!DOCTYPE html>
<html>
<!-- Created by GNU Texinfo 7.1, https://www.gnu.org/software/texinfo/ -->
<head>
<meta http-equiv="Content-Type" content="text/html; charset=utf-8">
<!-- This is the GNU Emacs Manual,
updated for Emacs version 25.2.

Copyright Â© 1985-1987, 1993-2017 Free Software Foundation, Inc.

Permission is granted to copy, distribute and/or modify this document
under the terms of the GNU Free Documentation License, Version 1.3 or
any later version published by the Free Software Foundation; with the
Invariant Sections being "The GNU Manifesto," "Distribution" and
"GNU GENERAL PUBLIC LICENSE," with the Front-Cover Texts being "A GNU
Manual," and with the Back-Cover Texts as in (a) below.  A copy of the
license is included in the section entitled "GNU Free Documentation
License."

(a) The FSF's Back-Cover Text is: "You have the freedom to copy and
modify this GNU manual.  Buying copies from the FSF supports it in
developing GNU and promoting software freedom." -->
<title>Saving Emacs Sessions (GNU Emacs Manual)</title>

<meta name="description" content="Saving Emacs Sessions (GNU Emacs Manual)">
<meta name="keywords" content="Saving Emacs Sessions (GNU Emacs Manual)">
<meta name="resource-type" content="document">
<meta name="distribution" content="global">
<meta name="Generator" content="makeinfo">
<meta name="viewport" content="width=device-width,initial-scale=1">

<link href="index.html" rel="start" title="Top">
<link href="Key-Index.html" rel="index" title="Key Index">
<link href="index.html#SEC_Contents" rel="contents" title="Table of Contents">
<link href="index.html" rel="up" title="Top">
<link href="Recursive-Edit.html" rel="next" title="Recursive Edit">
<link href="Editing-Binary-Files.html" rel="prev" title="Editing Binary Files">
<style type="text/css">
<!--
a.copiable-link {visibility: hidden; text-decoration: none; line-height: 0em}
div.example {margin-left: 3.2em}
kbd.kbd {font-style: oblique}
kbd.key {font-style: normal}
span:hover a.copiable-link {visibility: visible}
-->
</style>
<link rel="stylesheet" type="text/css" href="./manual.css">


</head>

<body lang="en">
<div class="chapter-level-extent" id="Saving-Emacs-Sessions">
<div class="nav-panel">
<p>
Next: <a href="Recursive-Edit.html" accesskey="n" rel="next">Recursive Editing Levels</a>, Previous: <a href="Editing-Binary-Files.html" accesskey="p" rel="prev">Editing Binary Files</a>, Up: <a href="index.html" accesskey="u" rel="up">The Emacs Editor</a> &nbsp; [<a href="index.html#SEC_Contents" title="Table of contents" rel="contents">Contents</a>][<a href="Key-Index.html" title="Index" rel="index">Index</a>]</p>
</div>
<hr>
<h2 class="chapter section-level-set-chapter" id="Saving-Emacs-Sessions-1"><span>46 Saving Emacs Sessions<a class="copiable-link" href="#Saving-Emacs-Sessions-1"> &para;</a></span></h2>
<a class="index-entry-id" id="index-saving-sessions"></a>
<a class="index-entry-id" id="index-restore-session"></a>
<a class="index-entry-id" id="index-remember-editing-session"></a>
<a class="index-entry-id" id="index-reload-files"></a>
<a class="index-entry-id" id="index-desktop"></a>

<a class="index-entry-id" id="index-desktop_002drestore_002dframes"></a>
<p>Use the desktop library to save the state of Emacs from one session
to another.  Once you save the Emacs <em class="dfn">desktop</em>&mdash;the buffers,
their file names, major modes, buffer positions, and so on&mdash;then
subsequent Emacs sessions reload the saved desktop.  By default,
the desktop also tries to save the frame and window configuration.
To disable this, set <code class="code">desktop-restore-frames</code> to <code class="code">nil</code>.
(See that variable&rsquo;s documentation for some related options
that you can customize to fine-tune this behavior.)
</p>
<a class="index-entry-id" id="index-frameset_002dfilter_002dalist"></a>
<p>When the desktop restores the frame and window configuration, it
uses the recorded values of frame parameters, disregarding any
settings for those parameters you have in your init file (see <a class="pxref" href="Init-File.html">The Emacs Initialization File</a>).  This means that frame parameters such as fonts and faces for
the restored frames will come from the desktop file, where they were
saved when you exited your previous Emacs session; any settings for
those parameters in your init file will be ignored.  To disable this,
customize the value of <code class="code">frameset-filter-alist</code> to filter out the
frame parameters you don&rsquo;t want to be restored.
</p>
<a class="index-entry-id" id="index-desktop_002dsave"></a>
<a class="index-entry-id" id="index-desktop_002dsave_002dmode"></a>
<p>You can save the desktop manually with the command <kbd class="kbd">M-x
desktop-save</kbd>.  You can also enable automatic saving of the desktop
when you exit Emacs, and automatic restoration of the last saved
desktop when Emacs starts: use the Customization buffer (see <a class="pxref" href="Easy-Customization.html">Easy Customization Interface</a>) to set <code class="code">desktop-save-mode</code> to <code class="code">t</code> for future
sessions, or add this line in your init file (see <a class="pxref" href="Init-File.html">The Emacs Initialization File</a>):
</p>
<div class="example">
<pre class="example-preformatted">(desktop-save-mode 1)
</pre></div>

<a class="index-entry-id" id="index-desktop_002dauto_002dsave_002dtimeout"></a>
<p>When <code class="code">desktop-save-mode</code> is active and the desktop file exists,
Emacs auto-saves it every <code class="code">desktop-auto-save-timeout</code>
seconds, if that is non-<code class="code">nil</code> and non-zero.
</p>
<a class="index-entry-id" id="index-desktop_002dchange_002ddir"></a>
<a class="index-entry-id" id="index-desktop_002drevert"></a>
<a class="index-entry-id" id="index-desktop_002dpath"></a>
<p>If you turn on <code class="code">desktop-save-mode</code> in your init file, then when
Emacs starts, it looks for a saved desktop in the current directory.
(More precisely, it looks in the directories specified by
<var class="var">desktop-path</var>, and uses the first desktop it finds.)
Thus, you can have separate saved desktops in different directories,
and the starting directory determines which one Emacs reloads.  You
can save the current desktop and reload one saved in another directory
by typing <kbd class="kbd">M-x desktop-change-dir</kbd>.  Typing <kbd class="kbd">M-x
desktop-revert</kbd> reverts to the desktop previously reloaded.
</p>
<p>Specify the option &lsquo;<samp class="samp">--no-desktop</samp>&rsquo; on the command line when you
don&rsquo;t want it to reload any saved desktop.  This turns off
<code class="code">desktop-save-mode</code> for the current session.  Starting Emacs with
the &lsquo;<samp class="samp">--no-init-file</samp>&rsquo; option also disables desktop reloading,
since it bypasses the init file, where <code class="code">desktop-save-mode</code> is
usually turned on.
</p>
<a class="index-entry-id" id="index-desktop_002drestore_002deager"></a>
<p>By default, all the buffers in the desktop are restored at one go.
However, this may be slow if there are a lot of buffers in the
desktop.  You can specify the maximum number of buffers to restore
immediately with the variable <code class="code">desktop-restore-eager</code>; the
remaining buffers are restored lazily, when Emacs is idle.
</p>
<a class="index-entry-id" id="index-desktop_002dclear"></a>
<a class="index-entry-id" id="index-desktop_002dglobals_002dto_002dclear"></a>
<a class="index-entry-id" id="index-desktop_002dclear_002dpreserve_002dbuffers_002dregexp"></a>
<p>Type <kbd class="kbd">M-x desktop-clear</kbd> to empty the Emacs desktop.  This kills
all buffers except for internal ones, and clears the global variables
listed in <code class="code">desktop-globals-to-clear</code>.  If you want this to
preserve certain buffers, customize the variable
<code class="code">desktop-clear-preserve-buffers-regexp</code>, whose value is a regular
expression matching the names of buffers not to kill.
</p>
<p>If you want to save minibuffer history from one session to
another, use the <code class="code">savehist</code> library.
</p>
</div>
<hr>
<div class="nav-panel">
<p>
Next: <a href="Recursive-Edit.html">Recursive Editing Levels</a>, Previous: <a href="Editing-Binary-Files.html">Editing Binary Files</a>, Up: <a href="index.html">The Emacs Editor</a> &nbsp; [<a href="index.html#SEC_Contents" title="Table of contents" rel="contents">Contents</a>][<a href="Key-Index.html" title="Index" rel="index">Index</a>]</p>
</div>



</body>
</html>
