<!DOCTYPE html>
<html>
<!-- Created by GNU Texinfo 7.1, https://www.gnu.org/software/texinfo/ -->
<head>
<meta http-equiv="Content-Type" content="text/html; charset=utf-8">
<!-- This is the GNU Emacs Lisp Reference Manual
corresponding to Emacs version 25.1.

Copyright Â© 1990-1996, 1998-2016 Free Software Foundation, Inc.

Permission is granted to copy, distribute and/or modify this document
under the terms of the GNU Free Documentation License, Version 1.3 or
any later version published by the Free Software Foundation; with the
Invariant Sections being "GNU General Public License," with the
Front-Cover Texts being "A GNU Manual," and with the Back-Cover
Texts as in (a) below.  A copy of the license is included in the
section entitled "GNU Free Documentation License."

(a) The FSF's Back-Cover Text is: "You have the freedom to copy and
modify this GNU manual.  Buying copies from the FSF supports it in
developing GNU and promoting software freedom." -->
<title>Replacing Match (GNU Emacs Lisp Reference Manual)</title>

<meta name="description" content="Replacing Match (GNU Emacs Lisp Reference Manual)">
<meta name="keywords" content="Replacing Match (GNU Emacs Lisp Reference Manual)">
<meta name="resource-type" content="document">
<meta name="distribution" content="global">
<meta name="Generator" content="makeinfo">
<meta name="viewport" content="width=device-width,initial-scale=1">

<link href="index.html" rel="start" title="Top">
<link href="Index.html" rel="index" title="Index">
<link href="index.html#SEC_Contents" rel="contents" title="Table of Contents">
<link href="Match-Data.html" rel="up" title="Match Data">
<link href="Simple-Match-Data.html" rel="next" title="Simple Match Data">
<style type="text/css">
<!--
a.copiable-link {visibility: hidden; text-decoration: none; line-height: 0em}
span:hover a.copiable-link {visibility: visible}
strong.def-name {font-family: monospace; font-weight: bold; font-size: larger}
-->
</style>
<link rel="stylesheet" type="text/css" href="./manual.css">


</head>

<body lang="en">
<div class="subsection-level-extent" id="Replacing-Match">
<div class="nav-panel">
<p>
Next: <a href="Simple-Match-Data.html" accesskey="n" rel="next">Simple Match Data Access</a>, Up: <a href="Match-Data.html" accesskey="u" rel="up">The Match Data</a> &nbsp; [<a href="index.html#SEC_Contents" title="Table of contents" rel="contents">Contents</a>][<a href="Index.html" title="Index" rel="index">Index</a>]</p>
</div>
<hr>
<h4 class="subsection" id="Replacing-the-Text-that-Matched"><span>33.6.1 Replacing the Text that Matched<a class="copiable-link" href="#Replacing-the-Text-that-Matched"> &para;</a></span></h4>
<a class="index-entry-id" id="index-replace-matched-text"></a>

<p>This function replaces all or part of the text matched by the last
search.  It works by means of the match data.
</p>
<a class="index-entry-id" id="index-case-in-replacements"></a>
<dl class="first-deffn first-defun-alias-first-deffn">
<dt class="deffn defun-alias-deffn" id="index-replace_002dmatch"><span class="category-def">Function: </span><span><strong class="def-name">replace-match</strong> <var class="def-var-arguments">replacement &amp;optional fixedcase literal string subexp</var><a class="copiable-link" href="#index-replace_002dmatch"> &para;</a></span></dt>
<dd><p>This function performs a replacement operation on a buffer or string.
</p>
<p>If you did the last search in a buffer, you should omit the
<var class="var">string</var> argument or specify <code class="code">nil</code> for it, and make sure that
the current buffer is the one in which you performed the last search.
Then this function edits the buffer, replacing the matched text with
<var class="var">replacement</var>.  It leaves point at the end of the replacement
text.
</p>
<p>If you performed the last search on a string, pass the same string as
<var class="var">string</var>.  Then this function returns a new string, in which the
matched text is replaced by <var class="var">replacement</var>.
</p>
<p>If <var class="var">fixedcase</var> is non-<code class="code">nil</code>, then <code class="code">replace-match</code> uses
the replacement text without case conversion; otherwise, it converts
the replacement text depending upon the capitalization of the text to
be replaced.  If the original text is all upper case, this converts
the replacement text to upper case.  If all words of the original text
are capitalized, this capitalizes all the words of the replacement
text.  If all the words are one-letter and they are all upper case,
they are treated as capitalized words rather than all-upper-case
words.
</p>
<p>If <var class="var">literal</var> is non-<code class="code">nil</code>, then <var class="var">replacement</var> is inserted
exactly as it is, the only alterations being case changes as needed.
If it is <code class="code">nil</code> (the default), then the character &lsquo;<samp class="samp">\</samp>&rsquo; is treated
specially.  If a &lsquo;<samp class="samp">\</samp>&rsquo; appears in <var class="var">replacement</var>, then it must be
part of one of the following sequences:
</p>
<dl class="table">
<dt><a id="index-_0026-in-replacement"></a><span>&lsquo;<samp class="samp">\&amp;</samp>&rsquo;<a class="copiable-link" href="#index-_0026-in-replacement"> &para;</a></span></dt>
<dd><p>This stands for the entire text being replaced.
</p>
</dd>
<dt><a id="index-_005cn-in-replacement"></a><span>&lsquo;<samp class="samp">\<var class="var">n</var></samp>&rsquo;, where <var class="var">n</var> is a digit<a class="copiable-link" href="#index-_005cn-in-replacement"> &para;</a></span></dt>
<dd><p>This stands for the text that matched the <var class="var">n</var>th subexpression in
the original regexp.  Subexpressions are those expressions grouped
inside &lsquo;<samp class="samp">\(&hellip;\)</samp>&rsquo;.  If the <var class="var">n</var>th subexpression never
matched, an empty string is substituted.
</p>
</dd>
<dt><a id="index-_005c-in-replacement"></a><span>&lsquo;<samp class="samp">\\</samp>&rsquo;<a class="copiable-link" href="#index-_005c-in-replacement"> &para;</a></span></dt>
<dd><p>This stands for a single &lsquo;<samp class="samp">\</samp>&rsquo; in the replacement text.
</p>
</dd>
<dt>&lsquo;<samp class="samp">\?</samp>&rsquo;</dt>
<dd><p>This stands for itself (for compatibility with <code class="code">replace-regexp</code>
and related commands; see <a data-manual="emacs" href="https://www.gnu.org/software/emacs/manual/html_node/emacs/Regexp-Replace.html#Regexp-Replace">Regexp Replace</a> in <cite class="cite">The GNU
Emacs Manual</cite>).
</p></dd>
</dl>

<p>Any other character following &lsquo;<samp class="samp">\</samp>&rsquo; signals an error.
</p>
<p>The substitutions performed by &lsquo;<samp class="samp">\&amp;</samp>&rsquo; and &lsquo;<samp class="samp">\<var class="var">n</var></samp>&rsquo; occur
after case conversion, if any.  Therefore, the strings they substitute
are never case-converted.
</p>
<p>If <var class="var">subexp</var> is non-<code class="code">nil</code>, that says to replace just
subexpression number <var class="var">subexp</var> of the regexp that was matched, not
the entire match.  For example, after matching &lsquo;<samp class="samp">foo \(ba*r\)</samp>&rsquo;,
calling <code class="code">replace-match</code> with 1 as <var class="var">subexp</var> means to replace
just the text that matched &lsquo;<samp class="samp">\(ba*r\)</samp>&rsquo;.
</p></dd></dl>

<dl class="first-deffn first-defun-alias-first-deffn">
<dt class="deffn defun-alias-deffn" id="index-match_002dsubstitute_002dreplacement"><span class="category-def">Function: </span><span><strong class="def-name">match-substitute-replacement</strong> <var class="def-var-arguments">replacement &amp;optional fixedcase literal string subexp</var><a class="copiable-link" href="#index-match_002dsubstitute_002dreplacement"> &para;</a></span></dt>
<dd><p>This function returns the text that would be inserted into the buffer
by <code class="code">replace-match</code>, but without modifying the buffer.  It is
useful if you want to present the user with actual replacement result,
with constructs like &lsquo;<samp class="samp">\<var class="var">n</var></samp>&rsquo; or &lsquo;<samp class="samp">\&amp;</samp>&rsquo; substituted with
matched groups.  Arguments <var class="var">replacement</var> and optional
<var class="var">fixedcase</var>, <var class="var">literal</var>, <var class="var">string</var> and <var class="var">subexp</var> have the
same meaning as for <code class="code">replace-match</code>.
</p></dd></dl>

</div>
<hr>
<div class="nav-panel">
<p>
Next: <a href="Simple-Match-Data.html">Simple Match Data Access</a>, Up: <a href="Match-Data.html">The Match Data</a> &nbsp; [<a href="index.html#SEC_Contents" title="Table of contents" rel="contents">Contents</a>][<a href="Index.html" title="Index" rel="index">Index</a>]</p>
</div>



</body>
</html>
