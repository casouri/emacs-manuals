<!DOCTYPE html>
<html>
<!-- Created by GNU Texinfo 7.1, https://www.gnu.org/software/texinfo/ -->
<head>
<meta http-equiv="Content-Type" content="text/html; charset=utf-8">
<!-- This is the GNU Emacs Lisp Reference Manual
corresponding to Emacs version 24.5.

Copyright Â© 1990-1996, 1998-2015 Free Software Foundation, Inc.

Permission is granted to copy, distribute and/or modify this document
under the terms of the GNU Free Documentation License, Version 1.3 or
any later version published by the Free Software Foundation; with the
Invariant Sections being "GNU General Public License," with the
Front-Cover Texts being "A GNU Manual," and with the Back-Cover
Texts as in (a) below.  A copy of the license is included in the
section entitled "GNU Free Documentation License."

(a) The FSF's Back-Cover Text is: "You have the freedom to copy and
modify this GNU manual.  Buying copies from the FSF supports it in
developing GNU and promoting software freedom." -->
<title>Image Cache (GNU Emacs Lisp Reference Manual)</title>

<meta name="description" content="Image Cache (GNU Emacs Lisp Reference Manual)">
<meta name="keywords" content="Image Cache (GNU Emacs Lisp Reference Manual)">
<meta name="resource-type" content="document">
<meta name="distribution" content="global">
<meta name="Generator" content="makeinfo">
<meta name="viewport" content="width=device-width,initial-scale=1">

<link href="index.html" rel="start" title="Top">
<link href="Index.html" rel="index" title="Index">
<link href="index.html#SEC_Contents" rel="contents" title="Table of Contents">
<link href="Images.html" rel="up" title="Images">
<link href="Multi_002dFrame-Images.html" rel="prev" title="Multi-Frame Images">
<style type="text/css">
<!--
a.copiable-link {visibility: hidden; text-decoration: none; line-height: 0em}
span:hover a.copiable-link {visibility: visible}
strong.def-name {font-family: monospace; font-weight: bold; font-size: larger}
-->
</style>
<link rel="stylesheet" type="text/css" href="./manual.css">


</head>

<body lang="en">
<div class="subsection-level-extent" id="Image-Cache">
<div class="nav-panel">
<p>
Previous: <a href="Multi_002dFrame-Images.html" accesskey="p" rel="prev">Multi-Frame Images</a>, Up: <a href="Images.html" accesskey="u" rel="up">Images</a> &nbsp; [<a href="index.html#SEC_Contents" title="Table of contents" rel="contents">Contents</a>][<a href="Index.html" title="Index" rel="index">Index</a>]</p>
</div>
<hr>
<h4 class="subsection" id="Image-Cache-1"><span>37.17.11 Image Cache<a class="copiable-link" href="#Image-Cache-1"> &para;</a></span></h4>
<a class="index-entry-id" id="index-image-cache"></a>

<p>Emacs caches images so that it can display them again more
efficiently.  When Emacs displays an image, it searches the image
cache for an existing image specification <code class="code">equal</code> to the desired
specification.  If a match is found, the image is displayed from the
cache.  Otherwise, Emacs loads the image normally.
</p>
<dl class="first-deffn first-defun-alias-first-deffn">
<dt class="deffn defun-alias-deffn" id="index-image_002dflush"><span class="category-def">Function: </span><span><strong class="def-name">image-flush</strong> <var class="def-var-arguments">spec &amp;optional frame</var><a class="copiable-link" href="#index-image_002dflush"> &para;</a></span></dt>
<dd><p>This function removes the image with specification <var class="var">spec</var> from the
image cache of frame <var class="var">frame</var>.  Image specifications are compared
using <code class="code">equal</code>.  If <var class="var">frame</var> is <code class="code">nil</code>, it defaults to the
selected frame.  If <var class="var">frame</var> is <code class="code">t</code>, the image is flushed on
all existing frames.
</p>
<p>In Emacs&rsquo;s current implementation, each graphical terminal possesses an
image cache, which is shared by all the frames on that terminal
(see <a class="pxref" href="Multiple-Terminals.html">Multiple Terminals</a>).  Thus, refreshing an image in one frame
also refreshes it in all other frames on the same terminal.
</p></dd></dl>

<p>One use for <code class="code">image-flush</code> is to tell Emacs about a change in an
image file.  If an image specification contains a <code class="code">:file</code>
property, the image is cached based on the file&rsquo;s contents when the
image is first displayed.  Even if the file subsequently changes,
Emacs continues displaying the old version of the image.  Calling
<code class="code">image-flush</code> flushes the image from the cache, forcing Emacs to
re-read the file the next time it needs to display that image.
</p>
<p>Another use for <code class="code">image-flush</code> is for memory conservation.  If
your Lisp program creates a large number of temporary images over a
period much shorter than <code class="code">image-cache-eviction-delay</code> (see
below), you can opt to flush unused images yourself, instead of
waiting for Emacs to do it automatically.
</p>
<dl class="first-deffn first-defun-alias-first-deffn">
<dt class="deffn defun-alias-deffn" id="index-clear_002dimage_002dcache"><span class="category-def">Function: </span><span><strong class="def-name">clear-image-cache</strong> <var class="def-var-arguments">&amp;optional filter</var><a class="copiable-link" href="#index-clear_002dimage_002dcache"> &para;</a></span></dt>
<dd><p>This function clears an image cache, removing all the images stored in
it.  If <var class="var">filter</var> is omitted or <code class="code">nil</code>, it clears the cache for
the selected frame.  If <var class="var">filter</var> is a frame, it clears the cache
for that frame.  If <var class="var">filter</var> is <code class="code">t</code>, all image caches are
cleared.  Otherwise, <var class="var">filter</var> is taken to be a file name, and all
images associated with that file name are removed from all image
caches.
</p></dd></dl>

<p>If an image in the image cache has not been displayed for a specified
period of time, Emacs removes it from the cache and frees the
associated memory.
</p>
<dl class="first-defvr first-defvar-alias-first-defvr">
<dt class="defvr defvar-alias-defvr" id="index-image_002dcache_002deviction_002ddelay"><span class="category-def">Variable: </span><span><strong class="def-name">image-cache-eviction-delay</strong><a class="copiable-link" href="#index-image_002dcache_002deviction_002ddelay"> &para;</a></span></dt>
<dd><p>This variable specifies the number of seconds an image can remain in
the cache without being displayed.  When an image is not displayed for
this length of time, Emacs removes it from the image cache.
</p>
<p>Under some circumstances, if the number of images in the cache grows
too large, the actual eviction delay may be shorter than this.
</p>
<p>If the value is <code class="code">nil</code>, Emacs does not remove images from the cache
except when you explicitly clear it.  This mode can be useful for
debugging.
</p></dd></dl>

</div>
<hr>
<div class="nav-panel">
<p>
Previous: <a href="Multi_002dFrame-Images.html">Multi-Frame Images</a>, Up: <a href="Images.html">Images</a> &nbsp; [<a href="index.html#SEC_Contents" title="Table of contents" rel="contents">Contents</a>][<a href="Index.html" title="Index" rel="index">Index</a>]</p>
</div>



</body>
</html>
