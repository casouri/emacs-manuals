<!DOCTYPE html>
<html>
<!-- Created by GNU Texinfo 7.1, https://www.gnu.org/software/texinfo/ -->
<head>
<meta http-equiv="Content-Type" content="text/html; charset=utf-8">
<!-- This is the GNU Emacs Lisp Reference Manual
corresponding to Emacs version 24.5.

Copyright Â© 1990-1996, 1998-2015 Free Software Foundation, Inc.

Permission is granted to copy, distribute and/or modify this document
under the terms of the GNU Free Documentation License, Version 1.3 or
any later version published by the Free Software Foundation; with the
Invariant Sections being "GNU General Public License," with the
Front-Cover Texts being "A GNU Manual," and with the Back-Cover
Texts as in (a) below.  A copy of the license is included in the
section entitled "GNU Free Documentation License."

(a) The FSF's Back-Cover Text is: "You have the freedom to copy and
modify this GNU manual.  Buying copies from the FSF supports it in
developing GNU and promoting software freedom." -->
<title>Profiling (GNU Emacs Lisp Reference Manual)</title>

<meta name="description" content="Profiling (GNU Emacs Lisp Reference Manual)">
<meta name="keywords" content="Profiling (GNU Emacs Lisp Reference Manual)">
<meta name="resource-type" content="document">
<meta name="distribution" content="global">
<meta name="Generator" content="makeinfo">
<meta name="viewport" content="width=device-width,initial-scale=1">

<link href="index.html" rel="start" title="Top">
<link href="Index.html" rel="index" title="Index">
<link href="index.html#SEC_Contents" rel="contents" title="Table of Contents">
<link href="Debugging.html" rel="up" title="Debugging">
<link href="Test-Coverage.html" rel="prev" title="Test Coverage">
<style type="text/css">
<!--
a.copiable-link {visibility: hidden; text-decoration: none; line-height: 0em}
kbd.kbd {font-style: oblique}
kbd.key {font-style: normal}
span:hover a.copiable-link {visibility: visible}
-->
</style>
<link rel="stylesheet" type="text/css" href="./manual.css">


</head>

<body lang="en">
<div class="section-level-extent" id="Profiling">
<div class="nav-panel">
<p>
Previous: <a href="Test-Coverage.html" accesskey="p" rel="prev">Test Coverage</a>, Up: <a href="Debugging.html" accesskey="u" rel="up">Debugging Lisp Programs</a> &nbsp; [<a href="index.html#SEC_Contents" title="Table of contents" rel="contents">Contents</a>][<a href="Index.html" title="Index" rel="index">Index</a>]</p>
</div>
<hr>
<h3 class="section" id="Profiling-1"><span>17.5 Profiling<a class="copiable-link" href="#Profiling-1"> &para;</a></span></h3>
<a class="index-entry-id" id="index-profiling"></a>
<a class="index-entry-id" id="index-measuring-resource-usage"></a>
<a class="index-entry-id" id="index-memory-usage"></a>

<p>If your program is working correctly, but you want to make it run more
quickly or efficiently, the first thing to do is <em class="dfn">profile</em> your
code so that you know how it is using resources.  If you find that one
particular function is responsible for a significant portion of the
runtime, you can start looking for ways to optimize that piece.
</p>
<p>Emacs has built-in support for this.  To begin profiling, type
<kbd class="kbd">M-x profiler-start</kbd>.  You can choose to profile by processor
usage, memory usage, or both.  After doing some work, type
<kbd class="kbd">M-x profiler-report</kbd> to display a summary buffer for each
resource that you chose to profile.  The names of the report buffers
include the times at which the reports were generated, so you can
generate another report later on without erasing previous results.
When you have finished profiling, type <kbd class="kbd">M-x profiler-stop</kbd> (there
is a small overhead associated with profiling).
</p>
<p>The profiler report buffer shows, on each line, a function that was
called, followed by how much resource (processor or memory) it used in
absolute and percentage times since profiling started.  If a given
line has a &lsquo;<samp class="samp">+</samp>&rsquo; symbol at the left-hand side, you can expand that
line by typing <kbd class="key">RET</kbd>, in order to see the function(s) called by
the higher-level function.  Pressing <kbd class="key">RET</kbd> again will collapse
back to the original state.
</p>
<p>Press <kbd class="kbd">j</kbd> or <kbd class="kbd">mouse-2</kbd> to jump to the definition of a function.
Press <kbd class="kbd">d</kbd> to view a function&rsquo;s documentation.
You can save a profile to a file using <kbd class="kbd">C-x C-w</kbd>.
You can compare two profiles using <kbd class="kbd">=</kbd>.
</p>

<a class="index-entry-id" id="index-elp_002eel"></a>
<a class="index-entry-id" id="index-timing-programs"></a>
<p>The <samp class="file">elp</samp> library offers an alternative approach.  See the file
<samp class="file">elp.el</samp> for instructions.
</p>
<a class="index-entry-id" id="index-benchmark_002eel"></a>
<a class="index-entry-id" id="index-benchmarking"></a>
<p>You can check the speed of individual Emacs Lisp forms using the
<samp class="file">benchmark</samp> library.  See the functions <code class="code">benchmark-run</code> and
<code class="code">benchmark-run-compiled</code> in <samp class="file">benchmark.el</samp>.
</p>
<a class="index-entry-id" id="index-_002d_002denable_002dprofiling-option-of-configure"></a>
<p>To profile Emacs at the level of its C code, you can build it using the
<samp class="option">--enable-profiling</samp> option of <code class="command">configure</code>.  When Emacs
exits, it generates a file <samp class="file">gmon.out</samp> that you can examine using
the <code class="command">gprof</code> utility.  This feature is mainly useful for
debugging Emacs.  It actually stops the Lisp-level <kbd class="kbd">M-x
profiler-&hellip;</kbd> commands described above from working.
</p></div>
<hr>
<div class="nav-panel">
<p>
Previous: <a href="Test-Coverage.html">Test Coverage</a>, Up: <a href="Debugging.html">Debugging Lisp Programs</a> &nbsp; [<a href="index.html#SEC_Contents" title="Table of contents" rel="contents">Contents</a>][<a href="Index.html" title="Index" rel="index">Index</a>]</p>
</div>



</body>
</html>
