<!DOCTYPE html>
<html>
<!-- Created by GNU Texinfo 7.1, https://www.gnu.org/software/texinfo/ -->
<head>
<meta http-equiv="Content-Type" content="text/html; charset=utf-8">
<!-- This is the GNU Emacs Lisp Reference Manual
corresponding to Emacs version 24.5.

Copyright Â© 1990-1996, 1998-2015 Free Software Foundation, Inc.

Permission is granted to copy, distribute and/or modify this document
under the terms of the GNU Free Documentation License, Version 1.3 or
any later version published by the Free Software Foundation; with the
Invariant Sections being "GNU General Public License," with the
Front-Cover Texts being "A GNU Manual," and with the Back-Cover
Texts as in (a) below.  A copy of the license is included in the
section entitled "GNU Free Documentation License."

(a) The FSF's Back-Cover Text is: "You have the freedom to copy and
modify this GNU manual.  Buying copies from the FSF supports it in
developing GNU and promoting software freedom." -->
<title>Functions for Key Lookup (GNU Emacs Lisp Reference Manual)</title>

<meta name="description" content="Functions for Key Lookup (GNU Emacs Lisp Reference Manual)">
<meta name="keywords" content="Functions for Key Lookup (GNU Emacs Lisp Reference Manual)">
<meta name="resource-type" content="document">
<meta name="distribution" content="global">
<meta name="Generator" content="makeinfo">
<meta name="viewport" content="width=device-width,initial-scale=1">

<link href="index.html" rel="start" title="Top">
<link href="Index.html" rel="index" title="Index">
<link href="index.html#SEC_Contents" rel="contents" title="Table of Contents">
<link href="Keymaps.html" rel="up" title="Keymaps">
<link href="Changing-Key-Bindings.html" rel="next" title="Changing Key Bindings">
<link href="Key-Lookup.html" rel="prev" title="Key Lookup">
<style type="text/css">
<!--
a.copiable-link {visibility: hidden; text-decoration: none; line-height: 0em}
div.example {margin-left: 3.2em}
kbd.kbd {font-style: oblique}
kbd.key {font-style: normal}
span.r {font-family: initial; font-weight: normal; font-style: normal}
span:hover a.copiable-link {visibility: visible}
strong.def-name {font-family: monospace; font-weight: bold; font-size: larger}
-->
</style>
<link rel="stylesheet" type="text/css" href="./manual.css">


</head>

<body lang="en">
<div class="section-level-extent" id="Functions-for-Key-Lookup">
<div class="nav-panel">
<p>
Next: <a href="Changing-Key-Bindings.html" accesskey="n" rel="next">Changing Key Bindings</a>, Previous: <a href="Key-Lookup.html" accesskey="p" rel="prev">Key Lookup</a>, Up: <a href="Keymaps.html" accesskey="u" rel="up">Keymaps</a> &nbsp; [<a href="index.html#SEC_Contents" title="Table of contents" rel="contents">Contents</a>][<a href="Index.html" title="Index" rel="index">Index</a>]</p>
</div>
<hr>
<h3 class="section" id="Functions-for-Key-Lookup-1"><span>21.11 Functions for Key Lookup<a class="copiable-link" href="#Functions-for-Key-Lookup-1"> &para;</a></span></h3>

<p>Here are the functions and variables pertaining to key lookup.
</p>
<dl class="first-deffn first-defun-alias-first-deffn">
<dt class="deffn defun-alias-deffn" id="index-lookup_002dkey"><span class="category-def">Function: </span><span><strong class="def-name">lookup-key</strong> <var class="def-var-arguments">keymap key &amp;optional accept-defaults</var><a class="copiable-link" href="#index-lookup_002dkey"> &para;</a></span></dt>
<dd><p>This function returns the definition of <var class="var">key</var> in <var class="var">keymap</var>.  All
the other functions described in this chapter that look up keys use
<code class="code">lookup-key</code>.  Here are examples:
</p>
<div class="example">
<div class="group"><pre class="example-preformatted">(lookup-key (current-global-map) &quot;\C-x\C-f&quot;)
    &rArr; find-file
</pre></div><div class="group"><pre class="example-preformatted">(lookup-key (current-global-map) (kbd &quot;C-x C-f&quot;))
    &rArr; find-file
</pre></div><div class="group"><pre class="example-preformatted">(lookup-key (current-global-map) &quot;\C-x\C-f12345&quot;)
    &rArr; 2
</pre></div></div>

<p>If the string or vector <var class="var">key</var> is not a valid key sequence according
to the prefix keys specified in <var class="var">keymap</var>, it must be &ldquo;too long&rdquo;
and have extra events at the end that do not fit into a single key
sequence.  Then the value is a number, the number of events at the front
of <var class="var">key</var> that compose a complete key.
</p>
<p>If <var class="var">accept-defaults</var> is non-<code class="code">nil</code>, then <code class="code">lookup-key</code>
considers default bindings as well as bindings for the specific events
in <var class="var">key</var>.  Otherwise, <code class="code">lookup-key</code> reports only bindings for
the specific sequence <var class="var">key</var>, ignoring default bindings except when
you explicitly ask about them.  (To do this, supply <code class="code">t</code> as an
element of <var class="var">key</var>; see <a class="ref" href="Format-of-Keymaps.html">Format of Keymaps</a>.)
</p>
<p>If <var class="var">key</var> contains a meta character (not a function key), that
character is implicitly replaced by a two-character sequence: the value
of <code class="code">meta-prefix-char</code>, followed by the corresponding non-meta
character.  Thus, the first example below is handled by conversion into
the second example.
</p>
<div class="example">
<div class="group"><pre class="example-preformatted">(lookup-key (current-global-map) &quot;\M-f&quot;)
    &rArr; forward-word
</pre></div><div class="group"><pre class="example-preformatted">(lookup-key (current-global-map) &quot;\ef&quot;)
    &rArr; forward-word
</pre></div></div>

<p>Unlike <code class="code">read-key-sequence</code>, this function does not modify the
specified events in ways that discard information (see <a class="pxref" href="Key-Sequence-Input.html">Key Sequence Input</a>).  In particular, it does not convert letters to lower case and
it does not change drag events to clicks.
</p></dd></dl>

<dl class="first-deffn">
<dt class="deffn" id="index-undefined"><span class="category-def">Command: </span><span><strong class="def-name">undefined</strong><a class="copiable-link" href="#index-undefined"> &para;</a></span></dt>
<dd><p>Used in keymaps to undefine keys.  It calls <code class="code">ding</code>, but does
not cause an error.
</p></dd></dl>

<dl class="first-deffn first-defun-alias-first-deffn">
<dt class="deffn defun-alias-deffn" id="index-local_002dkey_002dbinding"><span class="category-def">Function: </span><span><strong class="def-name">local-key-binding</strong> <var class="def-var-arguments">key &amp;optional accept-defaults</var><a class="copiable-link" href="#index-local_002dkey_002dbinding"> &para;</a></span></dt>
<dd><p>This function returns the binding for <var class="var">key</var> in the current
local keymap, or <code class="code">nil</code> if it is undefined there.
</p>
<p>The argument <var class="var">accept-defaults</var> controls checking for default bindings,
as in <code class="code">lookup-key</code> (above).
</p></dd></dl>

<dl class="first-deffn first-defun-alias-first-deffn">
<dt class="deffn defun-alias-deffn" id="index-global_002dkey_002dbinding"><span class="category-def">Function: </span><span><strong class="def-name">global-key-binding</strong> <var class="def-var-arguments">key &amp;optional accept-defaults</var><a class="copiable-link" href="#index-global_002dkey_002dbinding"> &para;</a></span></dt>
<dd><p>This function returns the binding for command <var class="var">key</var> in the
current global keymap, or <code class="code">nil</code> if it is undefined there.
</p>
<p>The argument <var class="var">accept-defaults</var> controls checking for default bindings,
as in <code class="code">lookup-key</code> (above).
</p></dd></dl>

<dl class="first-deffn first-defun-alias-first-deffn">
<dt class="deffn defun-alias-deffn" id="index-minor_002dmode_002dkey_002dbinding"><span class="category-def">Function: </span><span><strong class="def-name">minor-mode-key-binding</strong> <var class="def-var-arguments">key &amp;optional accept-defaults</var><a class="copiable-link" href="#index-minor_002dmode_002dkey_002dbinding"> &para;</a></span></dt>
<dd><p>This function returns a list of all the active minor mode bindings of
<var class="var">key</var>.  More precisely, it returns an alist of pairs
<code class="code">(<var class="var">modename</var> . <var class="var">binding</var>)</code>, where <var class="var">modename</var> is the
variable that enables the minor mode, and <var class="var">binding</var> is <var class="var">key</var>&rsquo;s
binding in that mode.  If <var class="var">key</var> has no minor-mode bindings, the
value is <code class="code">nil</code>.
</p>
<p>If the first binding found is not a prefix definition (a keymap or a
symbol defined as a keymap), all subsequent bindings from other minor
modes are omitted, since they would be completely shadowed.  Similarly,
the list omits non-prefix bindings that follow prefix bindings.
</p>
<p>The argument <var class="var">accept-defaults</var> controls checking for default
bindings, as in <code class="code">lookup-key</code> (above).
</p></dd></dl>

<dl class="first-defvr first-defopt-alias-first-defvr">
<dt class="defvr defopt-alias-defvr" id="index-meta_002dprefix_002dchar"><span class="category-def">User Option: </span><span><strong class="def-name">meta-prefix-char</strong><a class="copiable-link" href="#index-meta_002dprefix_002dchar"> &para;</a></span></dt>
<dd><a class="index-entry-id" id="index-ESC"></a>
<p>This variable is the meta-prefix character code.  It is used for
translating a meta character to a two-character sequence so it can be
looked up in a keymap.  For useful results, the value should be a
prefix event (see <a class="pxref" href="Prefix-Keys.html">Prefix Keys</a>).  The default value is 27, which is
the <abbr class="acronym">ASCII</abbr> code for <kbd class="key">ESC</kbd>.
</p>
<p>As long as the value of <code class="code">meta-prefix-char</code> remains 27, key lookup
translates <kbd class="kbd">M-b</kbd> into <kbd class="kbd"><kbd class="key">ESC</kbd> b</kbd>, which is normally defined
as the <code class="code">backward-word</code> command.  However, if you were to set
<code class="code">meta-prefix-char</code> to 24, the code for <kbd class="kbd">C-x</kbd>, then Emacs will
translate <kbd class="kbd">M-b</kbd> into <kbd class="kbd">C-x b</kbd>, whose standard binding is the
<code class="code">switch-to-buffer</code> command.  (Don&rsquo;t actually do this!)  Here is an
illustration of what would happen:
</p>
<div class="example smallexample">
<div class="group"><pre class="example-preformatted">meta-prefix-char                    ; <span class="r">The default value.</span>
     &rArr; 27
</pre></div><div class="group"><pre class="example-preformatted">(key-binding &quot;\M-b&quot;)
     &rArr; backward-word
</pre></div><div class="group"><pre class="example-preformatted">?\C-x                               ; <span class="r">The print representation</span>
     &rArr; 24                          ;   <span class="r">of a character.</span>
</pre></div><div class="group"><pre class="example-preformatted">(setq meta-prefix-char 24)
     &rArr; 24
</pre></div><div class="group"><pre class="example-preformatted">(key-binding &quot;\M-b&quot;)
     &rArr; switch-to-buffer            ; <span class="r">Now, typing <kbd class="kbd">M-b</kbd> is</span>
                                    ;   <span class="r">like typing <kbd class="kbd">C-x b</kbd>.</span>

(setq meta-prefix-char 27)          ; <span class="r">Avoid confusion!</span>
     &rArr; 27                          ; <span class="r">Restore the default value!</span>
</pre></div></div>

<p>This translation of one event into two happens only for characters, not
for other kinds of input events.  Thus, <kbd class="kbd">M-<kbd class="key">F1</kbd></kbd>, a function
key, is not converted into <kbd class="kbd"><kbd class="key">ESC</kbd> <kbd class="key">F1</kbd></kbd>.
</p></dd></dl>

</div>
<hr>
<div class="nav-panel">
<p>
Next: <a href="Changing-Key-Bindings.html">Changing Key Bindings</a>, Previous: <a href="Key-Lookup.html">Key Lookup</a>, Up: <a href="Keymaps.html">Keymaps</a> &nbsp; [<a href="index.html#SEC_Contents" title="Table of contents" rel="contents">Contents</a>][<a href="Index.html" title="Index" rel="index">Index</a>]</p>
</div>



</body>
</html>
