<!DOCTYPE html>
<html>
<!-- Created by GNU Texinfo 7.1, https://www.gnu.org/software/texinfo/ -->
<head>
<meta http-equiv="Content-Type" content="text/html; charset=utf-8">
<!-- This is the GNU Emacs Lisp Reference Manual
corresponding to Emacs version 30.1.

Copyright Â© 1990-1996, 1998-2025 Free Software Foundation,
Inc.

Permission is granted to copy, distribute and/or modify this document
under the terms of the GNU Free Documentation License, Version 1.3 or
any later version published by the Free Software Foundation; with the
Invariant Sections being "GNU General Public License," with the
Front-Cover Texts being "A GNU Manual," and with the Back-Cover
Texts as in (a) below.  A copy of the license is included in the
section entitled "GNU Free Documentation License."

(a) The FSF's Back-Cover Text is: "You have the freedom to copy and
modify this GNU manual.  Buying copies from the FSF supports it in
developing GNU and promoting software freedom." -->
<title>Defining Variables (GNU Emacs Lisp Reference Manual)</title>

<meta name="description" content="Defining Variables (GNU Emacs Lisp Reference Manual)">
<meta name="keywords" content="Defining Variables (GNU Emacs Lisp Reference Manual)">
<meta name="resource-type" content="document">
<meta name="distribution" content="global">
<meta name="Generator" content="makeinfo">
<meta name="viewport" content="width=device-width,initial-scale=1">

<link href="index.html" rel="start" title="Top">
<link href="Index.html" rel="index" title="Index">
<link href="index.html#SEC_Contents" rel="contents" title="Table of Contents">
<link href="Variables.html" rel="up" title="Variables">
<link href="Tips-for-Defining.html" rel="next" title="Tips for Defining">
<link href="Void-Variables.html" rel="prev" title="Void Variables">
<style type="text/css">
<!--
a.copiable-link {visibility: hidden; text-decoration: none; line-height: 0em}
div.example {margin-left: 3.2em}
kbd.kbd {font-style: oblique}
span:hover a.copiable-link {visibility: visible}
strong.def-name {font-family: monospace; font-weight: bold; font-size: larger}
-->
</style>
<link rel="stylesheet" type="text/css" href="./manual.css">


</head>

<body lang="en">
<div class="section-level-extent" id="Defining-Variables">
<div class="nav-panel">
<p>
Next: <a href="Tips-for-Defining.html" accesskey="n" rel="next">Tips for Defining Variables Robustly</a>, Previous: <a href="Void-Variables.html" accesskey="p" rel="prev">When a Variable is Void</a>, Up: <a href="Variables.html" accesskey="u" rel="up">Variables</a> &nbsp; [<a href="index.html#SEC_Contents" title="Table of contents" rel="contents">Contents</a>][<a href="Index.html" title="Index" rel="index">Index</a>]</p>
</div>
<hr>
<h3 class="section" id="Defining-Global-Variables"><span>12.5 Defining Global Variables<a class="copiable-link" href="#Defining-Global-Variables"> &para;</a></span></h3>
<a class="index-entry-id" id="index-variable-definition"></a>

<p>A <em class="dfn">variable definition</em> is a construct that announces your
intention to use a symbol as a global variable.  It uses the special
forms <code class="code">defvar</code> or <code class="code">defconst</code>, which are documented below.
</p>
<p>A variable definition serves three purposes.  First, it informs
people who read the code that the symbol is <em class="emph">intended</em> to be used
a certain way (as a variable).  Second, it informs the Lisp system of
this, optionally supplying an initial value and a documentation
string.  Third, it provides information to programming tools such as
<code class="command">etags</code>, allowing them to find where the variable was defined.
</p>
<p>The difference between <code class="code">defconst</code> and <code class="code">defvar</code> is mainly a
matter of intent, serving to inform human readers of whether the value
should ever change.  Emacs Lisp does not actually prevent you from
changing the value of a variable defined with <code class="code">defconst</code>.  One
notable difference between the two forms is that <code class="code">defconst</code>
unconditionally initializes the variable, whereas <code class="code">defvar</code>
initializes it only if it is originally void.
</p>
<p>To define a customizable variable, you should use <code class="code">defcustom</code>
(which calls <code class="code">defvar</code> as a subroutine).  See <a class="xref" href="Variable-Definitions.html">Defining Customization Variables</a>.
</p>
<dl class="first-deffn first-defspec-alias-first-deffn">
<dt class="deffn defspec-alias-deffn" id="index-defvar"><span class="category-def">Special Form: </span><span><strong class="def-name">defvar</strong> <var class="def-var-arguments">symbol [value [doc-string]]</var><a class="copiable-link" href="#index-defvar"> &para;</a></span></dt>
<dd><p>This special form defines <var class="var">symbol</var> as a variable and optionally
initializes and documents it.  Note that it doesn&rsquo;t evaluate
<var class="var">symbol</var>; the symbol to be defined should appear explicitly in the
<code class="code">defvar</code> form.  <code class="code">defvar</code> also marks <var class="var">symbol</var> as
<em class="dfn">special</em>, meaning that its bindings should always be dynamic
(see <a class="pxref" href="Variable-Scoping.html">Scoping Rules for Variable Bindings</a>).
</p>
<p>If <var class="var">value</var> is specified, and <var class="var">symbol</var> is void (i.e., it has no
dynamically bound value; see <a class="pxref" href="Void-Variables.html">When a Variable is Void</a>), then <code class="code">defvar</code>
evaluates <var class="var">value</var>, and initializes <var class="var">symbol</var> by setting it to the
result of the evaluation.  But if <var class="var">symbol</var> is not void,
<code class="code">defvar</code> does not evaluate <var class="var">value</var>, and leaves <var class="var">symbol</var>&rsquo;s
value unchanged.  If <var class="var">value</var> is omitted, <code class="code">defvar</code> doesn&rsquo;t
change the value of <var class="var">symbol</var> in any case.
</p>
<p>Note that specifying a value, even <code class="code">nil</code>, marks the variable as
special permanently.  Whereas if <var class="var">value</var> is omitted, then
<code class="code">defvar</code> marks the variable special only locally (i.e. within the
current lexical scope, or within the current file, if <code class="code">defvar</code> is
at the top-level).  This can be useful for suppressing byte compilation
warnings, see <a class="ref" href="Compiler-Errors.html">Compiler Errors</a>.
</p>
<p>If <var class="var">symbol</var> has a buffer-local binding in the current buffer, and
<var class="var">value</var> is specified, <code class="code">defvar</code> modifies the default value of
<var class="var">symbol</var>, which is buffer-independent, rather than the buffer-local
binding.  It sets the default value if the default value is void.
See <a class="xref" href="Buffer_002dLocal-Variables.html">Buffer-Local Variables</a>.
</p>
<p>If <var class="var">symbol</var> is already let bound (e.g., if the <code class="code">defvar</code> form
occurs in a <code class="code">let</code> form), then <code class="code">defvar</code> sets the toplevel
default value of <var class="var">symbol</var>, like <code class="code">set-default-toplevel-value</code>.
The let binding remains in effect until its binding construct exits.
See <a class="xref" href="Variable-Scoping.html">Scoping Rules for Variable Bindings</a>.
</p>
<a class="index-entry-id" id="index-eval_002ddefun_002c-and-defvar-forms"></a>
<a class="index-entry-id" id="index-eval_002dlast_002dsexp_002c-and-defvar-forms"></a>
<p>When you evaluate a top-level <code class="code">defvar</code> form with <kbd class="kbd">C-M-x</kbd>
(<code class="code">eval-defun</code>) or with <kbd class="kbd">C-x C-e</kbd> (<code class="code">eval-last-sexp</code>) in
Emacs Lisp mode, a special feature of these two commands arranges to
set the variable unconditionally, without testing whether its value is
void.
</p>
<p>If the <var class="var">doc-string</var> argument is supplied, it specifies the
documentation string for the variable (stored in the symbol&rsquo;s
<code class="code">variable-documentation</code> property).  See <a class="xref" href="Documentation.html">Documentation</a>.
</p>
<p>Here are some examples.  This form defines <code class="code">foo</code> but does not
initialize it:
</p>
<div class="example">
<div class="group"><pre class="example-preformatted">(defvar foo)
     &rArr; foo
</pre></div></div>

<p>This example initializes the value of <code class="code">bar</code> to <code class="code">23</code>, and gives
it a documentation string:
</p>
<div class="example">
<div class="group"><pre class="example-preformatted">(defvar bar 23
  &quot;The normal weight of a bar.&quot;)
     &rArr; bar
</pre></div></div>

<p>The <code class="code">defvar</code> form returns <var class="var">symbol</var>, but it is normally used
at top level in a file where its value does not matter.
</p>
<p>For a more elaborate example of using <code class="code">defvar</code> without a value,
see <a class="ref" href="Dynamic-Binding.html#Local-defvar-example">Local defvar example</a>.
</p></dd></dl>

<a class="index-entry-id" id="index-constant-variables-1"></a>
<dl class="first-deffn first-defspec-alias-first-deffn">
<dt class="deffn defspec-alias-deffn" id="index-defconst"><span class="category-def">Special Form: </span><span><strong class="def-name">defconst</strong> <var class="def-var-arguments">symbol value [doc-string]</var><a class="copiable-link" href="#index-defconst"> &para;</a></span></dt>
<dd><p>This special form defines <var class="var">symbol</var> as a value and initializes it.
It informs a person reading your code that <var class="var">symbol</var> has a standard
global value, established here, that should not be changed by the user
or by other programs.  Note that <var class="var">symbol</var> is not evaluated; the
symbol to be defined must appear explicitly in the <code class="code">defconst</code>.
</p>
<p>The <code class="code">defconst</code> form, like <code class="code">defvar</code>, marks the variable as
<em class="dfn">special</em>, meaning that it should always be dynamically bound
(see <a class="pxref" href="Variable-Scoping.html">Scoping Rules for Variable Bindings</a>).  In addition, it marks the variable as
risky (see <a class="pxref" href="File-Local-Variables.html">File Local Variables</a>).
</p>
<p><code class="code">defconst</code> always evaluates <var class="var">value</var>, and sets the value of
<var class="var">symbol</var> to the result.  If <var class="var">symbol</var> does have a buffer-local
binding in the current buffer, <code class="code">defconst</code> sets the default value,
not the buffer-local value.  (But you should not be making
buffer-local bindings for a symbol that is defined with
<code class="code">defconst</code>.)
</p>
<p>An example of the use of <code class="code">defconst</code> is Emacs&rsquo;s definition of
<code class="code">float-pi</code>&mdash;the mathematical constant <em class="math">pi</em>, which ought not
to be changed by anyone (attempts by the Indiana State Legislature
notwithstanding).  As the second form illustrates, however,
<code class="code">defconst</code> is only advisory.
</p>
<div class="example">
<div class="group"><pre class="example-preformatted">(defconst float-pi 3.141592653589793 &quot;The value of Pi.&quot;)
     &rArr; float-pi
</pre></div><div class="group"><pre class="example-preformatted">(setq float-pi 3)
     &rArr; float-pi
</pre></div><div class="group"><pre class="example-preformatted">float-pi
     &rArr; 3
</pre></div></div>
</dd></dl>

<p><strong class="strong">Warning:</strong> If you use a <code class="code">defconst</code> or <code class="code">defvar</code>
special form while the variable has a local binding (made with
<code class="code">let</code>, or a function argument), it sets the local binding rather
than the global binding.  This is not what you usually want.  To
prevent this, use these special forms at top level in a file, where
normally no local binding is in effect, and make sure to load the file
before making a local binding for the variable.
</p>
</div>
<hr>
<div class="nav-panel">
<p>
Next: <a href="Tips-for-Defining.html">Tips for Defining Variables Robustly</a>, Previous: <a href="Void-Variables.html">When a Variable is Void</a>, Up: <a href="Variables.html">Variables</a> &nbsp; [<a href="index.html#SEC_Contents" title="Table of contents" rel="contents">Contents</a>][<a href="Index.html" title="Index" rel="index">Index</a>]</p>
</div>



</body>
</html>
