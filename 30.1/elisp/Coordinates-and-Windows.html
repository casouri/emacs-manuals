<!DOCTYPE html>
<html>
<!-- Created by GNU Texinfo 7.1, https://www.gnu.org/software/texinfo/ -->
<head>
<meta http-equiv="Content-Type" content="text/html; charset=utf-8">
<!-- This is the GNU Emacs Lisp Reference Manual
corresponding to Emacs version 30.1.

Copyright Â© 1990-1996, 1998-2025 Free Software Foundation,
Inc.

Permission is granted to copy, distribute and/or modify this document
under the terms of the GNU Free Documentation License, Version 1.3 or
any later version published by the Free Software Foundation; with the
Invariant Sections being "GNU General Public License," with the
Front-Cover Texts being "A GNU Manual," and with the Back-Cover
Texts as in (a) below.  A copy of the license is included in the
section entitled "GNU Free Documentation License."

(a) The FSF's Back-Cover Text is: "You have the freedom to copy and
modify this GNU manual.  Buying copies from the FSF supports it in
developing GNU and promoting software freedom." -->
<title>Coordinates and Windows (GNU Emacs Lisp Reference Manual)</title>

<meta name="description" content="Coordinates and Windows (GNU Emacs Lisp Reference Manual)">
<meta name="keywords" content="Coordinates and Windows (GNU Emacs Lisp Reference Manual)">
<meta name="resource-type" content="document">
<meta name="distribution" content="global">
<meta name="Generator" content="makeinfo">
<meta name="viewport" content="width=device-width,initial-scale=1">

<link href="index.html" rel="start" title="Top">
<link href="Index.html" rel="index" title="Index">
<link href="index.html#SEC_Contents" rel="contents" title="Table of Contents">
<link href="Windows.html" rel="up" title="Windows">
<link href="Mouse-Window-Auto_002dselection.html" rel="next" title="Mouse Window Auto-selection">
<link href="Horizontal-Scrolling.html" rel="prev" title="Horizontal Scrolling">
<style type="text/css">
<!--
a.copiable-link {visibility: hidden; text-decoration: none; line-height: 0em}
div.example {margin-left: 3.2em}
span:hover a.copiable-link {visibility: visible}
strong.def-name {font-family: monospace; font-weight: bold; font-size: larger}
-->
</style>
<link rel="stylesheet" type="text/css" href="./manual.css">


</head>

<body lang="en">
<div class="section-level-extent" id="Coordinates-and-Windows">
<div class="nav-panel">
<p>
Next: <a href="Mouse-Window-Auto_002dselection.html" accesskey="n" rel="next">Mouse Window Auto-selection</a>, Previous: <a href="Horizontal-Scrolling.html" accesskey="p" rel="prev">Horizontal Scrolling</a>, Up: <a href="Windows.html" accesskey="u" rel="up">Windows</a> &nbsp; [<a href="index.html#SEC_Contents" title="Table of contents" rel="contents">Contents</a>][<a href="Index.html" title="Index" rel="index">Index</a>]</p>
</div>
<hr>
<h3 class="section" id="Coordinates-and-Windows-1"><span>29.24 Coordinates and Windows<a class="copiable-link" href="#Coordinates-and-Windows-1"> &para;</a></span></h3>
<a class="index-entry-id" id="index-frame_002drelative-coordinate"></a>
<a class="index-entry-id" id="index-coordinate_002c-relative-to-frame"></a>
<a class="index-entry-id" id="index-window-position-1"></a>

<p>This section describes functions that report positions of and within a
window.  Most of these functions report positions relative to an origin
at the native position of the window&rsquo;s frame (see <a class="pxref" href="Frame-Geometry.html">Frame Geometry</a>).
Some functions report positions relative to the origin of the display of
the window&rsquo;s frame.  In any case, the origin has the coordinates (0, 0)
and X and Y coordinates increase rightward and downward respectively.
</p>
<p>For the following functions, X and Y coordinates are reported in
integer character units, i.e., numbers of lines and columns
respectively.  On a graphical display, each &ldquo;line&rdquo; and &ldquo;column&rdquo;
corresponds to the height and width of the default character specified by
the frame&rsquo;s default font (see <a class="pxref" href="Frame-Font.html">Frame Font</a>).
</p>
<dl class="first-deffn first-defun-alias-first-deffn">
<dt class="deffn defun-alias-deffn" id="index-window_002dedges"><span class="category-def">Function: </span><span><strong class="def-name">window-edges</strong> <var class="def-var-arguments">&amp;optional window body absolute pixelwise</var><a class="copiable-link" href="#index-window_002dedges"> &para;</a></span></dt>
<dd><p>This function returns a list of the edge coordinates of <var class="var">window</var>.
If <var class="var">window</var> is omitted or <code class="code">nil</code>, it defaults to the selected
window.
</p>
<p>The return value has the form <code class="code">(<var class="var">left</var> <var class="var">top</var> <var class="var">right</var>
<var class="var">bottom</var>)</code>.  These list elements are, respectively, the X
coordinate of the leftmost column occupied by the window, the Y
coordinate of the topmost row, the X coordinate one column to the
right of the rightmost column, and the Y coordinate one row down from
the bottommost row.
</p>
<p>Note that these are the actual outer edges of the window, including any
of its decorations.  On a text terminal, if the window has a neighbor on
its right, its right edge includes the separator line between the window
and its neighbor.
</p>
<p>If the optional argument <var class="var">body</var> is <code class="code">nil</code>, this means to
return the edges corresponding to the total size of <var class="var">window</var>.
<var class="var">body</var> non-<code class="code">nil</code> means to return the edges of <var class="var">window</var>&rsquo;s
body.  If <var class="var">body</var> is non-<code class="code">nil</code>, <var class="var">window</var> must specify a
live window.
</p>
<p>If the optional argument <var class="var">absolute</var> is <code class="code">nil</code>, this means to
return edges relative to the native position of <var class="var">window</var>&rsquo;s frame.
<var class="var">absolute</var> non-<code class="code">nil</code> means to return coordinates relative to
the origin (0, 0) of <var class="var">window</var>&rsquo;s display.  On non-graphical systems
this argument has no effect.
</p>
<p>If the optional argument <var class="var">pixelwise</var> is <code class="code">nil</code>, this means to
return the coordinates in terms of the default character width and
height of <var class="var">window</var>&rsquo;s frame (see <a class="pxref" href="Frame-Font.html">Frame Font</a>), rounded if
necessary.  <var class="var">pixelwise</var> non-<code class="code">nil</code> means to return the
coordinates in pixels.  Note that the pixel specified by <var class="var">right</var> and
<var class="var">bottom</var> is immediately outside of these edges.  If <var class="var">absolute</var>
is non-<code class="code">nil</code>, <var class="var">pixelwise</var> is implicitly non-<code class="code">nil</code> too.
</p></dd></dl>

<dl class="first-deffn first-defun-alias-first-deffn">
<dt class="deffn defun-alias-deffn" id="index-window_002dbody_002dedges"><span class="category-def">Function: </span><span><strong class="def-name">window-body-edges</strong> <var class="def-var-arguments">&amp;optional window</var><a class="copiable-link" href="#index-window_002dbody_002dedges"> &para;</a></span></dt>
<dd><p>This function returns the edges of <var class="var">window</var>&rsquo;s body (see <a class="pxref" href="Window-Sizes.html">Window Sizes</a>).  Calling <code class="code">(window-body-edges window)</code> is equivalent to
calling <code class="code">(window-edges window t)</code>, see above.
</p></dd></dl>


<p>The following functions can be used to relate a set of
frame-relative coordinates to a window:
</p>
<dl class="first-deffn first-defun-alias-first-deffn">
<dt class="deffn defun-alias-deffn" id="index-window_002dat"><span class="category-def">Function: </span><span><strong class="def-name">window-at</strong> <var class="def-var-arguments">x y &amp;optional frame</var><a class="copiable-link" href="#index-window_002dat"> &para;</a></span></dt>
<dd><p>This function returns the live window at the coordinates <var class="var">x</var> and
<var class="var">y</var> given in default character sizes (see <a class="pxref" href="Frame-Font.html">Frame Font</a>) relative
to the native position of <var class="var">frame</var> (see <a class="pxref" href="Frame-Geometry.html">Frame Geometry</a>).
</p>
<p>If there is no window at that position, the return value is <code class="code">nil</code>.
If <var class="var">frame</var> is omitted or <code class="code">nil</code>, it defaults to the selected
frame.
</p></dd></dl>

<dl class="first-deffn first-defun-alias-first-deffn">
<dt class="deffn defun-alias-deffn" id="index-coordinates_002din_002dwindow_002dp"><span class="category-def">Function: </span><span><strong class="def-name">coordinates-in-window-p</strong> <var class="def-var-arguments">coordinates window</var><a class="copiable-link" href="#index-coordinates_002din_002dwindow_002dp"> &para;</a></span></dt>
<dd><p>This function checks whether a window <var class="var">window</var> occupies the frame
relative coordinates <var class="var">coordinates</var>, and if so, which part of the
window that is.  <var class="var">window</var> should be a live window.
</p>
<p><var class="var">coordinates</var> should be a cons cell of the form <code class="code">(<var class="var">x</var>
. <var class="var">y</var>)</code>, where <var class="var">x</var> and <var class="var">y</var> are given in default character
sizes (see <a class="pxref" href="Frame-Font.html">Frame Font</a>) relative to the native position of
<var class="var">window</var>&rsquo;s frame (see <a class="pxref" href="Frame-Geometry.html">Frame Geometry</a>).
</p>
<p>If there is no window at the specified position, the return value is
<code class="code">nil</code> .  Otherwise, the return value is one of the following:
</p>
<dl class="table">
<dt><code class="code">(<var class="var">relx</var> . <var class="var">rely</var>)</code></dt>
<dd><p>The coordinates are inside <var class="var">window</var>.  The numbers <var class="var">relx</var> and
<var class="var">rely</var> are the equivalent window-relative coordinates for the
specified position, counting from 0 at the top left corner of the
window.
</p>
</dd>
<dt><code class="code">mode-line</code></dt>
<dd><p>The coordinates are in the mode line of <var class="var">window</var>.
</p>
</dd>
<dt><code class="code">header-line</code></dt>
<dd><p>The coordinates are in the header line of <var class="var">window</var>.
</p>
</dd>
<dt><code class="code">tab-line</code></dt>
<dd><p>The coordinates are in the tab line of <var class="var">window</var>.
</p>
</dd>
<dt><code class="code">right-divider</code></dt>
<dd><p>The coordinates are in the divider separating <var class="var">window</var> from a
window on the right.
</p>
</dd>
<dt><code class="code">bottom-divider</code></dt>
<dd><p>The coordinates are in the divider separating <var class="var">window</var> from a
window beneath.
</p>
</dd>
<dt><code class="code">vertical-line</code></dt>
<dd><p>The coordinates are in the vertical line between <var class="var">window</var> and its
neighbor to the right.  This value occurs only if the window doesn&rsquo;t
have a scroll bar; positions in a scroll bar are considered outside the
window for these purposes.
</p>
</dd>
<dt><code class="code">left-fringe</code></dt>
<dt><code class="code">right-fringe</code></dt>
<dd><p>The coordinates are in the left or right fringe of the window.
</p>
</dd>
<dt><code class="code">left-margin</code></dt>
<dt><code class="code">right-margin</code></dt>
<dd><p>The coordinates are in the left or right margin of the window.
</p>
</dd>
<dt><code class="code">nil</code></dt>
<dd><p>The coordinates are not in any part of <var class="var">window</var>.
</p></dd>
</dl>

<p>The function <code class="code">coordinates-in-window-p</code> does not require a frame as
argument because it always uses the frame that <var class="var">window</var> is on.
</p></dd></dl>

<p>The following functions return window positions in pixels, rather
than character units.  Though mostly useful on graphical displays,
they can also be called on text terminals, where the screen area of
each text character is taken to be one pixel.
</p>
<dl class="first-deffn first-defun-alias-first-deffn">
<dt class="deffn defun-alias-deffn" id="index-window_002dpixel_002dedges"><span class="category-def">Function: </span><span><strong class="def-name">window-pixel-edges</strong> <var class="def-var-arguments">&amp;optional window</var><a class="copiable-link" href="#index-window_002dpixel_002dedges"> &para;</a></span></dt>
<dd><p>This function returns a list of pixel coordinates for the edges of
<var class="var">window</var>.  Calling <code class="code">(window-pixel-edges window)</code> is equivalent
to calling <code class="code">(window-edges window nil nil t)</code>, see above.
</p></dd></dl>


<dl class="first-deffn first-defun-alias-first-deffn">
<dt class="deffn defun-alias-deffn" id="index-window_002dbody_002dpixel_002dedges"><span class="category-def">Function: </span><span><strong class="def-name">window-body-pixel-edges</strong> <var class="def-var-arguments">&amp;optional window</var><a class="copiable-link" href="#index-window_002dbody_002dpixel_002dedges"> &para;</a></span></dt>
<dd><p>This function returns the pixel edges of <var class="var">window</var>&rsquo;s body.  Calling
<code class="code">(window-body-pixel-edges window)</code> is equivalent to calling
<code class="code">(window-edges window t nil t)</code>, see above.
</p></dd></dl>

<p>The following functions return window positions in pixels, relative to
the origin of the display screen rather than that of the frame:
</p>
<dl class="first-deffn first-defun-alias-first-deffn">
<dt class="deffn defun-alias-deffn" id="index-window_002dabsolute_002dpixel_002dedges"><span class="category-def">Function: </span><span><strong class="def-name">window-absolute-pixel-edges</strong> <var class="def-var-arguments">&amp;optional window</var><a class="copiable-link" href="#index-window_002dabsolute_002dpixel_002dedges"> &para;</a></span></dt>
<dd><p>This function returns the pixel coordinates of <var class="var">window</var> relative to
an origin at (0, 0) of the display of <var class="var">window</var>&rsquo;s frame.  Calling
<code class="code">(window-absolute-pixel-edges)</code> is equivalent to calling
<code class="code">(window-edges window nil t t)</code>, see above.
</p></dd></dl>

<dl class="first-deffn first-defun-alias-first-deffn">
<dt class="deffn defun-alias-deffn" id="index-window_002dabsolute_002dbody_002dpixel_002dedges"><span class="category-def">Function: </span><span><strong class="def-name">window-absolute-body-pixel-edges</strong> <var class="def-var-arguments">&amp;optional window</var><a class="copiable-link" href="#index-window_002dabsolute_002dbody_002dpixel_002dedges"> &para;</a></span></dt>
<dd><p>This function returns the pixel coordinates of <var class="var">window</var>&rsquo;s body
relative to an origin at (0, 0) of the display of <var class="var">window</var>&rsquo;s frame.
Calling <code class="code">(window-absolute-body-pixel-edges window)</code> is equivalent
to calling <code class="code">(window-edges window t t t)</code>, see above.
</p>
<p>Combined with <code class="code">set-mouse-absolute-pixel-position</code>, this function
can be used to move the mouse pointer to an arbitrary buffer position
visible in some window:
</p>
<div class="example">
<div class="group"><pre class="example-preformatted">(let ((edges (window-absolute-body-pixel-edges))
      (position (pos-visible-in-window-p nil nil t)))
  (set-mouse-absolute-pixel-position
   (+ (nth 0 edges) (nth 0 position))
   (+ (nth 1 edges) (nth 1 position))))
</pre></div></div>

<p>On a graphical terminal this form &ldquo;warps&rdquo; the mouse cursor to the
upper left corner of the glyph at the selected window&rsquo;s point.  A
position calculated this way can be also used to show a tooltip window
there.
</p></dd></dl>

<p>The following function returns the screen coordinates of a buffer
position visible in a window:
</p>
<dl class="first-deffn first-defun-alias-first-deffn">
<dt class="deffn defun-alias-deffn" id="index-window_002dabsolute_002dpixel_002dposition"><span class="category-def">Function: </span><span><strong class="def-name">window-absolute-pixel-position</strong> <var class="def-var-arguments">&amp;optional position window</var><a class="copiable-link" href="#index-window_002dabsolute_002dpixel_002dposition"> &para;</a></span></dt>
<dd><p>If the buffer position <var class="var">position</var> is visible in window <var class="var">window</var>,
this function returns the display coordinates of the upper/left corner
of the glyph at <var class="var">position</var>.  The return value is a cons of the X-
and Y-coordinates of that corner, relative to an origin at (0, 0) of
<var class="var">window</var>&rsquo;s display.  It returns <code class="code">nil</code> if <var class="var">position</var> is not
visible in <var class="var">window</var>.
</p>
<p><var class="var">window</var> must be a live window and defaults to the selected
window.  <var class="var">position</var> defaults to the value of <code class="code">window-point</code>
of <var class="var">window</var>.
</p>
<p>This means that in order to move the mouse pointer to the position of
point in the selected window, it&rsquo;s sufficient to write:
</p>
<div class="example">
<div class="group"><pre class="example-preformatted">(let ((position (window-absolute-pixel-position)))
  (set-mouse-absolute-pixel-position
   (car position) (cdr position)))
</pre></div></div>
</dd></dl>

<p>The following function returns the largest rectangle that can be
inscribed in a window without covering text displayed in that window.
</p>
<dl class="first-deffn first-defun-alias-first-deffn">
<dt class="deffn defun-alias-deffn" id="index-window_002dlargest_002dempty_002drectangle"><span class="category-def">Function: </span><span><strong class="def-name">window-largest-empty-rectangle</strong> <var class="def-var-arguments">&amp;optional window count min-width min-height positions left</var><a class="copiable-link" href="#index-window_002dlargest_002dempty_002drectangle"> &para;</a></span></dt>
<dd><p>This function calculates the dimensions of the largest empty rectangle
that can be inscribed in the specified <var class="var">window</var>&rsquo;s text area.
<var class="var">window</var> must be a live window and defaults to the selected one.
</p>
<p>The return value is a triple of the width and the start and end
y-coordinates of the largest rectangle that can be inscribed into the
empty space (space not displaying any text) of the text area of
<var class="var">window</var>.  No x-coordinates are returned by this function&mdash;any such
rectangle is assumed to end at the right edge of <var class="var">window</var>&rsquo;s text
area.  If no empty space can be found, the return value is <code class="code">nil</code>.
</p>
<p>The optional argument <var class="var">count</var>, if non-<code class="code">nil</code>, specifies a
maximum number of rectangles to return.  This means that the return
value is a list of triples specifying rectangles with the largest
rectangle first.  <var class="var">count</var> can be also a cons cell whose car
specifies the number of rectangles to return and whose <small class="sc">CDR</small>, if
non-<code class="code">nil</code>, states that all rectangles returned must be disjoint.
</p>
<p>The optional arguments <var class="var">min-width</var> and <var class="var">min-height</var>, if
non-<code class="code">nil</code>, specify the minimum width and height of any rectangle
returned.
</p>
<p>The optional argument <var class="var">positions</var>, if non-<code class="code">nil</code>, is a cons cell
whose <small class="sc">CAR</small> specifies the uppermost and whose <small class="sc">CDR</small> specifies the
lowermost pixel position that must be covered by any rectangle returned.
These positions measure from the start of the text area of <var class="var">window</var>.
</p>
<p>The optional argument <var class="var">left</var>, if non-<code class="code">nil</code>, means to return
values suitable for buffers displaying right to left text.  In that
case, any rectangle returned is assumed to start at the left edge of
<var class="var">window</var>&rsquo;s text area.
</p>
<p>Note that this function has to retrieve the dimensions of each line of
<var class="var">window</var>&rsquo;s glyph matrix via <code class="code">window-lines-pixel-dimensions</code>
(see <a class="pxref" href="Size-of-Displayed-Text.html">Size of Displayed Text</a>).  Hence, this function may also return
<code class="code">nil</code> when the current glyph matrix of <var class="var">window</var> is not
up-to-date.
</p></dd></dl>


</div>
<hr>
<div class="nav-panel">
<p>
Next: <a href="Mouse-Window-Auto_002dselection.html">Mouse Window Auto-selection</a>, Previous: <a href="Horizontal-Scrolling.html">Horizontal Scrolling</a>, Up: <a href="Windows.html">Windows</a> &nbsp; [<a href="index.html#SEC_Contents" title="Table of contents" rel="contents">Contents</a>][<a href="Index.html" title="Index" rel="index">Index</a>]</p>
</div>



</body>
</html>
