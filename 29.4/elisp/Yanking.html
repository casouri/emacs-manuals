<!DOCTYPE html>
<html>
<!-- Created by GNU Texinfo 7.1, https://www.gnu.org/software/texinfo/ -->
<head>
<meta http-equiv="Content-Type" content="text/html; charset=utf-8">
<!-- This is the GNU Emacs Lisp Reference Manual
corresponding to Emacs version 29.4.

Copyright Â© 1990-1996, 1998-2024 Free Software Foundation,
Inc.

Permission is granted to copy, distribute and/or modify this document
under the terms of the GNU Free Documentation License, Version 1.3 or
any later version published by the Free Software Foundation; with the
Invariant Sections being "GNU General Public License," with the
Front-Cover Texts being "A GNU Manual," and with the Back-Cover
Texts as in (a) below.  A copy of the license is included in the
section entitled "GNU Free Documentation License."

(a) The FSF's Back-Cover Text is: "You have the freedom to copy and
modify this GNU manual.  Buying copies from the FSF supports it in
developing GNU and promoting software freedom." -->
<title>Yanking (GNU Emacs Lisp Reference Manual)</title>

<meta name="description" content="Yanking (GNU Emacs Lisp Reference Manual)">
<meta name="keywords" content="Yanking (GNU Emacs Lisp Reference Manual)">
<meta name="resource-type" content="document">
<meta name="distribution" content="global">
<meta name="Generator" content="makeinfo">
<meta name="viewport" content="width=device-width,initial-scale=1">

<link href="index.html" rel="start" title="Top">
<link href="Index.html" rel="index" title="Index">
<link href="index.html#SEC_Contents" rel="contents" title="Table of Contents">
<link href="The-Kill-Ring.html" rel="up" title="The Kill Ring">
<link href="Yank-Commands.html" rel="next" title="Yank Commands">
<link href="Kill-Functions.html" rel="prev" title="Kill Functions">
<style type="text/css">
<!--
a.copiable-link {visibility: hidden; text-decoration: none; line-height: 0em}
div.example {margin-left: 3.2em}
span:hover a.copiable-link {visibility: visible}
strong.def-name {font-family: monospace; font-weight: bold; font-size: larger}
-->
</style>
<link rel="stylesheet" type="text/css" href="./manual.css">


</head>

<body lang="en">
<div class="subsection-level-extent" id="Yanking">
<div class="nav-panel">
<p>
Next: <a href="Yank-Commands.html" accesskey="n" rel="next">Functions for Yanking</a>, Previous: <a href="Kill-Functions.html" accesskey="p" rel="prev">Functions for Killing</a>, Up: <a href="The-Kill-Ring.html" accesskey="u" rel="up">The Kill Ring</a> &nbsp; [<a href="index.html#SEC_Contents" title="Table of contents" rel="contents">Contents</a>][<a href="Index.html" title="Index" rel="index">Index</a>]</p>
</div>
<hr>
<h4 class="subsection" id="Yanking-1"><span>33.8.3 Yanking<a class="copiable-link" href="#Yanking-1"> &para;</a></span></h4>

<p>Yanking means inserting text from the kill ring, but it does not
insert the text blindly.  The <code class="code">yank</code> command, and related
commands, use <code class="code">insert-for-yank</code> to perform special processing on
the text before it is inserted.
</p>
<dl class="first-deffn first-defun-alias-first-deffn">
<dt class="deffn defun-alias-deffn" id="index-insert_002dfor_002dyank"><span class="category-def">Function: </span><span><strong class="def-name">insert-for-yank</strong> <var class="def-var-arguments">string</var><a class="copiable-link" href="#index-insert_002dfor_002dyank"> &para;</a></span></dt>
<dd><p>This function works like <code class="code">insert</code>, except that it processes the
text in <var class="var">string</var> according to the <code class="code">yank-handler</code> text
property, as well as the variables <code class="code">yank-handled-properties</code> and
<code class="code">yank-excluded-properties</code> (see below), before inserting the
result into the current buffer.
</p>
<p><var class="var">string</var> will be run through <code class="code">yank-transform-functions</code> (see
below) before inserting.
</p></dd></dl>

<dl class="first-deffn first-defun-alias-first-deffn">
<dt class="deffn defun-alias-deffn" id="index-insert_002dbuffer_002dsubstring_002das_002dyank"><span class="category-def">Function: </span><span><strong class="def-name">insert-buffer-substring-as-yank</strong> <var class="def-var-arguments">buf &amp;optional start end</var><a class="copiable-link" href="#index-insert_002dbuffer_002dsubstring_002das_002dyank"> &para;</a></span></dt>
<dd><p>This function resembles <code class="code">insert-buffer-substring</code>, except that it
processes the text according to <code class="code">yank-handled-properties</code> and
<code class="code">yank-excluded-properties</code>.  (It does not handle the
<code class="code">yank-handler</code> property, which does not normally occur in buffer
text anyway.)
</p></dd></dl>

<p>If you put a <code class="code">yank-handler</code> text property on all or part of a
string, that alters how <code class="code">insert-for-yank</code> inserts the string.  If
different parts of the string have different <code class="code">yank-handler</code>
values (comparison being done with <code class="code">eq</code>), each substring is
handled separately.  The property value must be a list of one to four
elements, with the following format (where elements after the first
may be omitted):
</p>
<div class="example">
<pre class="example-preformatted">(<var class="var">function</var> <var class="var">param</var> <var class="var">noexclude</var> <var class="var">undo</var>)
</pre></div>

<p>Here is what the elements do:
</p>
<dl class="table">
<dt><var class="var">function</var></dt>
<dd><p>When <var class="var">function</var> is non-<code class="code">nil</code>, it is called instead of
<code class="code">insert</code> to insert the string, with one argument&mdash;the string to
insert.
</p>
</dd>
<dt><var class="var">param</var></dt>
<dd><p>If <var class="var">param</var> is present and non-<code class="code">nil</code>, it replaces <var class="var">string</var>
(or the substring of <var class="var">string</var> being processed) as the object
passed to <var class="var">function</var> (or <code class="code">insert</code>).  For example, if
<var class="var">function</var> is <code class="code">yank-rectangle</code>, <var class="var">param</var> should be a list
of strings to insert as a rectangle.
</p>
</dd>
<dt><var class="var">noexclude</var></dt>
<dd><p>If <var class="var">noexclude</var> is present and non-<code class="code">nil</code>, that disables the
normal action of <code class="code">yank-handled-properties</code> and
<code class="code">yank-excluded-properties</code> on the inserted string.
</p>
</dd>
<dt><var class="var">undo</var></dt>
<dd><p>If <var class="var">undo</var> is present and non-<code class="code">nil</code>, it is a function that will be
called by <code class="code">yank-pop</code> to undo the insertion of the current object.
It is called with two arguments, the start and end of the current
region.  <var class="var">function</var> can set <code class="code">yank-undo-function</code> to override
the <var class="var">undo</var> value.
</p></dd>
</dl>

<a class="index-entry-id" id="index-yanking-and-text-properties"></a>
<dl class="first-defvr first-defopt-alias-first-defvr">
<dt class="defvr defopt-alias-defvr" id="index-yank_002dhandled_002dproperties"><span class="category-def">User Option: </span><span><strong class="def-name">yank-handled-properties</strong><a class="copiable-link" href="#index-yank_002dhandled_002dproperties"> &para;</a></span></dt>
<dd><p>This variable specifies special text property handling conditions for
yanked text.  It takes effect after the text has been inserted (either
normally, or via the <code class="code">yank-handler</code> property), and prior to
<code class="code">yank-excluded-properties</code> taking effect.
</p>
<p>The value should be an alist of elements <code class="code">(<var class="var">prop</var>
. <var class="var">fun</var>)</code>.  Each alist element is handled in order.  The inserted
text is scanned for stretches of text having text properties <code class="code">eq</code>
to <var class="var">prop</var>; for each such stretch, <var class="var">fun</var> is called with three
arguments: the value of the property, and the start and end positions
of the text.
</p></dd></dl>

<dl class="first-defvr first-defopt-alias-first-defvr">
<dt class="defvr defopt-alias-defvr" id="index-yank_002dexcluded_002dproperties"><span class="category-def">User Option: </span><span><strong class="def-name">yank-excluded-properties</strong><a class="copiable-link" href="#index-yank_002dexcluded_002dproperties"> &para;</a></span></dt>
<dd><p>The value of this variable is the list of properties to remove from
inserted text.  Its default value contains properties that might lead
to annoying results, such as causing the text to respond to the mouse
or specifying key bindings.  It takes effect after
<code class="code">yank-handled-properties</code>.
</p></dd></dl>

<dl class="first-defvr first-defvar-alias-first-defvr">
<dt class="defvr defvar-alias-defvr" id="index-yank_002dtransform_002dfunctions"><span class="category-def">Variable: </span><span><strong class="def-name">yank-transform-functions</strong><a class="copiable-link" href="#index-yank_002dtransform_002dfunctions"> &para;</a></span></dt>
<dd><p>This variable is a list of functions.  Each function is called (in
order) with the string to be yanked as the argument, and should
return a (possibly transformed) string.  This variable can be set
globally, but can also be used to create new commands that are
variations on <code class="code">yank</code>.  For instance, to create a command that
works like <code class="code">yank</code>, but cleans up whitespace before inserting, you
could say something like:
</p>
<div class="example lisp">
<pre class="lisp-preformatted">(defun yank-with-clean-whitespace ()
  (interactive)
  (let ((yank-transform-functions
	 '(string-clean-whitespace)))
    (call-interactively #'yank)))
</pre></div>
</dd></dl>

</div>
<hr>
<div class="nav-panel">
<p>
Next: <a href="Yank-Commands.html">Functions for Yanking</a>, Previous: <a href="Kill-Functions.html">Functions for Killing</a>, Up: <a href="The-Kill-Ring.html">The Kill Ring</a> &nbsp; [<a href="index.html#SEC_Contents" title="Table of contents" rel="contents">Contents</a>][<a href="Index.html" title="Index" rel="index">Index</a>]</p>
</div>



</body>
</html>
