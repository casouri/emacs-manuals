<!DOCTYPE html>
<html>
<!-- Created by GNU Texinfo 7.1, https://www.gnu.org/software/texinfo/ -->
<head>
<meta http-equiv="Content-Type" content="text/html; charset=utf-8">
<!-- This is the GNU Emacs Lisp Reference Manual
corresponding to Emacs version 29.4.

Copyright Â© 1990-1996, 1998-2024 Free Software Foundation,
Inc.

Permission is granted to copy, distribute and/or modify this document
under the terms of the GNU Free Documentation License, Version 1.3 or
any later version published by the Free Software Foundation; with the
Invariant Sections being "GNU General Public License," with the
Front-Cover Texts being "A GNU Manual," and with the Back-Cover
Texts as in (a) below.  A copy of the license is included in the
section entitled "GNU Free Documentation License."

(a) The FSF's Back-Cover Text is: "You have the freedom to copy and
modify this GNU manual.  Buying copies from the FSF supports it in
developing GNU and promoting software freedom." -->
<title>Position Parse (GNU Emacs Lisp Reference Manual)</title>

<meta name="description" content="Position Parse (GNU Emacs Lisp Reference Manual)">
<meta name="keywords" content="Position Parse (GNU Emacs Lisp Reference Manual)">
<meta name="resource-type" content="document">
<meta name="distribution" content="global">
<meta name="Generator" content="makeinfo">
<meta name="viewport" content="width=device-width,initial-scale=1">

<link href="index.html" rel="start" title="Top">
<link href="Index.html" rel="index" title="Index">
<link href="index.html#SEC_Contents" rel="contents" title="Table of Contents">
<link href="Parsing-Expressions.html" rel="up" title="Parsing Expressions">
<link href="Parser-State.html" rel="next" title="Parser State">
<link href="Motion-via-Parsing.html" rel="prev" title="Motion via Parsing">
<style type="text/css">
<!--
a.copiable-link {visibility: hidden; text-decoration: none; line-height: 0em}
span:hover a.copiable-link {visibility: visible}
strong.def-name {font-family: monospace; font-weight: bold; font-size: larger}
-->
</style>
<link rel="stylesheet" type="text/css" href="./manual.css">


</head>

<body lang="en">
<div class="subsection-level-extent" id="Position-Parse">
<div class="nav-panel">
<p>
Next: <a href="Parser-State.html" accesskey="n" rel="next">Parser State</a>, Previous: <a href="Motion-via-Parsing.html" accesskey="p" rel="prev">Motion Commands Based on Parsing</a>, Up: <a href="Parsing-Expressions.html" accesskey="u" rel="up">Parsing Expressions</a> &nbsp; [<a href="index.html#SEC_Contents" title="Table of contents" rel="contents">Contents</a>][<a href="Index.html" title="Index" rel="index">Index</a>]</p>
</div>
<hr>
<h4 class="subsection" id="Finding-the-Parse-State-for-a-Position"><span>36.6.2 Finding the Parse State for a Position<a class="copiable-link" href="#Finding-the-Parse-State-for-a-Position"> &para;</a></span></h4>
<a class="index-entry-id" id="index-parse-state-for-a-position"></a>

<p>For syntactic analysis, such as in indentation, often the useful
thing is to compute the syntactic state corresponding to a given buffer
position.  This function does that conveniently.
</p>
<dl class="first-deffn first-defun-alias-first-deffn">
<dt class="deffn defun-alias-deffn" id="index-syntax_002dppss"><span class="category-def">Function: </span><span><strong class="def-name">syntax-ppss</strong> <var class="def-var-arguments">&amp;optional pos</var><a class="copiable-link" href="#index-syntax_002dppss"> &para;</a></span></dt>
<dd><p>This function returns the parser state that the parser would reach at
position <var class="var">pos</var> starting from the beginning of the visible portion
of the buffer.
See <a class="xref" href="Parser-State.html">Parser State</a>,
for a description of the parser state.
</p>
<p>The return value is the same as if you call the low-level parsing
function <code class="code">parse-partial-sexp</code> to parse from the beginning of the
visible portion of the buffer to <var class="var">pos</var> (see <a class="pxref" href="Low_002dLevel-Parsing.html">Low-Level Parsing</a>).  However, <code class="code">syntax-ppss</code> uses caches to speed up the
computation.  Due to this optimization, the second value (previous
complete subexpression) and sixth value (minimum parenthesis depth) in
the returned parser state are not meaningful.
</p>
<p>This function has a side effect: it adds a buffer-local entry to
<code class="code">before-change-functions</code> (see <a class="pxref" href="Change-Hooks.html">Change Hooks</a>) for
<code class="code">syntax-ppss-flush-cache</code> (see below).  This entry keeps the
cache consistent as the buffer is modified.  However, the cache might
not be updated if <code class="code">syntax-ppss</code> is called while
<code class="code">before-change-functions</code> is temporarily let-bound, or if the
buffer is modified without running the hook, such as when using
<code class="code">inhibit-modification-hooks</code>.  In those cases, it is necessary to
call <code class="code">syntax-ppss-flush-cache</code> explicitly.
</p></dd></dl>

<dl class="first-deffn first-defun-alias-first-deffn">
<dt class="deffn defun-alias-deffn" id="index-syntax_002dppss_002dflush_002dcache"><span class="category-def">Function: </span><span><strong class="def-name">syntax-ppss-flush-cache</strong> <var class="def-var-arguments">beg &amp;rest ignored-args</var><a class="copiable-link" href="#index-syntax_002dppss_002dflush_002dcache"> &para;</a></span></dt>
<dd><p>This function flushes the cache used by <code class="code">syntax-ppss</code>, starting
at position <var class="var">beg</var>.  The remaining arguments, <var class="var">ignored-args</var>,
are ignored; this function accepts them so that it can be directly
used on hooks such as <code class="code">before-change-functions</code> (see <a class="pxref" href="Change-Hooks.html">Change Hooks</a>).
</p></dd></dl>

</div>
<hr>
<div class="nav-panel">
<p>
Next: <a href="Parser-State.html">Parser State</a>, Previous: <a href="Motion-via-Parsing.html">Motion Commands Based on Parsing</a>, Up: <a href="Parsing-Expressions.html">Parsing Expressions</a> &nbsp; [<a href="index.html#SEC_Contents" title="Table of contents" rel="contents">Contents</a>][<a href="Index.html" title="Index" rel="index">Index</a>]</p>
</div>



</body>
</html>
