<!DOCTYPE html>
<html>
<!-- Created by GNU Texinfo 7.1, https://www.gnu.org/software/texinfo/ -->
<head>
<meta http-equiv="Content-Type" content="text/html; charset=utf-8">
<!-- This is the GNU Emacs Lisp Reference Manual
corresponding to Emacs version 29.4.

Copyright Â© 1990-1996, 1998-2024 Free Software Foundation,
Inc.

Permission is granted to copy, distribute and/or modify this document
under the terms of the GNU Free Documentation License, Version 1.3 or
any later version published by the Free Software Foundation; with the
Invariant Sections being "GNU General Public License," with the
Front-Cover Texts being "A GNU Manual," and with the Back-Cover
Texts as in (a) below.  A copy of the license is included in the
section entitled "GNU Free Documentation License."

(a) The FSF's Back-Cover Text is: "You have the freedom to copy and
modify this GNU manual.  Buying copies from the FSF supports it in
developing GNU and promoting software freedom." -->
<title>Low-Level Key Binding (GNU Emacs Lisp Reference Manual)</title>

<meta name="description" content="Low-Level Key Binding (GNU Emacs Lisp Reference Manual)">
<meta name="keywords" content="Low-Level Key Binding (GNU Emacs Lisp Reference Manual)">
<meta name="resource-type" content="document">
<meta name="distribution" content="global">
<meta name="Generator" content="makeinfo">
<meta name="viewport" content="width=device-width,initial-scale=1">

<link href="index.html" rel="start" title="Top">
<link href="Index.html" rel="index" title="Index">
<link href="index.html#SEC_Contents" rel="contents" title="Table of Contents">
<link href="Keymaps.html" rel="up" title="Keymaps">
<link href="Remapping-Commands.html" rel="next" title="Remapping Commands">
<link href="Changing-Key-Bindings.html" rel="prev" title="Changing Key Bindings">
<style type="text/css">
<!--
a.copiable-link {visibility: hidden; text-decoration: none; line-height: 0em}
div.example {margin-left: 3.2em}
kbd.kbd {font-style: oblique}
kbd.key {font-style: normal}
span:hover a.copiable-link {visibility: visible}
strong.def-name {font-family: monospace; font-weight: bold; font-size: larger}
-->
</style>
<link rel="stylesheet" type="text/css" href="./manual.css">


</head>

<body lang="en">
<div class="section-level-extent" id="Low_002dLevel-Key-Binding">
<div class="nav-panel">
<p>
Next: <a href="Remapping-Commands.html" accesskey="n" rel="next">Remapping Commands</a>, Previous: <a href="Changing-Key-Bindings.html" accesskey="p" rel="prev">Changing Key Bindings</a>, Up: <a href="Keymaps.html" accesskey="u" rel="up">Keymaps</a> &nbsp; [<a href="index.html#SEC_Contents" title="Table of contents" rel="contents">Contents</a>][<a href="Index.html" title="Index" rel="index">Index</a>]</p>
</div>
<hr>
<h3 class="section" id="Low_002dLevel-Key-Binding-1"><span>23.13 Low-Level Key Binding<a class="copiable-link" href="#Low_002dLevel-Key-Binding-1"> &para;</a></span></h3>
<a class="index-entry-id" id="index-low_002dlevel-key-bindings"></a>

<p>Historically, Emacs has supported a number of different syntaxes for
defining keys.  The documented way to bind a key today is to use the
syntax supported by <code class="code">key-valid-p</code>, which is what all the
functions like <code class="code">keymap-set</code> and <code class="code">keymap-lookup</code> supports.
This section documents the old-style syntax and interface functions;
they should not be used in new code.
</p>
<a class="index-entry-id" id="index-meta-character-key-constants"></a>
<a class="index-entry-id" id="index-control-character-key-constants"></a>
<p><code class="code">define-key</code> (and other low-level functions that are used to
rebind keys) understand a number of different syntaxes for the keys.
</p>
<dl class="table">
<dt>A vector containing lists of keys.</dt>
<dd><p>You can use a list containing modifier names plus one base event (a
character or function key name).  For example, <code class="code">[(control ?a)
(meta b)]</code> is equivalent to <kbd class="kbd">C-a M-b</kbd> and <code class="code">[(hyper control
left)]</code> is equivalent to <kbd class="kbd">C-H-left</kbd>.
</p>
</dd>
<dt>A string of characters with modifiers</dt>
<dd><p>Internally, key sequences are often represented as strings using the
special escape sequences for shift, control and meta modifiers
(see <a class="pxref" href="String-Type.html">String Type</a>), but this representation can also be used by
users when rebinding keys.  A string like <code class="code">&quot;\M-x&quot;</code> is read as
containing a single <kbd class="kbd">M-x</kbd>, <code class="code">&quot;\C-f&quot;</code> is read as containing a
single <kbd class="kbd">C-f</kbd>, and <code class="code">&quot;\M-\C-x&quot;</code> and <code class="code">&quot;\C-\M-x&quot;</code> are both
read as containing a single <kbd class="kbd">C-M-x</kbd>.
</p>
</dd>
<dt>A vector of characters and key symbols</dt>
<dd><p>This is the other internal representation of key sequences.  It
supports a fuller range of modifiers than the string representation,
and also support function keys.  An example is &lsquo;<samp class="samp">[?\C-\H-x&nbsp;home]</samp>&rsquo;<!-- /@w -->, which represents the <kbd class="kbd">C-H-x&nbsp;<kbd class="key">home</kbd></kbd><!-- /@w --> key sequence.
See <a class="xref" href="Character-Type.html">Character Type</a>.
</p></dd>
</dl>

<dl class="first-deffn first-defun-alias-first-deffn">
<dt class="deffn defun-alias-deffn" id="index-define_002dkey"><span class="category-def">Function: </span><span><strong class="def-name">define-key</strong> <var class="def-var-arguments">keymap key binding &amp;optional remove</var><a class="copiable-link" href="#index-define_002dkey"> &para;</a></span></dt>
<dd><p>This function is like <code class="code">keymap-set</code> (see <a class="pxref" href="Changing-Key-Bindings.html">Changing Key Bindings</a>, but understands only the legacy key syntaxes.
</p>
<p>In addition, this function also has a <var class="var">remove</var> argument.  If it is
non-<code class="code">nil</code>, the definition will be removed.  This is almost the
same as setting the definition to <code class="code">nil</code>, but makes a difference
if the <var class="var">keymap</var> has a parent, and <var class="var">key</var> is shadowing the same
binding in the parent.  With <var class="var">remove</var>, subsequent lookups will
return the binding in the parent, whereas with a <code class="code">nil</code> definition the
lookups will return <code class="code">nil</code>.
</p></dd></dl>

<p>Here are other legacy key definition functions and commands, with the
equivalent modern function to use instead in new code.
</p>
<dl class="first-deffn">
<dt class="deffn" id="index-global_002dset_002dkey"><span class="category-def">Command: </span><span><strong class="def-name">global-set-key</strong> <var class="def-var-arguments">key binding</var><a class="copiable-link" href="#index-global_002dset_002dkey"> &para;</a></span></dt>
<dd><p>This function sets the binding of <var class="var">key</var> in the current global map
to <var class="var">binding</var>.  Use <code class="code">keymap-global-set</code> instead.
</p></dd></dl>

<dl class="first-deffn">
<dt class="deffn" id="index-global_002dunset_002dkey"><span class="category-def">Command: </span><span><strong class="def-name">global-unset-key</strong> <var class="def-var-arguments">key</var><a class="copiable-link" href="#index-global_002dunset_002dkey"> &para;</a></span></dt>
<dd><p>This function removes the binding of <var class="var">key</var> from the current
global map.  Use <code class="code">keymap-global-unset</code> instead.
</p></dd></dl>

<dl class="first-deffn">
<dt class="deffn" id="index-local_002dset_002dkey"><span class="category-def">Command: </span><span><strong class="def-name">local-set-key</strong> <var class="def-var-arguments">key binding</var><a class="copiable-link" href="#index-local_002dset_002dkey"> &para;</a></span></dt>
<dd><p>This function sets the binding of <var class="var">key</var> in the current local
keymap to <var class="var">binding</var>.  Use <code class="code">keymap-local-set</code> instead.
</p></dd></dl>

<dl class="first-deffn">
<dt class="deffn" id="index-local_002dunset_002dkey"><span class="category-def">Command: </span><span><strong class="def-name">local-unset-key</strong> <var class="def-var-arguments">key</var><a class="copiable-link" href="#index-local_002dunset_002dkey"> &para;</a></span></dt>
<dd><p>This function removes the binding of <var class="var">key</var> from the current
local map.  Use <code class="code">keymap-local-unset</code> instead.
</p></dd></dl>

<dl class="first-deffn first-defun-alias-first-deffn">
<dt class="deffn defun-alias-deffn" id="index-substitute_002dkey_002ddefinition-1"><span class="category-def">Function: </span><span><strong class="def-name">substitute-key-definition</strong> <var class="def-var-arguments">olddef newdef keymap &amp;optional oldmap</var><a class="copiable-link" href="#index-substitute_002dkey_002ddefinition-1"> &para;</a></span></dt>
<dd><p>This function replaces <var class="var">olddef</var> with <var class="var">newdef</var> for any keys in
<var class="var">keymap</var> that were bound to <var class="var">olddef</var>.  In other words,
<var class="var">olddef</var> is replaced with <var class="var">newdef</var> wherever it appears.  The
function returns <code class="code">nil</code>.  Use <code class="code">keymap-substitute</code> instead.
</p></dd></dl>

<dl class="first-deffn first-defun-alias-first-deffn">
<dt class="deffn defun-alias-deffn" id="index-define_002dkey_002dafter"><span class="category-def">Function: </span><span><strong class="def-name">define-key-after</strong> <var class="def-var-arguments">map key binding &amp;optional after</var><a class="copiable-link" href="#index-define_002dkey_002dafter"> &para;</a></span></dt>
<dd><p>Define a binding in <var class="var">map</var> for <var class="var">key</var>, with value <var class="var">binding</var>,
just like <code class="code">define-key</code>, but position the binding in <var class="var">map</var> after
the binding for the event <var class="var">after</var>.  The argument <var class="var">key</var> should be
of length one&mdash;a vector or string with just one element.  But
<var class="var">after</var> should be a single event type&mdash;a symbol or a character, not
a sequence.  The new binding goes after the binding for <var class="var">after</var>.  If
<var class="var">after</var> is <code class="code">t</code> or is omitted, then the new binding goes last, at
the end of the keymap.  However, new bindings are added before any
inherited keymap.  Use <code class="code">keymap-set-after</code> instead of this function.
</p></dd></dl>

<dl class="first-deffn first-defun-alias-first-deffn">
<dt class="deffn defun-alias-deffn" id="index-keyboard_002dtranslate"><span class="category-def">Function: </span><span><strong class="def-name">keyboard-translate</strong> <var class="def-var-arguments">from to</var><a class="copiable-link" href="#index-keyboard_002dtranslate"> &para;</a></span></dt>
<dd><p>This function modifies <code class="code">keyboard-translate-table</code> to translate
character code <var class="var">from</var> into character code <var class="var">to</var>.  It creates
the keyboard translate table if necessary.  Use <code class="code">key-translate</code>
instead.
</p></dd></dl>

<dl class="first-deffn first-defun-alias-first-deffn">
<dt class="deffn defun-alias-deffn" id="index-key_002dbinding"><span class="category-def">Function: </span><span><strong class="def-name">key-binding</strong> <var class="def-var-arguments">key &amp;optional accept-defaults no-remap position</var><a class="copiable-link" href="#index-key_002dbinding"> &para;</a></span></dt>
<dd><p>This function returns the binding for <var class="var">key</var> according to the
current active keymaps.  The result is <code class="code">nil</code> if <var class="var">key</var> is
undefined in the keymaps.  The argument <var class="var">accept-defaults</var> controls
checking for default bindings, as in <code class="code">lookup-key</code>
(see <a class="pxref" href="Functions-for-Key-Lookup.html">Functions for Key Lookup</a>).  If <var class="var">no-remap</var> is
non-<code class="code">nil</code>, <code class="code">key-binding</code> ignores command remappings
(see <a class="pxref" href="Remapping-Commands.html">Remapping Commands</a>) and returns the binding directly
specified for <var class="var">key</var>.  The optional argument <var class="var">position</var> should
be either a buffer position or an event position like the value of
<code class="code">event-start</code>; it tells the function to consult the maps
determined based on that <var class="var">position</var>.
</p>
<p>Emacs signals an error if <var class="var">key</var> is not a string or a vector.
</p>
<p>Use <code class="code">keymap-lookup</code> instead of this function.
</p></dd></dl>

<dl class="first-deffn first-defun-alias-first-deffn">
<dt class="deffn defun-alias-deffn" id="index-lookup_002dkey"><span class="category-def">Function: </span><span><strong class="def-name">lookup-key</strong> <var class="def-var-arguments">keymap key &amp;optional accept-defaults</var><a class="copiable-link" href="#index-lookup_002dkey"> &para;</a></span></dt>
<dd><p>This function returns the definition of <var class="var">key</var> in <var class="var">keymap</var>.  If
the string or vector <var class="var">key</var> is not a valid key sequence according
to the prefix keys specified in <var class="var">keymap</var>, it must be too long and
have extra events at the end that do not fit into a single key
sequence.  Then the value is a number, the number of events at the
front of <var class="var">key</var> that compose a complete key.
</p>
<p>If <var class="var">accept-defaults</var> is non-<code class="code">nil</code>, then <code class="code">lookup-key</code>
considers default bindings as well as bindings for the specific events
in <var class="var">key</var>.  Otherwise, <code class="code">lookup-key</code> reports only bindings for
the specific sequence <var class="var">key</var>, ignoring default bindings except when
you explicitly ask about them.
</p>
<p>Use <code class="code">keymap-lookup</code> instead of this function.
</p></dd></dl>

<dl class="first-deffn first-defun-alias-first-deffn">
<dt class="deffn defun-alias-deffn" id="index-local_002dkey_002dbinding"><span class="category-def">Function: </span><span><strong class="def-name">local-key-binding</strong> <var class="def-var-arguments">key &amp;optional accept-defaults</var><a class="copiable-link" href="#index-local_002dkey_002dbinding"> &para;</a></span></dt>
<dd><p>This function returns the binding for <var class="var">key</var> in the current
local keymap, or <code class="code">nil</code> if it is undefined there.
</p>
<p>The argument <var class="var">accept-defaults</var> controls checking for default bindings,
as in <code class="code">lookup-key</code> (above).
</p></dd></dl>

<dl class="first-deffn first-defun-alias-first-deffn">
<dt class="deffn defun-alias-deffn" id="index-global_002dkey_002dbinding"><span class="category-def">Function: </span><span><strong class="def-name">global-key-binding</strong> <var class="def-var-arguments">key &amp;optional accept-defaults</var><a class="copiable-link" href="#index-global_002dkey_002dbinding"> &para;</a></span></dt>
<dd><p>This function returns the binding for command <var class="var">key</var> in the
current global keymap, or <code class="code">nil</code> if it is undefined there.
</p>
<p>The argument <var class="var">accept-defaults</var> controls checking for default bindings,
as in <code class="code">lookup-key</code> (above).
</p></dd></dl>

<dl class="first-deffn first-defun-alias-first-deffn">
<dt class="deffn defun-alias-deffn" id="index-event_002dconvert_002dlist"><span class="category-def">Function: </span><span><strong class="def-name">event-convert-list</strong> <var class="def-var-arguments">list</var><a class="copiable-link" href="#index-event_002dconvert_002dlist"> &para;</a></span></dt>
<dd><p>This function converts a list of modifier names and a basic event type
to an event type which specifies all of them.  The basic event type
must be the last element of the list.  For example,
</p>
<div class="example">
<pre class="example-preformatted">(event-convert-list '(control ?a))
     &rArr; 1
(event-convert-list '(control meta ?a))
     &rArr; -134217727
(event-convert-list '(control super f1))
     &rArr; C-s-f1
</pre></div>
</dd></dl>

</div>
<hr>
<div class="nav-panel">
<p>
Next: <a href="Remapping-Commands.html">Remapping Commands</a>, Previous: <a href="Changing-Key-Bindings.html">Changing Key Bindings</a>, Up: <a href="Keymaps.html">Keymaps</a> &nbsp; [<a href="index.html#SEC_Contents" title="Table of contents" rel="contents">Contents</a>][<a href="Index.html" title="Index" rel="index">Index</a>]</p>
</div>



</body>
</html>
