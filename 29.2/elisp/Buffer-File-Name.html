<!DOCTYPE html>
<html>
<!-- Created by GNU Texinfo 7.1, https://www.gnu.org/software/texinfo/ -->
<head>
<meta http-equiv="Content-Type" content="text/html; charset=utf-8">
<!-- This is the GNU Emacs Lisp Reference Manual
corresponding to Emacs version 29.2.

Copyright Â© 1990-1996, 1998-2024 Free Software Foundation,
Inc.

Permission is granted to copy, distribute and/or modify this document
under the terms of the GNU Free Documentation License, Version 1.3 or
any later version published by the Free Software Foundation; with the
Invariant Sections being "GNU General Public License," with the
Front-Cover Texts being "A GNU Manual," and with the Back-Cover
Texts as in (a) below.  A copy of the license is included in the
section entitled "GNU Free Documentation License."

(a) The FSF's Back-Cover Text is: "You have the freedom to copy and
modify this GNU manual.  Buying copies from the FSF supports it in
developing GNU and promoting software freedom." -->
<title>Buffer File Name (GNU Emacs Lisp Reference Manual)</title>

<meta name="description" content="Buffer File Name (GNU Emacs Lisp Reference Manual)">
<meta name="keywords" content="Buffer File Name (GNU Emacs Lisp Reference Manual)">
<meta name="resource-type" content="document">
<meta name="distribution" content="global">
<meta name="Generator" content="makeinfo">
<meta name="viewport" content="width=device-width,initial-scale=1">

<link href="index.html" rel="start" title="Top">
<link href="Index.html" rel="index" title="Index">
<link href="index.html#SEC_Contents" rel="contents" title="Table of Contents">
<link href="Buffers.html" rel="up" title="Buffers">
<link href="Buffer-Modification.html" rel="next" title="Buffer Modification">
<link href="Buffer-Names.html" rel="prev" title="Buffer Names">
<style type="text/css">
<!--
a.copiable-link {visibility: hidden; text-decoration: none; line-height: 0em}
div.example {margin-left: 3.2em}
span:hover a.copiable-link {visibility: visible}
strong.def-name {font-family: monospace; font-weight: bold; font-size: larger}
-->
</style>
<link rel="stylesheet" type="text/css" href="./manual.css">


</head>

<body lang="en">
<div class="section-level-extent" id="Buffer-File-Name">
<div class="nav-panel">
<p>
Next: <a href="Buffer-Modification.html" accesskey="n" rel="next">Buffer Modification</a>, Previous: <a href="Buffer-Names.html" accesskey="p" rel="prev">Buffer Names</a>, Up: <a href="Buffers.html" accesskey="u" rel="up">Buffers</a> &nbsp; [<a href="index.html#SEC_Contents" title="Table of contents" rel="contents">Contents</a>][<a href="Index.html" title="Index" rel="index">Index</a>]</p>
</div>
<hr>
<h3 class="section" id="Buffer-File-Name-1"><span>28.4 Buffer File Name<a class="copiable-link" href="#Buffer-File-Name-1"> &para;</a></span></h3>
<a class="index-entry-id" id="index-visited-file"></a>
<a class="index-entry-id" id="index-buffer-file-name"></a>
<a class="index-entry-id" id="index-file-name-of-buffer"></a>

<p>The <em class="dfn">buffer file name</em> is the name of the file that is visited in
that buffer.  When a buffer is not visiting a file, its buffer file name
is <code class="code">nil</code>.  Most of the time, the buffer name is the same as the
nondirectory part of the buffer file name, but the buffer file name and
the buffer name are distinct and can be set independently.
See <a class="xref" href="Visiting-Files.html">Visiting Files</a>.
</p>
<dl class="first-deffn first-defun-alias-first-deffn">
<dt class="deffn defun-alias-deffn" id="index-buffer_002dfile_002dname"><span class="category-def">Function: </span><span><strong class="def-name">buffer-file-name</strong> <var class="def-var-arguments">&amp;optional buffer</var><a class="copiable-link" href="#index-buffer_002dfile_002dname"> &para;</a></span></dt>
<dd><p>This function returns the absolute file name of the file that
<var class="var">buffer</var> is visiting.  If <var class="var">buffer</var> is not visiting any file,
<code class="code">buffer-file-name</code> returns <code class="code">nil</code>.  If <var class="var">buffer</var> is not
supplied, it defaults to the current buffer.
</p>
<div class="example">
<div class="group"><pre class="example-preformatted">(buffer-file-name (other-buffer))
     &rArr; &quot;/usr/user/lewis/manual/files.texi&quot;
</pre></div></div>
</dd></dl>

<dl class="first-defvr first-defvar-alias-first-defvr">
<dt class="defvr defvar-alias-defvr" id="index-buffer_002dfile_002dname-1"><span class="category-def">Variable: </span><span><strong class="def-name">buffer-file-name</strong><a class="copiable-link" href="#index-buffer_002dfile_002dname-1"> &para;</a></span></dt>
<dd><p>This buffer-local variable contains the name of the file being visited
in the current buffer, or <code class="code">nil</code> if it is not visiting a file.  It
is a permanent local variable, unaffected by
<code class="code">kill-all-local-variables</code>.
</p>
<div class="example">
<div class="group"><pre class="example-preformatted">buffer-file-name
     &rArr; &quot;/usr/user/lewis/manual/buffers.texi&quot;
</pre></div></div>

<p>It is risky to change this variable&rsquo;s value without doing various other
things.  Normally it is better to use <code class="code">set-visited-file-name</code> (see
below); some of the things done there, such as changing the buffer name,
are not strictly necessary, but others are essential to avoid confusing
Emacs.
</p></dd></dl>

<dl class="first-defvr first-defvar-alias-first-defvr">
<dt class="defvr defvar-alias-defvr" id="index-buffer_002dfile_002dtruename"><span class="category-def">Variable: </span><span><strong class="def-name">buffer-file-truename</strong><a class="copiable-link" href="#index-buffer_002dfile_002dtruename"> &para;</a></span></dt>
<dd><p>This buffer-local variable holds the abbreviated truename of the file
visited in the current buffer, or <code class="code">nil</code> if no file is visited.
It is a permanent local, unaffected by
<code class="code">kill-all-local-variables</code>.  See <a class="xref" href="Truenames.html">Truenames</a>, and
<a class="ref" href="Directory-Names.html#abbreviate_002dfile_002dname">abbreviate-file-name</a>.
</p></dd></dl>

<dl class="first-defvr first-defvar-alias-first-defvr">
<dt class="defvr defvar-alias-defvr" id="index-buffer_002dfile_002dnumber"><span class="category-def">Variable: </span><span><strong class="def-name">buffer-file-number</strong><a class="copiable-link" href="#index-buffer_002dfile_002dnumber"> &para;</a></span></dt>
<dd><p>This buffer-local variable holds the inode number and device
identifier of the file visited in the current buffer, or <code class="code">nil</code> if no
file or a nonexistent file is visited.  It is a permanent local,
unaffected by <code class="code">kill-all-local-variables</code>.
</p>
<p>The value is normally a list of the form <code class="code">(<var class="var">inodenum</var>
<var class="var">device</var>)</code>.  This tuple uniquely identifies the file among
all files accessible on the system.  See the function
<code class="code">file-attributes</code>, in <a class="ref" href="File-Attributes.html">File Attributes</a>, for more information
about them.
</p>
<p>If <code class="code">buffer-file-name</code> is the name of a symbolic link, then both
<var class="var">inodenum</var> and <var class="var">device</var> refer to the recursive target of the link.
</p></dd></dl>

<dl class="first-deffn first-defun-alias-first-deffn">
<dt class="deffn defun-alias-deffn" id="index-get_002dfile_002dbuffer"><span class="category-def">Function: </span><span><strong class="def-name">get-file-buffer</strong> <var class="def-var-arguments">filename</var><a class="copiable-link" href="#index-get_002dfile_002dbuffer"> &para;</a></span></dt>
<dd><p>This function returns the buffer visiting file <var class="var">filename</var>.  If
there is no such buffer, it returns <code class="code">nil</code>.  The argument
<var class="var">filename</var>, which must be a string, is expanded (see <a class="pxref" href="File-Name-Expansion.html">Functions that Expand Filenames</a>), then compared against the visited file names of all live
buffers.  Note that the buffer&rsquo;s <code class="code">buffer-file-name</code> must match
the expansion of <var class="var">filename</var> exactly.  This function will not
recognize other names for the same file.
</p>
<div class="example">
<div class="group"><pre class="example-preformatted">(get-file-buffer &quot;buffers.texi&quot;)
    &rArr; #&lt;buffer buffers.texi&gt;
</pre></div></div>

<p>In unusual circumstances, there can be more than one buffer visiting
the same file name.  In such cases, this function returns the first
such buffer in the buffer list.
</p></dd></dl>

<dl class="first-deffn first-defun-alias-first-deffn">
<dt class="deffn defun-alias-deffn" id="index-find_002dbuffer_002dvisiting"><span class="category-def">Function: </span><span><strong class="def-name">find-buffer-visiting</strong> <var class="def-var-arguments">filename &amp;optional predicate</var><a class="copiable-link" href="#index-find_002dbuffer_002dvisiting"> &para;</a></span></dt>
<dd><p>This is like <code class="code">get-file-buffer</code>, except that it can return any
buffer visiting the file <em class="emph">possibly under a different name</em>.  That
is, the buffer&rsquo;s <code class="code">buffer-file-name</code> does not need to match the
expansion of <var class="var">filename</var> exactly, it only needs to refer to the
same file.  If <var class="var">predicate</var> is non-<code class="code">nil</code>, it should be a
function of one argument, a buffer visiting <var class="var">filename</var>.  The
buffer is only considered a suitable return value if <var class="var">predicate</var>
returns non-<code class="code">nil</code>.  If it can not find a suitable buffer to
return, <code class="code">find-buffer-visiting</code> returns <code class="code">nil</code>.
</p></dd></dl>

<dl class="first-deffn">
<dt class="deffn" id="index-set_002dvisited_002dfile_002dname"><span class="category-def">Command: </span><span><strong class="def-name">set-visited-file-name</strong> <var class="def-var-arguments">filename &amp;optional no-query along-with-file</var><a class="copiable-link" href="#index-set_002dvisited_002dfile_002dname"> &para;</a></span></dt>
<dd><p>If <var class="var">filename</var> is a non-empty string, this function changes the
name of the file visited in the current buffer to <var class="var">filename</var>.  (If the
buffer had no visited file, this gives it one.)  The <em class="emph">next time</em>
the buffer is saved it will go in the newly-specified file.
</p>
<p>This command marks the buffer as modified, since it does not (as far
as Emacs knows) match the contents of <var class="var">filename</var>, even if it
matched the former visited file.  It also renames the buffer to
correspond to the new file name, unless the new name is already in
use.
</p>
<p>If <var class="var">filename</var> is <code class="code">nil</code> or the empty string, that stands for
&ldquo;no visited file&rdquo;.  In this case, <code class="code">set-visited-file-name</code> marks
the buffer as having no visited file, without changing the buffer&rsquo;s
modified flag.
</p>
<p>Normally, this function asks the user for confirmation if there
already is a buffer visiting <var class="var">filename</var>.  If <var class="var">no-query</var> is
non-<code class="code">nil</code>, that prevents asking this question.  If there already
is a buffer visiting <var class="var">filename</var>, and the user confirms or
<var class="var">no-query</var> is non-<code class="code">nil</code>, this function makes the new
buffer name unique by appending a number inside of &lsquo;<samp class="samp">&lt;&hellip;&gt;</samp>&rsquo; to
<var class="var">filename</var>.
</p>
<p>If <var class="var">along-with-file</var> is non-<code class="code">nil</code>, that means to assume that
the former visited file has been renamed to <var class="var">filename</var>.  In this
case, the command does not change the buffer&rsquo;s modified flag, nor the
buffer&rsquo;s recorded last file modification time as reported by
<code class="code">visited-file-modtime</code> (see <a class="pxref" href="Modification-Time.html">Buffer Modification Time</a>).  If
<var class="var">along-with-file</var> is <code class="code">nil</code>, this function clears the recorded
last file modification time, after which <code class="code">visited-file-modtime</code>
returns zero.
</p>
<p>When the function <code class="code">set-visited-file-name</code> is called
interactively, it prompts for <var class="var">filename</var> in the minibuffer.
</p></dd></dl>

<dl class="first-defvr first-defvar-alias-first-defvr">
<dt class="defvr defvar-alias-defvr" id="index-list_002dbuffers_002ddirectory"><span class="category-def">Variable: </span><span><strong class="def-name">list-buffers-directory</strong><a class="copiable-link" href="#index-list_002dbuffers_002ddirectory"> &para;</a></span></dt>
<dd><p>This buffer-local variable specifies a string to display in a buffer
listing where the visited file name would go, for buffers that don&rsquo;t
have a visited file name.  Dired buffers use this variable.
</p></dd></dl>

</div>
<hr>
<div class="nav-panel">
<p>
Next: <a href="Buffer-Modification.html">Buffer Modification</a>, Previous: <a href="Buffer-Names.html">Buffer Names</a>, Up: <a href="Buffers.html">Buffers</a> &nbsp; [<a href="index.html#SEC_Contents" title="Table of contents" rel="contents">Contents</a>][<a href="Index.html" title="Index" rel="index">Index</a>]</p>
</div>



</body>
</html>
