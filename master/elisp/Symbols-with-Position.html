<!DOCTYPE html>
<html>
<!-- Created by GNU Texinfo 7.1, https://www.gnu.org/software/texinfo/ -->
<head>
<meta http-equiv="Content-Type" content="text/html; charset=utf-8">
<!-- This is the GNU Emacs Lisp Reference Manual
corresponding to Emacs version 31.0.50.

Copyright Â© 1990-1996, 1998-2026 Free Software Foundation,
Inc.

Permission is granted to copy, distribute and/or modify this document
under the terms of the GNU Free Documentation License, Version 1.3 or
any later version published by the Free Software Foundation; with the
Invariant Sections being "GNU General Public License," with the
Front-Cover Texts being "A GNU Manual," and with the Back-Cover
Texts as in (a) below.  A copy of the license is included in the
section entitled "GNU Free Documentation License."

(a) The FSF's Back-Cover Text is: "You have the freedom to copy and
modify this GNU manual.  Buying copies from the FSF supports it in
developing GNU and promoting software freedom." -->
<title>Symbols with Position (GNU Emacs Lisp Reference Manual)</title>

<meta name="description" content="Symbols with Position (GNU Emacs Lisp Reference Manual)">
<meta name="keywords" content="Symbols with Position (GNU Emacs Lisp Reference Manual)">
<meta name="resource-type" content="document">
<meta name="distribution" content="global">
<meta name="Generator" content="makeinfo">
<meta name="viewport" content="width=device-width,initial-scale=1">

<link href="index.html" rel="start" title="Top">
<link href="Index.html" rel="index" title="Index">
<link href="index.html#SEC_Contents" rel="contents" title="Table of Contents">
<link href="Symbols.html" rel="up" title="Symbols">
<link href="Shorthands.html" rel="prev" title="Shorthands">
<style type="text/css">
<!--
a.copiable-link {visibility: hidden; text-decoration: none; line-height: 0em}
span:hover a.copiable-link {visibility: visible}
strong.def-name {font-family: monospace; font-weight: bold; font-size: larger}
-->
</style>
<link rel="stylesheet" type="text/css" href="./manual.css">


</head>

<body lang="en">
<div class="section-level-extent" id="Symbols-with-Position">
<div class="nav-panel">
<p>
Previous: <a href="Shorthands.html" accesskey="p" rel="prev">Shorthands</a>, Up: <a href="Symbols.html" accesskey="u" rel="up">Symbols</a> &nbsp; [<a href="index.html#SEC_Contents" title="Table of contents" rel="contents">Contents</a>][<a href="Index.html" title="Index" rel="index">Index</a>]</p>
</div>
<hr>
<h3 class="section" id="Symbols-with-Position-1"><span>9.6 Symbols with Position<a class="copiable-link" href="#Symbols-with-Position-1"> &para;</a></span></h3>
<a class="index-entry-id" id="index-symbol-with-position"></a>

<a class="index-entry-id" id="index-bare-symbol"></a>
<p>A <em class="dfn">symbol with position</em> is a symbol, called the <em class="dfn">bare symbol</em>,
together with a nonnegative fixnum called the <em class="dfn">position</em>.
Even though a symbol with position often acts like its bare symbol,
it is not a symbol: instead, it is an object that has both a bare symbol
and a position.  Because symbols with position are not symbols,
they don&rsquo;t have entries in the obarray, though their bare symbols
typically do (see <a class="pxref" href="Creating-Symbols.html">Creating and Interning Symbols</a>).
</p>
<p>The byte compiler uses symbols with position,
records in them the position of each symbol occurrence, and uses those
positions in warning and error messages.  They shouldn&rsquo;t normally be
used otherwise.  Doing so can cause unexpected results with basic
Emacs functions such as <code class="code">eq</code> and <code class="code">equal</code>.
</p>
<p>The printed representation of a symbol with position uses the hash
notation outlined in <a class="ref" href="Printed-Representation.html">Printed Representation and Read Syntax</a>.  It looks like
&lsquo;<samp class="samp">#&lt;symbol foo at 12345&gt;</samp>&rsquo;.  It has no read syntax.  You can cause
just the bare symbol to be printed by binding the variable
<code class="code">print-symbols-bare</code> to non-<code class="code">nil</code> around the print
operation.  The byte compiler does this before writing its output to
the compiled Lisp file.
</p>
<p>When the flag variable <code class="code">symbols-with-pos-enabled</code> is non-<code class="code">nil</code>,
a symbol with position ordinarily behaves like its bare symbol.
For example, &lsquo;<samp class="samp">(eq (position-symbol 'foo 12345) 'foo)</samp>&rsquo; yields <code class="code">t</code>,
and <code class="code">equal</code> likewise treats a symbol with position as its bare symbol.
</p>
<p>When <code class="code">symbols-with-pos-enabled</code> is <code class="code">nil</code>, symbols with
position behave as themselves, not as symbols.  For example, &lsquo;<samp class="samp">(eq
(position-symbol 'foo 12345) 'foo)</samp>&rsquo; yields <code class="code">nil</code>, and <code class="code">equal</code>
likewise treats a symbol with position as not equal to its bare symbol.
</p>
<p>Most of the time in Emacs <code class="code">symbols-with-pos-enabled</code> is
<code class="code">nil</code>, but the byte compiler and the native compiler bind it to
<code class="code">t</code> when they run and Emacs runs a little more slowly in this case.
</p>
<p>Typically, symbols with position are created by the byte compiler
calling the reader function <code class="code">read-positioning-symbols</code>
(see <a class="pxref" href="Input-Functions.html">Input Functions</a>).  One can also be created with the function
<code class="code">position-symbol</code>.
</p>
<dl class="first-defvr first-defvar-alias-first-defvr">
<dt class="defvr defvar-alias-defvr" id="index-symbols_002dwith_002dpos_002denabled"><span class="category-def">Variable: </span><span><strong class="def-name">symbols-with-pos-enabled</strong><a class="copiable-link" href="#index-symbols_002dwith_002dpos_002denabled"> &para;</a></span></dt>
<dd><p>This variable affects the behavior of symbols with position when they
are not being printed and are not arguments to one of the functions
defined later in this section.  When this variable is non-<code class="code">nil</code>,
such a symbol with position behaves like its bare symbol; otherwise it
behaves as itself, not as a symbol.
</p></dd></dl>

<dl class="first-defvr first-defvar-alias-first-defvr">
<dt class="defvr defvar-alias-defvr" id="index-print_002dsymbols_002dbare"><span class="category-def">Variable: </span><span><strong class="def-name">print-symbols-bare</strong><a class="copiable-link" href="#index-print_002dsymbols_002dbare"> &para;</a></span></dt>
<dd><p>When bound to non-<code class="code">nil</code>, the Lisp printer prints only the bare
symbol of a symbol with position, ignoring the position.
Otherwise a symbol with position prints as itself, not as a symbol.
</p></dd></dl>

<dl class="first-deffn first-defun-alias-first-deffn">
<dt class="deffn defun-alias-deffn" id="index-symbol_002dwith_002dpos_002dp"><span class="category-def">Function: </span><span><strong class="def-name">symbol-with-pos-p</strong> <var class="def-var-arguments">object</var><a class="copiable-link" href="#index-symbol_002dwith_002dpos_002dp"> &para;</a></span></dt>
<dd><p>This function returns <code class="code">t</code> if <var class="var">object</var> is a symbol with
position, <code class="code">nil</code> otherwise.
Unlike <code class="code">symbolp</code>, this function ignores <code class="code">symbols-with-pos-enabled</code>.
</p></dd></dl>

<dl class="first-deffn first-defun-alias-first-deffn">
<dt class="deffn defun-alias-deffn" id="index-bare_002dsymbol"><span class="category-def">Function: </span><span><strong class="def-name">bare-symbol</strong> <var class="def-var-arguments">sym</var><a class="copiable-link" href="#index-bare_002dsymbol"> &para;</a></span></dt>
<dd><p>This function returns the bare symbol of the symbol with
position <var class="var">sym</var>, or <var class="var">sym</var> itself if it is already a symbol.
For any other type of object, it signals an error.
This function ignores <code class="code">symbols-with-pos-enabled</code>.
</p></dd></dl>

<dl class="first-deffn first-defun-alias-first-deffn">
<dt class="deffn defun-alias-deffn" id="index-symbol_002dwith_002dpos_002dpos"><span class="category-def">Function: </span><span><strong class="def-name">symbol-with-pos-pos</strong> <var class="def-var-arguments">sympos</var><a class="copiable-link" href="#index-symbol_002dwith_002dpos_002dpos"> &para;</a></span></dt>
<dd><p>This function returns the position, a nonnegative fixnum, from the symbol with
position <var class="var">sympos</var>.  For any other type of object, it signals an error.
This function ignores <code class="code">symbols-with-pos-enabled</code>.
</p></dd></dl>

<dl class="first-deffn first-defun-alias-first-deffn">
<dt class="deffn defun-alias-deffn" id="index-position_002dsymbol"><span class="category-def">Function: </span><span><strong class="def-name">position-symbol</strong> <var class="def-var-arguments">sym pos</var><a class="copiable-link" href="#index-position_002dsymbol"> &para;</a></span></dt>
<dd><p>Make a new symbol with position.  The new object&rsquo;s bare symbol is taken
from <var class="var">sym</var>, which is either a symbol, or a symbol with position
whose bare symbol is used.  The new object&rsquo;s position is taken from
<var class="var">pos</var>, which is either a nonnegative fixnum, or a symbol with
position whose position is used.
Emacs signals an error if either argument is invalid.
This function ignores <code class="code">symbols-with-pos-enabled</code>.
</p></dd></dl>
</div>
<hr>
<div class="nav-panel">
<p>
Previous: <a href="Shorthands.html">Shorthands</a>, Up: <a href="Symbols.html">Symbols</a> &nbsp; [<a href="index.html#SEC_Contents" title="Table of contents" rel="contents">Contents</a>][<a href="Index.html" title="Index" rel="index">Index</a>]</p>
</div>



</body>
</html>
