<!DOCTYPE html>
<html>
<!-- Created by GNU Texinfo 7.1, https://www.gnu.org/software/texinfo/ -->
<head>
<meta http-equiv="Content-Type" content="text/html; charset=utf-8">
<!-- This is the GNU Emacs Lisp Reference Manual
corresponding to Emacs version 31.0.50.

Copyright Â© 1990-1996, 1998-2026 Free Software Foundation,
Inc.

Permission is granted to copy, distribute and/or modify this document
under the terms of the GNU Free Documentation License, Version 1.3 or
any later version published by the Free Software Foundation; with the
Invariant Sections being "GNU General Public License," with the
Front-Cover Texts being "A GNU Manual," and with the Back-Cover
Texts as in (a) below.  A copy of the license is included in the
section entitled "GNU Free Documentation License."

(a) The FSF's Back-Cover Text is: "You have the freedom to copy and
modify this GNU manual.  Buying copies from the FSF supports it in
developing GNU and promoting software freedom." -->
<title>Mode Line Data (GNU Emacs Lisp Reference Manual)</title>

<meta name="description" content="Mode Line Data (GNU Emacs Lisp Reference Manual)">
<meta name="keywords" content="Mode Line Data (GNU Emacs Lisp Reference Manual)">
<meta name="resource-type" content="document">
<meta name="distribution" content="global">
<meta name="Generator" content="makeinfo">
<meta name="viewport" content="width=device-width,initial-scale=1">

<link href="index.html" rel="start" title="Top">
<link href="Index.html" rel="index" title="Index">
<link href="index.html#SEC_Contents" rel="contents" title="Table of Contents">
<link href="Mode-Line-Format.html" rel="up" title="Mode Line Format">
<link href="Mode-Line-Top.html" rel="next" title="Mode Line Top">
<link href="Mode-Line-Basics.html" rel="prev" title="Mode Line Basics">
<style type="text/css">
<!--
a.copiable-link {visibility: hidden; text-decoration: none; line-height: 0em}
span:hover a.copiable-link {visibility: visible}
-->
</style>
<link rel="stylesheet" type="text/css" href="./manual.css">


</head>

<body lang="en">
<div class="subsection-level-extent" id="Mode-Line-Data">
<div class="nav-panel">
<p>
Next: <a href="Mode-Line-Top.html" accesskey="n" rel="next">The Top Level of Mode Line Control</a>, Previous: <a href="Mode-Line-Basics.html" accesskey="p" rel="prev">Mode Line Basics</a>, Up: <a href="Mode-Line-Format.html" accesskey="u" rel="up">Mode Line Format</a> &nbsp; [<a href="index.html#SEC_Contents" title="Table of contents" rel="contents">Contents</a>][<a href="Index.html" title="Index" rel="index">Index</a>]</p>
</div>
<hr>
<h4 class="subsection" id="The-Data-Structure-of-the-Mode-Line"><span>24.4.2 The Data Structure of the Mode Line<a class="copiable-link" href="#The-Data-Structure-of-the-Mode-Line"> &para;</a></span></h4>
<a class="index-entry-id" id="index-mode-line-construct"></a>

<p>The mode line contents are controlled by a data structure called a
<em class="dfn">mode line construct</em>, made up of lists, strings, symbols, and
numbers kept in buffer-local variables.  Each data type has a specific
meaning for the mode line appearance, as described below.  The same data
structure is used for constructing frame titles (see <a class="pxref" href="Frame-Titles.html">Frame Titles</a>),
header lines (see <a class="pxref" href="Header-Lines.html">Window Header Lines</a>), and tab lines (see <a class="pxref" href="Tab-Lines.html">Window Tab Lines</a>).
</p>
<p>A mode line construct may be as simple as a fixed string of text,
but it usually specifies how to combine fixed strings with variables&rsquo;
values to construct the text.  Many of these variables are themselves
defined to have mode line constructs as their values.
</p>
<p>Here are the meanings of various data types as mode line constructs:
</p>
<dl class="table">
<dt><a id="index-percent-symbol-in-mode-line"></a><span><code class="code"><var class="var">string</var></code><a class="copiable-link" href="#index-percent-symbol-in-mode-line"> &para;</a></span></dt>
<dd><p>A string as a mode line construct appears verbatim except for
<em class="dfn"><code class="code">%</code>-constructs</em> in it.  These stand for substitution of
other data; see <a class="ref" href="_0025_002dConstructs.html"><code class="code">%</code>-Constructs in the Mode Line</a>.
</p>
<p>If parts of the string have <code class="code">face</code> properties, they control
display of the text just as they would text in the buffer.  Any
characters which have no <code class="code">face</code> properties are displayed, by
default, in the face <code class="code">mode-line</code> or <code class="code">mode-line-inactive</code>
(see <a data-manual="emacs" href="https://www.gnu.org/software/emacs/manual/html_node/emacs/Standard-Faces.html#Standard-Faces">Standard Faces</a> in <cite class="cite">The GNU Emacs Manual</cite>).  The
<code class="code">help-echo</code> and <code class="code">keymap</code> properties in <var class="var">string</var> have
special meanings.  See <a class="xref" href="Properties-in-Mode.html">Properties in the Mode Line</a>.
</p>
</dd>
<dt><code class="code"><var class="var">symbol</var></code></dt>
<dd><p>A symbol as a mode line construct stands for its value.  The value of
<var class="var">symbol</var> is used as a mode line construct, in place of <var class="var">symbol</var>.
However, the symbols <code class="code">t</code> and <code class="code">nil</code> are ignored, as is any
symbol whose value is void.
</p>
<p>There is one exception: if the value of <var class="var">symbol</var> is a string, it is
displayed verbatim: the <code class="code">%</code>-constructs are not recognized.
</p>
<p>Unless <var class="var">symbol</var> is marked as risky (i.e., it has a
non-<code class="code">nil</code> <code class="code">risky-local-variable</code> property), all text
properties specified in <var class="var">symbol</var>&rsquo;s value are ignored.  This includes
the text properties of strings in <var class="var">symbol</var>&rsquo;s value, as well as all
<code class="code">:eval</code> and <code class="code">:propertize</code> forms in it.  (The reason for this
is security: non-risky variables could be set automatically from file
variables without prompting the user.)
</p>
</dd>
<dt><code class="code">(<var class="var">string</var> <var class="var">rest</var>&hellip;)</code></dt>
<dt><code class="code">(<var class="var">list</var> <var class="var">rest</var>&hellip;)</code></dt>
<dd><p>A list whose first element is a string or list means to process all
the elements recursively and concatenate the results.  This is the
most common form of mode line construct.  (Note that text properties
are handled specially (for reasons of efficiency) when displaying
strings in the mode line: Only the text property on the first
character of the string are considered, and they are then used over
the entire string.  If you need a string with different text
properties, you have to use the special <code class="code">:propertize</code> mode line
construct.)
</p>
</dd>
<dt><code class="code">(:eval <var class="var">form</var>)</code></dt>
<dd><p>A list whose first element is the symbol <code class="code">:eval</code> says to evaluate
<var class="var">form</var>, and use the result as a string to display.  Make sure this
evaluation neither loads any files nor calls functions like
<code class="code">posn-at-point</code> or <code class="code">window-in-direction</code>, which themselves
evaluate the mode line, as doing so could cause infinite recursion.
</p>
</dd>
<dt><code class="code">(:propertize <var class="var">elt</var> <var class="var">props</var>&hellip;)</code></dt>
<dd><p>A list whose first element is the symbol <code class="code">:propertize</code> says to
process the mode line construct <var class="var">elt</var> recursively, then add the
text properties specified by <var class="var">props</var> to the result.  The argument
<var class="var">props</var> should consist of zero or more pairs <var class="var">text-property</var>
<var class="var">value</var>.  If <var class="var">elt</var> is or produces a string with text
properties, all the characters of that string should have the same
properties, or else some of them might be removed by
<code class="code">:propertize</code>.
</p>
</dd>
<dt><code class="code">(<var class="var">symbol</var> <var class="var">then</var> <var class="var">else</var>)</code></dt>
<dd><p>A list whose first element is a symbol that is not a keyword specifies
a conditional.  Its meaning depends on the value of <var class="var">symbol</var>.  If
<var class="var">symbol</var> has a non-<code class="code">nil</code> value, the second element,
<var class="var">then</var>, is processed recursively as a mode line construct.
Otherwise, the third element, <var class="var">else</var>, is processed recursively.
You may omit <var class="var">else</var>; then the mode line construct displays nothing
if the value of <var class="var">symbol</var> is <code class="code">nil</code> or void.
</p>
</dd>
<dt><code class="code">(<var class="var">width</var> <var class="var">rest</var>&hellip;)</code></dt>
<dd><p>A list whose first element is an integer specifies truncation or
padding of the results of <var class="var">rest</var>.  The remaining elements
<var class="var">rest</var> are processed recursively as mode line constructs and
concatenated together.  When <var class="var">width</var> is positive, the result is
space filled on the right if its width is less than <var class="var">width</var>.  When
<var class="var">width</var> is negative, the result is truncated on the right to
&minus;<var class="var">width</var> columns if its width exceeds &minus;<var class="var">width</var>.
</p>
<p>For example, the usual way to show what percentage of a buffer is above
the top of the window is to use a list like this: <code class="code">(-3&nbsp;&quot;%p&quot;)</code><!-- /@w -->.
</p></dd>
</dl>

</div>
<hr>
<div class="nav-panel">
<p>
Next: <a href="Mode-Line-Top.html">The Top Level of Mode Line Control</a>, Previous: <a href="Mode-Line-Basics.html">Mode Line Basics</a>, Up: <a href="Mode-Line-Format.html">Mode Line Format</a> &nbsp; [<a href="index.html#SEC_Contents" title="Table of contents" rel="contents">Contents</a>][<a href="Index.html" title="Index" rel="index">Index</a>]</p>
</div>



</body>
</html>
