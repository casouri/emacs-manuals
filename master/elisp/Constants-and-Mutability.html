<!DOCTYPE html PUBLIC "-//W3C//DTD HTML 4.01 Transitional//EN" "http://www.w3.org/TR/html4/loose.dtd">
<html>
<!-- This is the GNU Emacs Lisp Reference Manual
corresponding to Emacs version 28.0.50.

Copyright Â© 1990-1996, 1998-2020 Free Software Foundation,
Inc.

Permission is granted to copy, distribute and/or modify this document
under the terms of the GNU Free Documentation License, Version 1.3 or
any later version published by the Free Software Foundation; with the
Invariant Sections being "GNU General Public License," with the
Front-Cover Texts being "A GNU Manual," and with the Back-Cover
Texts as in (a) below.  A copy of the license is included in the
section entitled "GNU Free Documentation License."

(a) The FSF's Back-Cover Text is: "You have the freedom to copy and
modify this GNU manual.  Buying copies from the FSF supports it in
developing GNU and promoting software freedom." -->
<!-- Created by GNU Texinfo 6.5, http://www.gnu.org/software/texinfo/ -->
<head>
<meta http-equiv="Content-Type" content="text/html; charset=utf-8">
<title>Constants and Mutability (GNU Emacs Lisp Reference Manual)</title>

<meta name="description" content="Constants and Mutability (GNU Emacs Lisp Reference Manual)">
<meta name="keywords" content="Constants and Mutability (GNU Emacs Lisp Reference Manual)">
<meta name="resource-type" content="document">
<meta name="distribution" content="global">
<meta name="Generator" content="makeinfo">
<link href="index.html#Top" rel="start" title="Top">
<link href="Index.html#Index" rel="index" title="Index">
<link href="index.html#SEC_Contents" rel="contents" title="Table of Contents">
<link href="Lisp-Data-Types.html#Lisp-Data-Types" rel="up" title="Lisp Data Types">
<link href="Numbers.html#Numbers" rel="next" title="Numbers">
<link href="Equality-Predicates.html#Equality-Predicates" rel="prev" title="Equality Predicates">
<style type="text/css">
<!--
a.summary-letter {text-decoration: none}
blockquote.indentedblock {margin-right: 0em}
blockquote.smallindentedblock {margin-right: 0em; font-size: smaller}
blockquote.smallquotation {font-size: smaller}
div.display {margin-left: 3.2em}
div.example {margin-left: 3.2em}
div.lisp {margin-left: 3.2em}
div.smalldisplay {margin-left: 3.2em}
div.smallexample {margin-left: 3.2em}
div.smalllisp {margin-left: 3.2em}
kbd {font-style: oblique}
pre.display {font-family: inherit}
pre.format {font-family: inherit}
pre.menu-comment {font-family: serif}
pre.menu-preformatted {font-family: serif}
pre.smalldisplay {font-family: inherit; font-size: smaller}
pre.smallexample {font-size: smaller}
pre.smallformat {font-family: inherit; font-size: smaller}
pre.smalllisp {font-size: smaller}
span.nolinebreak {white-space: nowrap}
span.roman {font-family: initial; font-weight: normal}
span.sansserif {font-family: sans-serif; font-weight: normal}
ul.no-bullet {list-style: none}
-->
</style>
<link rel="stylesheet" type="text/css" href="./manual.css">


</head>

<body lang="en">
<a name="Constants-and-Mutability"></a>
<div class="header">
<p>
Previous: <a href="Equality-Predicates.html#Equality-Predicates" accesskey="p" rel="prev">Equality Predicates</a>, Up: <a href="Lisp-Data-Types.html#Lisp-Data-Types" accesskey="u" rel="up">Lisp Data Types</a> &nbsp; [<a href="index.html#SEC_Contents" title="Table of contents" rel="contents">Contents</a>][<a href="Index.html#Index" title="Index" rel="index">Index</a>]</p>
</div>
<hr>
<a name="Constants-and-Mutability-1"></a>
<h3 class="section">2.9 Constants and Mutability</h3>
<a name="index-constants"></a>
<a name="index-mutable-objects"></a>

<p>Some Lisp objects are constant: their values should never change
during a single execution of Emacs running well-behaved Lisp code.
For example, you can create a new integer by calculating one, but you
cannot modify the value of an existing integer.
</p>
<p>Other Lisp objects are mutable: it is safe to change their values
via destructive operations involving side effects.  For example, an
existing marker can be changed by moving the marker to point to
somewhere else.
</p>
<p>Although all numbers are constants and all markers are
mutable, some types contain both constant and mutable members.  These
types include conses, vectors, strings, and symbols.  For example, the string
literal <code>&quot;aaa&quot;</code> yields a constant string, whereas the function
call <code>(make-string 3 ?a)</code> yields a mutable string that can be
changed via later calls to <code>aset</code>.
</p>
<p>A mutable object can become constant if it is part of an expression
that is evaluated.  The reverse does not occur: constant objects
should stay constant.
</p>
<p>Trying to modify a constant variable signals an error
(see <a href="Constant-Variables.html#Constant-Variables">Constant Variables</a>).
A program should not attempt to modify other types of constants because the
resulting behavior is undefined: the Lisp interpreter might or might
not detect the error, and if it does not detect the error the
interpreter can behave unpredictably thereafter.  Another way to put
this is that although mutable objects are safe to change and constant
variables reliably prevent attempts to change them, other constants
are not safely mutable: if a misbehaving program tries to change such a
constant then the constant&rsquo;s value might actually change, or the
program might crash or worse.  This problem occurs
with types that have both constant and mutable members, and that have
mutators like <code>setcar</code> and <code>aset</code> that are valid on mutable
objects but hazardous on constants.
</p>
<p>When the same constant occurs multiple times in a program, the Lisp
interpreter might save time or space by reusing existing constants or
constant components.  For example, <code>(eq &quot;abc&quot; &quot;abc&quot;)</code> returns
<code>t</code> if the interpreter creates only one instance of the string
constant <code>&quot;abc&quot;</code>, and returns <code>nil</code> if it creates two
instances.  Lisp programs should be written so that they work
regardless of whether this optimization is in use.
</p><hr>
<div class="header">
<p>
Previous: <a href="Equality-Predicates.html#Equality-Predicates" accesskey="p" rel="prev">Equality Predicates</a>, Up: <a href="Lisp-Data-Types.html#Lisp-Data-Types" accesskey="u" rel="up">Lisp Data Types</a> &nbsp; [<a href="index.html#SEC_Contents" title="Table of contents" rel="contents">Contents</a>][<a href="Index.html#Index" title="Index" rel="index">Index</a>]</p>
</div>



</body>
</html>
