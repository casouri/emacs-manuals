<!DOCTYPE html>
<html>
<!-- Created by GNU Texinfo 7.1, https://www.gnu.org/software/texinfo/ -->
<head>
<meta http-equiv="Content-Type" content="text/html; charset=utf-8">
<!-- This is the GNU Emacs Lisp Reference Manual
corresponding to Emacs version 31.0.50.

Copyright Â© 1990-1996, 1998-2025 Free Software Foundation,
Inc.

Permission is granted to copy, distribute and/or modify this document
under the terms of the GNU Free Documentation License, Version 1.3 or
any later version published by the Free Software Foundation; with the
Invariant Sections being "GNU General Public License," with the
Front-Cover Texts being "A GNU Manual," and with the Back-Cover
Texts as in (a) below.  A copy of the license is included in the
section entitled "GNU Free Documentation License."

(a) The FSF's Back-Cover Text is: "You have the freedom to copy and
modify this GNU manual.  Buying copies from the FSF supports it in
developing GNU and promoting software freedom." -->
<title>Tool Bar (GNU Emacs Lisp Reference Manual)</title>

<meta name="description" content="Tool Bar (GNU Emacs Lisp Reference Manual)">
<meta name="keywords" content="Tool Bar (GNU Emacs Lisp Reference Manual)">
<meta name="resource-type" content="document">
<meta name="distribution" content="global">
<meta name="Generator" content="makeinfo">
<meta name="viewport" content="width=device-width,initial-scale=1">

<link href="index.html" rel="start" title="Top">
<link href="Index.html" rel="index" title="Index">
<link href="index.html#SEC_Contents" rel="contents" title="Table of Contents">
<link href="Menu-Keymaps.html" rel="up" title="Menu Keymaps">
<link href="Modifying-Menus.html" rel="next" title="Modifying Menus">
<link href="Menu-Bar.html" rel="prev" title="Menu Bar">
<style type="text/css">
<!--
a.copiable-link {visibility: hidden; text-decoration: none; line-height: 0em}
div.example {margin-left: 3.2em}
kbd.kbd {font-style: oblique}
kbd.key {font-style: normal}
span:hover a.copiable-link {visibility: visible}
strong.def-name {font-family: monospace; font-weight: bold; font-size: larger}
-->
</style>
<link rel="stylesheet" type="text/css" href="./manual.css">


</head>

<body lang="en">
<div class="subsection-level-extent" id="Tool-Bar">
<div class="nav-panel">
<p>
Next: <a href="Modifying-Menus.html" accesskey="n" rel="next">Modifying Menus</a>, Previous: <a href="Menu-Bar.html" accesskey="p" rel="prev">The Menu Bar</a>, Up: <a href="Menu-Keymaps.html" accesskey="u" rel="up">Menu Keymaps</a> &nbsp; [<a href="index.html#SEC_Contents" title="Table of contents" rel="contents">Contents</a>][<a href="Index.html" title="Index" rel="index">Index</a>]</p>
</div>
<hr>
<h4 class="subsection" id="Tool-bars"><span>23.18.6 Tool bars<a class="copiable-link" href="#Tool-bars"> &para;</a></span></h4>
<a class="index-entry-id" id="index-tool-bar"></a>

<p>A <em class="dfn">tool bar</em> is a row of clickable icons at the top of a frame,
just below the menu bar.  See <a data-manual="emacs" href="https://www.gnu.org/software/emacs/manual/html_node/emacs/Tool-Bars.html#Tool-Bars">Tool Bars</a> in <cite class="cite">The GNU Emacs
Manual</cite>.  Emacs normally shows a tool bar on graphical displays.
</p>
<p>On each frame, the frame parameter <code class="code">tool-bar-lines</code> controls
how many lines&rsquo; worth of height to reserve for the tool bar.  A zero
value suppresses the tool bar.  If the value is nonzero, and
<code class="code">auto-resize-tool-bars</code> is non-<code class="code">nil</code>, the tool bar expands
and contracts automatically as needed to hold the specified contents.
If the value is <code class="code">grow-only</code>, the tool bar expands automatically,
but does not contract automatically.
</p>
<p>The tool bar contents are controlled by a menu keymap attached to a
fake function key called <kbd class="key">TOOL-BAR</kbd> (much like the way the menu
bar is controlled).  So you define a tool bar item using
<code class="code">define-key</code>, like this:
</p>
<div class="example">
<pre class="example-preformatted">(define-key global-map [tool-bar <var class="var">key</var>] <var class="var">item</var>)
</pre></div>

<p>where <var class="var">key</var> is a fake function key to distinguish this item from
other items, and <var class="var">item</var> is a menu item key binding (see <a class="pxref" href="Extended-Menu-Items.html">Extended Menu Items</a>), which says how to display this item and how it behaves.
</p>
<p>The usual menu keymap item properties, <code class="code">:visible</code>,
<code class="code">:enable</code>, <code class="code">:button</code>, and <code class="code">:filter</code>, are useful in
tool bar bindings and have their normal meanings.  The <var class="var">real-binding</var>
in the item must be a command, not a keymap; in other words, it does not
work to define a tool bar icon as a prefix key.
</p>
<p>The <code class="code">:help</code> property specifies a help-echo string to display
while the mouse is on that item.  This is displayed in the same way as
<code class="code">help-echo</code> text properties (see <a class="pxref" href="Special-Properties.html#Help-display">Help display</a>).
</p>
<p>In addition, you should use the <code class="code">:image</code> property;
this is how you specify the image to display in the tool bar:
</p>
<dl class="table">
<dt><code class="code">:image <var class="var">image</var></code></dt>
<dd><p><var class="var">image</var> is either a single image specification (see <a class="pxref" href="Images.html">Images</a>) or
a vector of four image specifications.  If you use a vector of four,
one of them is used, depending on circumstances:
</p>
<dl class="table">
<dt>item 0</dt>
<dd><p>Used when the item is enabled and selected.
</p></dd>
<dt>item 1</dt>
<dd><p>Used when the item is enabled and deselected.
</p></dd>
<dt>item 2</dt>
<dd><p>Used when the item is disabled and selected.
</p></dd>
<dt>item 3</dt>
<dd><p>Used when the item is disabled and deselected.
</p></dd>
</dl>
</dd>
</dl>

<p>The GTK+ and NS versions of Emacs ignores items 1 to 3, because disabled and/or
deselected images are autocomputed from item 0.
</p>
<p>If <var class="var">image</var> is a single image specification, Emacs draws the tool bar
button in disabled state by applying an edge-detection algorithm to the
image.
</p>
<p>The <code class="code">:rtl</code> property specifies an alternative image to use for
right-to-left languages.  Only the GTK+ version of Emacs supports this
at present.
</p>
<p>Some toolkits display both an image and a text in the toolbar.  If you
want to force using only the image, use a <code class="code">:vert-only</code>
non-<code class="code">nil</code> property.
</p>
<p>Like the menu bar, the tool bar can display separators (see <a class="pxref" href="Menu-Separators.html">Menu Separators</a>).  Tool bar separators are vertical rather than
horizontal, though, and only a single style is supported.  They are
represented in the tool bar keymap by <code class="code">(menu-item &quot;--&quot;)</code> entries;
properties like <code class="code">:visible</code> are not supported for tool bar
separators.  Separators are rendered natively in GTK+ and Nextstep
tool bars; in the other cases, they are rendered using an image of a
vertical line.
</p>
<p>The default tool bar is defined so that items specific to editing do not
appear for major modes whose command symbol has a <code class="code">mode-class</code>
property of <code class="code">special</code> (see <a class="pxref" href="Major-Mode-Conventions.html">Major Mode Conventions</a>).  Major
modes may add items to the global bar by binding <code class="code">[tool-bar
<var class="var">foo</var>]</code> in their local map.  It makes sense for some major modes to
replace the default tool bar items completely, since not many can be
accommodated conveniently, and the default bindings make this easy by
using an indirection through <code class="code">tool-bar-map</code>.
</p>
<dl class="first-defvr first-defvar-alias-first-defvr">
<dt class="defvr defvar-alias-defvr" id="index-tool_002dbar_002dmap"><span class="category-def">Variable: </span><span><strong class="def-name">tool-bar-map</strong><a class="copiable-link" href="#index-tool_002dbar_002dmap"> &para;</a></span></dt>
<dd><p>By default, the global map binds <code class="code">[tool-bar]</code> as follows:
</p>
<div class="example">
<pre class="example-preformatted">(keymap-global-set &quot;&lt;tool-bar&gt;&quot;
                   '(menu-item &quot;tool bar&quot; ignore
                               :filter tool-bar-make-keymap))
</pre></div>

<p>The function <code class="code">tool-bar-make-keymap</code>, in turn, derives the actual
tool bar map dynamically from the value of the variable
<code class="code">tool-bar-map</code>.  Hence, you should normally adjust the default
(global) tool bar by changing that map.  Some major modes, such as
Info mode, completely replace the global tool bar by making
<code class="code">tool-bar-map</code> buffer-local and setting it to a different keymap.
</p></dd></dl>

<p>There are two convenience functions for defining tool bar items, as
follows.
</p>
<dl class="first-deffn first-defun-alias-first-deffn">
<dt class="deffn defun-alias-deffn" id="index-tool_002dbar_002dadd_002ditem"><span class="category-def">Function: </span><span><strong class="def-name">tool-bar-add-item</strong> <var class="def-var-arguments">icon def key &amp;rest props</var><a class="copiable-link" href="#index-tool_002dbar_002dadd_002ditem"> &para;</a></span></dt>
<dd><p>This function adds an item to the tool bar by modifying
<code class="code">tool-bar-map</code>.  The image to use is defined by <var class="var">icon</var>, which
is the base name of an XPM, XBM or PBM image file to be located by
<code class="code">find-image</code>.  Given a value &lsquo;<samp class="samp">&quot;exit&quot;</samp>&rsquo;, say, <samp class="file">exit.xpm</samp>,
<samp class="file">exit.pbm</samp> and <samp class="file">exit.xbm</samp> would be searched for in that order
on a color display.  On a monochrome display, the search order is
&lsquo;<samp class="samp">.pbm</samp>&rsquo;, &lsquo;<samp class="samp">.xbm</samp>&rsquo; and &lsquo;<samp class="samp">.xpm</samp>&rsquo;.  The binding to use is the
command <var class="var">def</var>, and <var class="var">key</var> is the fake function key symbol in the
prefix keymap.  The remaining arguments <var class="var">props</var> are additional
property list elements to add to the menu item specification.
</p>
<p>To define items in some local map, bind <code class="code">tool-bar-map</code> with
<code class="code">let</code> around calls of this function:
</p><div class="example">
<pre class="example-preformatted">(defvar foo-tool-bar-map
  (let ((tool-bar-map (make-sparse-keymap)))
    (tool-bar-add-item ...)
    ...
    tool-bar-map))
</pre></div>
</dd></dl>

<dl class="first-deffn first-defun-alias-first-deffn">
<dt class="deffn defun-alias-deffn" id="index-tool_002dbar_002dadd_002ditem_002dfrom_002dmenu"><span class="category-def">Function: </span><span><strong class="def-name">tool-bar-add-item-from-menu</strong> <var class="def-var-arguments">command icon &amp;optional map &amp;rest props</var><a class="copiable-link" href="#index-tool_002dbar_002dadd_002ditem_002dfrom_002dmenu"> &para;</a></span></dt>
<dd><p>This function is a convenience for defining tool bar items which are
consistent with existing menu bar bindings.  The binding of
<var class="var">command</var> is looked up in the menu bar in <var class="var">map</var> (default
<code class="code">global-map</code>) and modified to add an image specification for
<var class="var">icon</var>, which is found in the same way as by
<code class="code">tool-bar-add-item</code>.  The resulting binding is then placed in
<code class="code">tool-bar-map</code>, so use this function only for global tool bar
items.
</p>
<p><var class="var">map</var> must contain an appropriate keymap bound to
<code class="code">[menu-bar]</code>.  The remaining arguments <var class="var">props</var> are additional
property list elements to add to the menu item specification.
</p></dd></dl>

<dl class="first-deffn first-defun-alias-first-deffn">
<dt class="deffn defun-alias-deffn" id="index-tool_002dbar_002dlocal_002ditem_002dfrom_002dmenu"><span class="category-def">Function: </span><span><strong class="def-name">tool-bar-local-item-from-menu</strong> <var class="def-var-arguments">command icon in-map &amp;optional from-map &amp;rest props</var><a class="copiable-link" href="#index-tool_002dbar_002dlocal_002ditem_002dfrom_002dmenu"> &para;</a></span></dt>
<dd><p>This function is used for making non-global tool bar items.  Use it
like <code class="code">tool-bar-add-item-from-menu</code> except that <var class="var">in-map</var>
specifies the local map to make the definition in.  The argument
<var class="var">from-map</var> is like the <var class="var">map</var> argument of
<code class="code">tool-bar-add-item-from-menu</code>.
</p></dd></dl>

<a class="index-entry-id" id="index-secondary_002dtool_002dbar_002dmap"></a>
<p>In addition to the tool bar items defined in <code class="code">tool-bar-map</code>,
Emacs also supports displaying an additional row of &ldquo;secondary&rdquo; tool
bar items specified in the keymap <code class="code">secondary-tool-bar-map</code>.
These items are normally displayed below those defined within
<code class="code">tool-bar-map</code> if the tool bar is positioned at the top of its
frame, but are displayed above them if the tool bar is positioned at
the bottom (see <a class="pxref" href="Layout-Parameters.html">Layout Parameters</a>.)  They are not displayed if the
tool bar is positioned at the left or right of a frame.
</p>
<dl class="first-defvr first-defvar-alias-first-defvr">
<dt class="defvr defvar-alias-defvr" id="index-auto_002dresize_002dtool_002dbars"><span class="category-def">Variable: </span><span><strong class="def-name">auto-resize-tool-bars</strong><a class="copiable-link" href="#index-auto_002dresize_002dtool_002dbars"> &para;</a></span></dt>
<dd><p>If this variable is non-<code class="code">nil</code>, the tool bar automatically resizes to
show all defined tool bar items&mdash;but not larger than a quarter of the
frame&rsquo;s height.
</p>
<p>If the value is <code class="code">grow-only</code>, the tool bar expands automatically,
but does not contract automatically.  To contract the tool bar, the
user has to redraw the frame by entering <kbd class="kbd">C-l</kbd>.
</p>
<p>If Emacs is built with GTK+ or Nextstep, the tool bar can only show one
line, so this variable has no effect.
</p></dd></dl>

<dl class="first-defvr first-defvar-alias-first-defvr">
<dt class="defvr defvar-alias-defvr" id="index-auto_002draise_002dtool_002dbar_002dbuttons"><span class="category-def">Variable: </span><span><strong class="def-name">auto-raise-tool-bar-buttons</strong><a class="copiable-link" href="#index-auto_002draise_002dtool_002dbar_002dbuttons"> &para;</a></span></dt>
<dd><p>If this variable is non-<code class="code">nil</code>, tool bar items display
in raised form when the mouse moves over them.
</p></dd></dl>

<dl class="first-defvr first-defvar-alias-first-defvr">
<dt class="defvr defvar-alias-defvr" id="index-tool_002dbar_002dbutton_002dmargin"><span class="category-def">Variable: </span><span><strong class="def-name">tool-bar-button-margin</strong><a class="copiable-link" href="#index-tool_002dbar_002dbutton_002dmargin"> &para;</a></span></dt>
<dd><p>This variable specifies an extra margin to add around tool bar items.
The value is an integer, a number of pixels.  The default is 4.
</p></dd></dl>

<dl class="first-defvr first-defvar-alias-first-defvr">
<dt class="defvr defvar-alias-defvr" id="index-tool_002dbar_002dbutton_002drelief"><span class="category-def">Variable: </span><span><strong class="def-name">tool-bar-button-relief</strong><a class="copiable-link" href="#index-tool_002dbar_002dbutton_002drelief"> &para;</a></span></dt>
<dd><p>This variable specifies the shadow width for tool bar items.
The value is an integer, a number of pixels.  The default is 1.
</p></dd></dl>

<dl class="first-defvr first-defvar-alias-first-defvr">
<dt class="defvr defvar-alias-defvr" id="index-tool_002dbar_002dborder"><span class="category-def">Variable: </span><span><strong class="def-name">tool-bar-border</strong><a class="copiable-link" href="#index-tool_002dbar_002dborder"> &para;</a></span></dt>
<dd><p>This variable specifies the height of the border drawn below the tool
bar area.  An integer specifies height as a number of pixels.
If the value is one of <code class="code">internal-border-width</code> (the default) or
<code class="code">border-width</code>, the tool bar border height corresponds to the
corresponding frame parameter.
</p></dd></dl>

<p>You can define a special meaning for clicking on a tool bar item with
the shift, control, meta, etc., modifiers.  You do this by setting up
additional items that relate to the original item through the fake
function keys.  Specifically, the additional items should use the
modified versions of the same fake function key used to name the
original item.
</p>
<p>Thus, if the original item was defined this way,
</p>
<div class="example">
<pre class="example-preformatted">(define-key global-map [tool-bar shell]
  '(menu-item &quot;Shell&quot; shell
              :image (image :type xpm :file &quot;shell.xpm&quot;)))
</pre></div>

<p>then here is how you can define clicking on the same tool bar image with
the shift modifier:
</p>
<div class="example">
<pre class="example-preformatted">(define-key global-map [tool-bar S-shell] 'some-command)
</pre></div>

<p>See <a class="xref" href="Function-Keys.html">Function Keys</a>, for more information about how to add modifiers to
function keys.
</p>
<p>If you have functions that change whether a tool bar item is enabled
or not, this status is not necessarily updated visually immediately.
To force recalculation of the tool bar, call
<code class="code">force-mode-line-update</code> (see <a class="pxref" href="Mode-Line-Format.html">Mode Line Format</a>).
</p>
</div>
<hr>
<div class="nav-panel">
<p>
Next: <a href="Modifying-Menus.html">Modifying Menus</a>, Previous: <a href="Menu-Bar.html">The Menu Bar</a>, Up: <a href="Menu-Keymaps.html">Menu Keymaps</a> &nbsp; [<a href="index.html#SEC_Contents" title="Table of contents" rel="contents">Contents</a>][<a href="Index.html" title="Index" rel="index">Index</a>]</p>
</div>



</body>
</html>
