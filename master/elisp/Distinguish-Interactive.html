<!DOCTYPE html>
<html>
<!-- Created by GNU Texinfo 7.1, https://www.gnu.org/software/texinfo/ -->
<head>
<meta http-equiv="Content-Type" content="text/html; charset=utf-8">
<!-- This is the GNU Emacs Lisp Reference Manual
corresponding to Emacs version 31.0.50.

Copyright Â© 1990-1996, 1998-2025 Free Software Foundation,
Inc.

Permission is granted to copy, distribute and/or modify this document
under the terms of the GNU Free Documentation License, Version 1.3 or
any later version published by the Free Software Foundation; with the
Invariant Sections being "GNU General Public License," with the
Front-Cover Texts being "A GNU Manual," and with the Back-Cover
Texts as in (a) below.  A copy of the license is included in the
section entitled "GNU Free Documentation License."

(a) The FSF's Back-Cover Text is: "You have the freedom to copy and
modify this GNU manual.  Buying copies from the FSF supports it in
developing GNU and promoting software freedom." -->
<title>Distinguish Interactive (GNU Emacs Lisp Reference Manual)</title>

<meta name="description" content="Distinguish Interactive (GNU Emacs Lisp Reference Manual)">
<meta name="keywords" content="Distinguish Interactive (GNU Emacs Lisp Reference Manual)">
<meta name="resource-type" content="document">
<meta name="distribution" content="global">
<meta name="Generator" content="makeinfo">
<meta name="viewport" content="width=device-width,initial-scale=1">

<link href="index.html" rel="start" title="Top">
<link href="Index.html" rel="index" title="Index">
<link href="index.html#SEC_Contents" rel="contents" title="Table of Contents">
<link href="Command-Loop.html" rel="up" title="Command Loop">
<link href="Command-Loop-Info.html" rel="next" title="Command Loop Info">
<link href="Interactive-Call.html" rel="prev" title="Interactive Call">
<style type="text/css">
<!--
a.copiable-link {visibility: hidden; text-decoration: none; line-height: 0em}
div.example {margin-left: 3.2em}
kbd.kbd {font-style: oblique}
span.r {font-family: initial; font-weight: normal; font-style: normal}
span:hover a.copiable-link {visibility: visible}
strong.def-name {font-family: monospace; font-weight: bold; font-size: larger}
-->
</style>
<link rel="stylesheet" type="text/css" href="./manual.css">


</head>

<body lang="en">
<div class="section-level-extent" id="Distinguish-Interactive">
<div class="nav-panel">
<p>
Next: <a href="Command-Loop-Info.html" accesskey="n" rel="next">Information from the Command Loop</a>, Previous: <a href="Interactive-Call.html" accesskey="p" rel="prev">Interactive Call</a>, Up: <a href="Command-Loop.html" accesskey="u" rel="up">Command Loop</a> &nbsp; [<a href="index.html#SEC_Contents" title="Table of contents" rel="contents">Contents</a>][<a href="Index.html" title="Index" rel="index">Index</a>]</p>
</div>
<hr>
<h3 class="section" id="Distinguish-Interactive-Calls"><span>22.4 Distinguish Interactive Calls<a class="copiable-link" href="#Distinguish-Interactive-Calls"> &para;</a></span></h3>
<a class="index-entry-id" id="index-distinguish-interactive-calls"></a>
<a class="index-entry-id" id="index-is-this-call-interactive"></a>

<p>Sometimes a command should display additional visual feedback (such
as an informative message in the echo area) for interactive calls
only.  There are three ways to do this.  The recommended way to test
whether the function was called using <code class="code">call-interactively</code> is to
give it an optional argument <code class="code">print-message</code> and use the
<code class="code">interactive</code> spec to make it non-<code class="code">nil</code> in interactive
calls.  Here&rsquo;s an example:
</p>
<div class="example">
<pre class="example-preformatted">(defun foo (&amp;optional print-message)
  (interactive &quot;p&quot;)
  (when print-message
    (message &quot;foo&quot;)))
</pre></div>

<p>We use <code class="code">&quot;p&quot;</code> because the numeric prefix argument is never
<code class="code">nil</code>.  Defined in this way, the function does display the
message when called from a keyboard macro.
</p>
<p>The above method with the additional argument is usually best,
because it allows callers to say &ldquo;treat this call as interactive&rdquo;.
But you can also do the job by testing <code class="code">called-interactively-p</code>.
</p>
<dl class="first-deffn first-defun-alias-first-deffn">
<dt class="deffn defun-alias-deffn" id="index-called_002dinteractively_002dp"><span class="category-def">Function: </span><span><strong class="def-name">called-interactively-p</strong> <var class="def-var-arguments">kind</var><a class="copiable-link" href="#index-called_002dinteractively_002dp"> &para;</a></span></dt>
<dd><p>This function returns <code class="code">t</code> when the calling function was called
using <code class="code">call-interactively</code>.
</p>
<p>The argument <var class="var">kind</var> should be either the symbol <code class="code">interactive</code>
or the symbol <code class="code">any</code>.  If it is <code class="code">interactive</code>, then
<code class="code">called-interactively-p</code> returns <code class="code">t</code> only if the call was
made directly by the user&mdash;e.g., if the user typed a key sequence
bound to the calling function, but <em class="emph">not</em> if the user ran a
keyboard macro that called the function (see <a class="pxref" href="Keyboard-Macros.html">Keyboard Macros</a>).  If
<var class="var">kind</var> is <code class="code">any</code>, <code class="code">called-interactively-p</code> returns
<code class="code">t</code> for any kind of interactive call, including keyboard macros.
</p>
<p>If in doubt, use <code class="code">any</code>; the only known proper use of
<code class="code">interactive</code> is if you need to decide whether to display a
helpful message while a function is running.
</p>
<p>A function is never considered to be called interactively if it was
called via Lisp evaluation (or with <code class="code">apply</code> or <code class="code">funcall</code>).
</p></dd></dl>

<p>Here is an example of using <code class="code">called-interactively-p</code>:
</p>
<div class="example">
<div class="group"><pre class="example-preformatted">(defun foo ()
  (interactive)
  (when (called-interactively-p 'any)
    (message &quot;Interactive!&quot;)
    'foo-called-interactively))
</pre></div><pre class="example-preformatted">

</pre><div class="group"><pre class="example-preformatted">;; <span class="r">Type <kbd class="kbd">M-x foo</kbd>.</span>
     -| Interactive!
</pre></div><pre class="example-preformatted">

</pre><div class="group"><pre class="example-preformatted">(foo)
     &rArr; nil
</pre></div></div>

<p>Here is another example that contrasts direct and indirect calls to
<code class="code">called-interactively-p</code>.
</p>
<div class="example">
<div class="group"><pre class="example-preformatted">(defun bar ()
  (interactive)
  (message &quot;%s&quot; (list (foo) (called-interactively-p 'any))))
</pre></div><pre class="example-preformatted">

</pre><div class="group"><pre class="example-preformatted">;; <span class="r">Type <kbd class="kbd">M-x bar</kbd>.</span>
     -| (nil t)
</pre></div></div>

</div>
<hr>
<div class="nav-panel">
<p>
Next: <a href="Command-Loop-Info.html">Information from the Command Loop</a>, Previous: <a href="Interactive-Call.html">Interactive Call</a>, Up: <a href="Command-Loop.html">Command Loop</a> &nbsp; [<a href="index.html#SEC_Contents" title="Table of contents" rel="contents">Contents</a>][<a href="Index.html" title="Index" rel="index">Index</a>]</p>
</div>



</body>
</html>
