<!DOCTYPE html>
<html>
<!-- Created by GNU Texinfo 7.1, https://www.gnu.org/software/texinfo/ -->
<head>
<meta http-equiv="Content-Type" content="text/html; charset=utf-8">
<!-- This is the GNU Emacs Lisp Reference Manual
corresponding to Emacs version 31.0.50.

Copyright Â© 1990-1996, 1998-2025 Free Software Foundation,
Inc.

Permission is granted to copy, distribute and/or modify this document
under the terms of the GNU Free Documentation License, Version 1.3 or
any later version published by the Free Software Foundation; with the
Invariant Sections being "GNU General Public License," with the
Front-Cover Texts being "A GNU Manual," and with the Back-Cover
Texts as in (a) below.  A copy of the license is included in the
section entitled "GNU Free Documentation License."

(a) The FSF's Back-Cover Text is: "You have the freedom to copy and
modify this GNU manual.  Buying copies from the FSF supports it in
developing GNU and promoting software freedom." -->
<title>Buffers and Windows (GNU Emacs Lisp Reference Manual)</title>

<meta name="description" content="Buffers and Windows (GNU Emacs Lisp Reference Manual)">
<meta name="keywords" content="Buffers and Windows (GNU Emacs Lisp Reference Manual)">
<meta name="resource-type" content="document">
<meta name="distribution" content="global">
<meta name="Generator" content="makeinfo">
<meta name="viewport" content="width=device-width,initial-scale=1">

<link href="index.html" rel="start" title="Top">
<link href="Index.html" rel="index" title="Index">
<link href="index.html#SEC_Contents" rel="contents" title="Table of Contents">
<link href="Windows.html" rel="up" title="Windows">
<link href="Switching-Buffers.html" rel="next" title="Switching Buffers">
<link href="Cyclic-Window-Ordering.html" rel="prev" title="Cyclic Window Ordering">
<style type="text/css">
<!--
a.copiable-link {visibility: hidden; text-decoration: none; line-height: 0em}
span:hover a.copiable-link {visibility: visible}
strong.def-name {font-family: monospace; font-weight: bold; font-size: larger}
ul.mark-bullet {list-style-type: disc}
-->
</style>
<link rel="stylesheet" type="text/css" href="./manual.css">


</head>

<body lang="en">
<div class="section-level-extent" id="Buffers-and-Windows">
<div class="nav-panel">
<p>
Next: <a href="Switching-Buffers.html" accesskey="n" rel="next">Switching to a Buffer in a Window</a>, Previous: <a href="Cyclic-Window-Ordering.html" accesskey="p" rel="prev">Cyclic Ordering of Windows</a>, Up: <a href="Windows.html" accesskey="u" rel="up">Windows</a> &nbsp; [<a href="index.html#SEC_Contents" title="Table of contents" rel="contents">Contents</a>][<a href="Index.html" title="Index" rel="index">Index</a>]</p>
</div>
<hr>
<h3 class="section" id="Buffers-and-Windows-1"><span>29.13 Buffers and Windows<a class="copiable-link" href="#Buffers-and-Windows-1"> &para;</a></span></h3>
<a class="index-entry-id" id="index-examining-windows"></a>
<a class="index-entry-id" id="index-windows_002c-controlling-precisely"></a>
<a class="index-entry-id" id="index-buffers_002c-controlled-in-windows"></a>

<p>This section describes low-level functions for examining and setting
the contents of windows.  See <a class="xref" href="Switching-Buffers.html">Switching to a Buffer in a Window</a>, for higher-level
functions for displaying a specific buffer in a window.
</p>
<dl class="first-deffn first-defun-alias-first-deffn">
<dt class="deffn defun-alias-deffn" id="index-window_002dbuffer"><span class="category-def">Function: </span><span><strong class="def-name">window-buffer</strong> <var class="def-var-arguments">&amp;optional window</var><a class="copiable-link" href="#index-window_002dbuffer"> &para;</a></span></dt>
<dd><p>This function returns the buffer that <var class="var">window</var> is displaying.  If
<var class="var">window</var> is omitted or <code class="code">nil</code> it defaults to the selected
window.  If <var class="var">window</var> is an internal window, this function returns
<code class="code">nil</code>.
</p></dd></dl>

<dl class="first-deffn first-defun-alias-first-deffn">
<dt class="deffn defun-alias-deffn" id="index-set_002dwindow_002dbuffer"><span class="category-def">Function: </span><span><strong class="def-name">set-window-buffer</strong> <var class="def-var-arguments">window buffer-or-name &amp;optional keep-margins</var><a class="copiable-link" href="#index-set_002dwindow_002dbuffer"> &para;</a></span></dt>
<dd><p>This function makes <var class="var">window</var> display <var class="var">buffer-or-name</var>.
<var class="var">window</var> should be a live window; if <code class="code">nil</code>, it defaults to
the selected window.  <var class="var">buffer-or-name</var> should be a buffer, or the
name of an existing buffer.  This function does not change which
window is selected, nor does it directly change which buffer is
current (see <a class="pxref" href="Current-Buffer.html">The Current Buffer</a>).  Its return value is <code class="code">nil</code>.
</p>
<p>If <var class="var">window</var> is <em class="dfn">strongly dedicated</em> to a buffer and
<var class="var">buffer-or-name</var> does not specify that buffer, this function
signals an error.  See <a class="xref" href="Dedicated-Windows.html">Dedicated Windows</a>.
</p>
<p>By default, this function resets <var class="var">window</var>&rsquo;s position, display
margins, fringe widths, and scroll bar settings, based on the local
variables in the specified buffer.  However, if the optional argument
<var class="var">keep-margins</var> is non-<code class="code">nil</code>, it leaves <var class="var">window</var>&rsquo;s display
margins, fringes and scroll bar settings alone.
</p>
<p>When writing an application, you should normally use
<code class="code">display-buffer</code> (see <a class="pxref" href="Choosing-Window.html">Choosing a Window for Displaying a Buffer</a>) or the higher-level
functions described in <a class="ref" href="Switching-Buffers.html">Switching to a Buffer in a Window</a>, instead of calling
<code class="code">set-window-buffer</code> directly.
</p>
<p>This runs <code class="code">window-scroll-functions</code>, followed by
<code class="code">window-configuration-change-hook</code>.  See <a class="xref" href="Window-Hooks.html">Hooks for Window Scrolling and Changes</a>.
</p></dd></dl>

<dl class="first-defvr first-defvar-alias-first-defvr">
<dt class="defvr defvar-alias-defvr" id="index-buffer_002ddisplay_002dcount"><span class="category-def">Variable: </span><span><strong class="def-name">buffer-display-count</strong><a class="copiable-link" href="#index-buffer_002ddisplay_002dcount"> &para;</a></span></dt>
<dd><p>This buffer-local variable records the number of times a buffer has been
displayed in a window.  It is incremented each time
<code class="code">set-window-buffer</code> is called for the buffer.
</p></dd></dl>

<dl class="first-defvr first-defvar-alias-first-defvr">
<dt class="defvr defvar-alias-defvr" id="index-buffer_002ddisplay_002dtime"><span class="category-def">Variable: </span><span><strong class="def-name">buffer-display-time</strong><a class="copiable-link" href="#index-buffer_002ddisplay_002dtime"> &para;</a></span></dt>
<dd><p>This buffer-local variable records the time at which a buffer was last
displayed in a window.  The value is <code class="code">nil</code> if the buffer has
never been displayed.  It is updated each time
<code class="code">set-window-buffer</code> is called for the buffer, with the value
returned by <code class="code">current-time</code> (see <a class="pxref" href="Time-of-Day.html">Time of Day</a>).
</p></dd></dl>

<dl class="first-deffn first-defun-alias-first-deffn">
<dt class="deffn defun-alias-deffn" id="index-get_002dbuffer_002dwindow"><span class="category-def">Function: </span><span><strong class="def-name">get-buffer-window</strong> <var class="def-var-arguments">&amp;optional buffer-or-name all-frames</var><a class="copiable-link" href="#index-get_002dbuffer_002dwindow"> &para;</a></span></dt>
<dd><p>This function returns the first window displaying <var class="var">buffer-or-name</var>
in the cyclic ordering of windows, starting from the selected window
(see <a class="pxref" href="Cyclic-Window-Ordering.html">Cyclic Ordering of Windows</a>).  If no such window exists, the
return value is <code class="code">nil</code>.
</p>
<p><var class="var">buffer-or-name</var> should be a buffer or the name of a buffer; if
omitted or <code class="code">nil</code>, it defaults to the current buffer.  The
optional argument <var class="var">all-frames</var> specifies which windows to
consider:
</p>
<ul class="itemize mark-bullet">
<li><code class="code">t</code> means consider windows on all existing frames.
</li><li><code class="code">visible</code> means consider windows on all visible frames.
</li><li>0 means consider windows on all visible or iconified frames.
</li><li>A frame means consider windows on that frame only.
</li><li>Any other value means consider windows on the selected frame.
</li></ul>

<p>Note that these meanings differ slightly from those of the
<var class="var">all-frames</var> argument to <code class="code">next-window</code> (see <a class="pxref" href="Cyclic-Window-Ordering.html">Cyclic Ordering of Windows</a>).  This function may be changed in a future version of Emacs
to eliminate this discrepancy.
</p></dd></dl>

<p>The following function can tell for a specific window whether its buffer
shares the text of some other buffer (see <a class="pxref" href="Indirect-Buffers.html">Indirect Buffers</a>).
</p>
<dl class="first-deffn first-defun-alias-first-deffn">
<dt class="deffn defun-alias-deffn" id="index-window_002dindirect_002dbuffer_002dp"><span class="category-def">Function: </span><span><strong class="def-name">window-indirect-buffer-p</strong> <var class="def-var-arguments">&amp;optional window buffer-or-name</var><a class="copiable-link" href="#index-window_002dindirect_002dbuffer_002dp"> &para;</a></span></dt>
<dd><p>This function returns non-<code class="code">nil</code> if <var class="var">window</var> is indirectly
related to <var class="var">buffer-or-name</var>.  <var class="var">window</var> must be a live window and
defaults to the selected window.  <var class="var">buffer-or-name</var> may be a buffer
or the name of an existing buffer and defaults to the current buffer.
</p>
<p><var class="var">window</var> is indirectly related to <var class="var">buffer-or-name</var> if one of the
following conditions hold:
</p>
<ul class="itemize mark-bullet">
<li><var class="var">buffer-or-name</var> specifies an indirect buffer and <var class="var">window</var>&rsquo;s
buffer is its base buffer.

</li><li><var class="var">window</var>&rsquo;s buffer is an indirect buffer whose base buffer is the
buffer specified by <var class="var">buffer-or-name</var>.

</li><li>Both, <var class="var">window</var>&rsquo;s buffer and the buffer specified by
<var class="var">buffer-or-name</var>, are indirect buffer&rsquo;s sharing the same base
buffer.
</li></ul>

<p>It returns <code class="code">nil</code> if none of the above holds.
</p></dd></dl>

<dl class="first-deffn first-defun-alias-first-deffn">
<dt class="deffn defun-alias-deffn" id="index-get_002dbuffer_002dwindow_002dlist"><span class="category-def">Function: </span><span><strong class="def-name">get-buffer-window-list</strong> <var class="def-var-arguments">&amp;optional buffer-or-name minibuf all-frames indirect</var><a class="copiable-link" href="#index-get_002dbuffer_002dwindow_002dlist"> &para;</a></span></dt>
<dd><p>This function returns a list of all windows currently displaying
<var class="var">buffer-or-name</var>.  <var class="var">buffer-or-name</var> should be a buffer or the
name of an existing buffer.  If omitted or <code class="code">nil</code>, it defaults to
the current buffer.  If the currently selected window displays
<var class="var">buffer-or-name</var>, it will be the first in the list returned by
this function.
</p>
<p>The arguments <var class="var">minibuf</var> and <var class="var">all-frames</var> have the same
meanings as in the function <code class="code">next-window</code> (see <a class="pxref" href="Cyclic-Window-Ordering.html">Cyclic Ordering of Windows</a>).  Note that the <var class="var">all-frames</var> argument does <em class="emph">not</em>
behave exactly like in <code class="code">get-buffer-window</code>.
</p>
<p>The optional argument <var class="var">indirect</var> non-<code class="code">nil</code> means to append to
the list of windows showing <var class="var">buffer-or-name</var> a list of all windows
that are indirectly related to <var class="var">buffer-or-name</var>, that is, windows
for which <code class="code">window-indirect-buffer-p</code> (see above) with the window
and the buffer specified by <var class="var">buffer-or-name</var> as arguments returns
non-<code class="code">nil</code>.
</p></dd></dl>

<dl class="first-deffn">
<dt class="deffn" id="index-replace_002dbuffer_002din_002dwindows"><span class="category-def">Command: </span><span><strong class="def-name">replace-buffer-in-windows</strong> <var class="def-var-arguments">&amp;optional buffer-or-name</var><a class="copiable-link" href="#index-replace_002dbuffer_002din_002dwindows"> &para;</a></span></dt>
<dd><p>This command replaces <var class="var">buffer-or-name</var> with some other buffer, in
all windows displaying it.  <var class="var">buffer-or-name</var> should be a buffer, or
the name of an existing buffer; if omitted or <code class="code">nil</code>, it defaults to
the current buffer.
</p>
<p>The replacement buffer in each window is usually chosen via
<code class="code">switch-to-prev-buffer</code> (see <a class="pxref" href="Window-History.html">Window History</a>).  With the
exception of side windows (see <a class="pxref" href="Side-Windows.html">Side Windows</a>), any dedicated window
displaying <var class="var">buffer-or-name</var> is deleted if possible (see <a class="pxref" href="Dedicated-Windows.html">Dedicated Windows</a>).  If such a window is the only window on its frame and there
are other frames on the same terminal, the frame is deleted as well.  If
the dedicated window is the only window on the only frame on its
terminal, the buffer is replaced anyway.
</p>
<p>The main purpose of this function is to decide what to do with windows
whose buffers are about to be killed by <code class="code">kill-buffer</code>
(see <a class="pxref" href="Killing-Buffers.html">Killing Buffers</a>).  It will, however, also remove the buffer
specified by <var class="var">buffer-or-name</var> from the lists of previous and next
buffers (see <a class="pxref" href="Window-History.html">Window History</a>) of all windows (including dead windows
that are only referenced by window configurations) and remove any
<code class="code">quit-restore</code> or <code class="code">quit-restore-prev</code> parameters
(see <a class="pxref" href="Window-Parameters.html">Window Parameters</a>) referencing that buffer.
</p>
<p>This function does not replace the buffer specified by
<var class="var">buffer-or-name</var> in any minibuffer window showing it, nor does it
delete minibuffer windows or minibuffer frames.  It removes, however,
that buffer from the lists of previous and next buffers of all
minibuffer windows.
</p></dd></dl>

<p>By default, <code class="code">replace-buffer-in-windows</code> deletes only windows
dedicated to their buffers and ignores any <code class="code">quit-restore</code> or
<code class="code">quit-restore-prev</code> parameters of the windows it works on.  The
following option is useful for circumventing these restrictions.
</p>
<dl class="first-defvr first-defopt-alias-first-defvr">
<dt class="defvr defopt-alias-defvr" id="index-kill_002dbuffer_002dquit_002dwindows"><span class="category-def">User Option: </span><span><strong class="def-name">kill-buffer-quit-windows</strong><a class="copiable-link" href="#index-kill_002dbuffer_002dquit_002dwindows"> &para;</a></span></dt>
<dd><p>If this option is <code class="code">nil</code>, <code class="code">kill-buffer</code> (and in consequence
<code class="code">replace-buffer-in-windows</code>) may only delete windows that are
dedicated to the buffer about to be killed.  If this is non-<code class="code">nil</code>,
<code class="code">replace-buffer-in-windows</code> has <code class="code">quit-restore-window</code>
(see <a class="pxref" href="Quitting-Windows.html">Quitting Windows</a>) deal with any such window.  That function may
delete such a window even if it&rsquo;s not dedicated to its buffer.  Also,
<code class="code">delete-windows-on</code> will use <code class="code">quit-restore-window</code> as fallback
when a window cannot be deleted and another buffer must be shown in it.
</p></dd></dl>


</div>
<hr>
<div class="nav-panel">
<p>
Next: <a href="Switching-Buffers.html">Switching to a Buffer in a Window</a>, Previous: <a href="Cyclic-Window-Ordering.html">Cyclic Ordering of Windows</a>, Up: <a href="Windows.html">Windows</a> &nbsp; [<a href="index.html#SEC_Contents" title="Table of contents" rel="contents">Contents</a>][<a href="Index.html" title="Index" rel="index">Index</a>]</p>
</div>



</body>
</html>
