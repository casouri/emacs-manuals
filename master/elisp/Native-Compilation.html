<!DOCTYPE html PUBLIC "-//W3C//DTD HTML 4.01 Transitional//EN" "http://www.w3.org/TR/html4/loose.dtd">
<html>
<!-- This is the GNU Emacs Lisp Reference Manual
corresponding to Emacs version 29.0.50.

Copyright Â© 1990-1996, 1998-2021 Free Software Foundation,
Inc.

Permission is granted to copy, distribute and/or modify this document
under the terms of the GNU Free Documentation License, Version 1.3 or
any later version published by the Free Software Foundation; with the
Invariant Sections being "GNU General Public License," with the
Front-Cover Texts being "A GNU Manual," and with the Back-Cover
Texts as in (a) below.  A copy of the license is included in the
section entitled "GNU Free Documentation License."

(a) The FSF's Back-Cover Text is: "You have the freedom to copy and
modify this GNU manual.  Buying copies from the FSF supports it in
developing GNU and promoting software freedom." -->
<!-- Created by GNU Texinfo 6.7, http://www.gnu.org/software/texinfo/ -->
<head>
<meta http-equiv="Content-Type" content="text/html; charset=utf-8">
<title>Native Compilation (GNU Emacs Lisp Reference Manual)</title>

<meta name="description" content="Native Compilation (GNU Emacs Lisp Reference Manual)">
<meta name="keywords" content="Native Compilation (GNU Emacs Lisp Reference Manual)">
<meta name="resource-type" content="document">
<meta name="distribution" content="global">
<meta name="Generator" content="makeinfo">
<link href="index.html" rel="start" title="Top">
<link href="Index.html" rel="index" title="Index">
<link href="index.html#SEC_Contents" rel="contents" title="Table of Contents">
<link href="index.html" rel="up" title="Top">
<link href="Native_002dCompilation-Functions.html" rel="next" title="Native-Compilation Functions">
<link href="Disassembly.html" rel="prev" title="Disassembly">
<style type="text/css">
<!--
a.summary-letter {text-decoration: none}
blockquote.indentedblock {margin-right: 0em}
div.display {margin-left: 3.2em}
div.example {margin-left: 3.2em}
div.lisp {margin-left: 3.2em}
kbd {font-style: oblique}
pre.display {font-family: inherit}
pre.format {font-family: inherit}
pre.menu-comment {font-family: serif}
pre.menu-preformatted {font-family: serif}
span.nolinebreak {white-space: nowrap}
span.roman {font-family: initial; font-weight: normal}
span.sansserif {font-family: sans-serif; font-weight: normal}
ul.no-bullet {list-style: none}
-->
</style>
<link rel="stylesheet" type="text/css" href="./manual.css">


</head>

<body lang="en">
<span id="Native-Compilation"></span><div class="header">
<p>
Next: <a href="Debugging.html" accesskey="n" rel="next">Debugging</a>, Previous: <a href="Byte-Compilation.html" accesskey="p" rel="prev">Byte Compilation</a>, Up: <a href="index.html" accesskey="u" rel="up">Top</a> &nbsp; [<a href="index.html#SEC_Contents" title="Table of contents" rel="contents">Contents</a>][<a href="Index.html" title="Index" rel="index">Index</a>]</p>
</div>
<hr>
<span id="Compilation-of-Lisp-to-Native-Code"></span><h2 class="chapter">18 Compilation of Lisp to Native Code</h2>
<span id="index-native-compilation"></span>
<span id="index-compilation-to-native-code-_0028Emacs-Lisp_0029"></span>

<span id="index-native-code"></span>
<p>In addition to the byte-compilation, described in <a href="Byte-Compilation.html">the previous chapter</a>, Emacs can also optionally compile
Lisp function definitions into a true compiled code, known as
<em>native code</em>.  This feature uses the <samp>libgccjit</samp> library,
which is part of the GCC distribution, and requires that Emacs be
built with support for using that library.  It also requires to have
GCC and Binutils (the assembler and linker) available on your system
for you to be able to native-compile Lisp code.
</p>
<span id="index-native_002dcompile_002c-a-Lisp-feature"></span>
<p>To determine whether the current Emacs process can produce and load
natively-compiled Lisp code, call
<code>native-comp-available-p</code> (see <a href="Native_002dCompilation-Functions.html">Native-Compilation Functions</a>).
</p>
<p>Unlike byte-compiled code, natively-compiled Lisp code is executed
directly by the machine&rsquo;s hardware, and therefore runs at full speed
that the host CPU can provide.  The resulting speedup generally
depends on what the Lisp code does, but is usually 2.5 to 5 times
faster than the corresponding byte-compiled code.
</p>
<p>Since native code is generally incompatible between different
systems, the natively-compiled code is <em>not</em> transportable from
one machine to another, it can only be used on the same machine where
it was produced or on very similar ones (having the same CPU and
run-time libraries).  The transportability of natively-compiled code
is the same as that of shared libraries (<samp>.so</samp> or <samp>.dll</samp>
files).
</p>
<p>Libraries of natively-compiled code include crucial dependencies on
Emacs Lisp primitives (see <a href="What-Is-a-Function.html">What Is a Function</a>) and their calling
conventions, and thus Emacs usually won&rsquo;t load natively-compiled code
produced by earlier or later Emacs versions; native compilation of the
same Lisp code by a different Emacs version will usually produce a
natively-compiled library under a unique file name that only that
version of Emacs will be able to load.  However, the use of unique
file names allows to have in the same directory several versions of
the same Lisp library natively-compiled by several different versions
of Emacs.
</p>
<span id="index-no_002dnative_002dcompile"></span>
<p>A non-<code>nil</code> file-local variable binding of
<code>no-byte-compile</code> (see <a href="Byte-Compilation.html">Byte Compilation</a>) also disables the
native compilation of that file.  In addition, a similar variable
<code>no-native-compile</code> disables just the native compilation of the
file.  If both <code>no-byte-compile</code> and <code>no-native-compile</code> are
specified, the former takes precedence.
</p>
<table class="menu" border="0" cellspacing="0">
<tr><td align="left" valign="top">&bull; <a href="Native_002dCompilation-Functions.html" accesskey="1">Native-Compilation Functions</a></td><td>&nbsp;&nbsp;</td><td align="left" valign="top">Functions to natively-compile Lisp.
</td></tr>
<tr><td align="left" valign="top">&bull; <a href="Native_002dCompilation-Variables.html" accesskey="2">Native-Compilation Variables</a></td><td>&nbsp;&nbsp;</td><td align="left" valign="top">Variables controlling native compilation.
</td></tr>
</table>

<hr>
<div class="header">
<p>
Next: <a href="Debugging.html" accesskey="n" rel="next">Debugging</a>, Previous: <a href="Byte-Compilation.html" accesskey="p" rel="prev">Byte Compilation</a>, Up: <a href="index.html" accesskey="u" rel="up">Top</a> &nbsp; [<a href="index.html#SEC_Contents" title="Table of contents" rel="contents">Contents</a>][<a href="Index.html" title="Index" rel="index">Index</a>]</p>
</div>



</body>
</html>
