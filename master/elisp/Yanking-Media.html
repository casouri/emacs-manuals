<!DOCTYPE html>
<html>
<!-- Created by GNU Texinfo 7.1, https://www.gnu.org/software/texinfo/ -->
<head>
<meta http-equiv="Content-Type" content="text/html; charset=utf-8">
<!-- This is the GNU Emacs Lisp Reference Manual
corresponding to Emacs version 31.0.50.

Copyright Â© 1990-1996, 1998-2025 Free Software Foundation,
Inc.

Permission is granted to copy, distribute and/or modify this document
under the terms of the GNU Free Documentation License, Version 1.3 or
any later version published by the Free Software Foundation; with the
Invariant Sections being "GNU General Public License," with the
Front-Cover Texts being "A GNU Manual," and with the Back-Cover
Texts as in (a) below.  A copy of the license is included in the
section entitled "GNU Free Documentation License."

(a) The FSF's Back-Cover Text is: "You have the freedom to copy and
modify this GNU manual.  Buying copies from the FSF supports it in
developing GNU and promoting software freedom." -->
<title>Yanking Media (GNU Emacs Lisp Reference Manual)</title>

<meta name="description" content="Yanking Media (GNU Emacs Lisp Reference Manual)">
<meta name="keywords" content="Yanking Media (GNU Emacs Lisp Reference Manual)">
<meta name="resource-type" content="document">
<meta name="distribution" content="global">
<meta name="Generator" content="makeinfo">
<meta name="viewport" content="width=device-width,initial-scale=1">

<link href="index.html" rel="start" title="Top">
<link href="Index.html" rel="index" title="Index">
<link href="index.html#SEC_Contents" rel="contents" title="Table of Contents">
<link href="Frames.html" rel="up" title="Frames">
<link href="Drag-and-Drop.html" rel="next" title="Drag and Drop">
<link href="Accessing-Selections.html" rel="prev" title="Accessing Selections">
<style type="text/css">
<!--
a.copiable-link {visibility: hidden; text-decoration: none; line-height: 0em}
div.example {margin-left: 3.2em}
span:hover a.copiable-link {visibility: visible}
strong.def-name {font-family: monospace; font-weight: bold; font-size: larger}
-->
</style>
<link rel="stylesheet" type="text/css" href="./manual.css">


</head>

<body lang="en">
<div class="section-level-extent" id="Yanking-Media">
<div class="nav-panel">
<p>
Next: <a href="Drag-and-Drop.html" accesskey="n" rel="next">Drag and Drop</a>, Previous: <a href="Accessing-Selections.html" accesskey="p" rel="prev">Accessing Selections</a>, Up: <a href="Frames.html" accesskey="u" rel="up">Frames</a> &nbsp; [<a href="index.html#SEC_Contents" title="Table of contents" rel="contents">Contents</a>][<a href="Index.html" title="Index" rel="index">Index</a>]</p>
</div>
<hr>
<h3 class="section" id="Yanking-Media-1"><span>30.23 Yanking Media<a class="copiable-link" href="#Yanking-Media-1"> &para;</a></span></h3>
<a class="index-entry-id" id="index-yank-media-from-window_002dsystem-selections"></a>

<p>Data saved within window system selections and the MS-Windows
clipboard is not restricted to plain text.  It is possible for selection
data to encompass images or other binary data of the like, as well as
rich text content instanced by HTML, and also PostScript.  Since the
selection data types incident to this data are at variance with those
for plain text, the insertion of such data is facilitated by a set of
functions dubbed <em class="dfn">yank-media handlers</em>, which are registered by each
major mode undertaking its insertion and called where warranted upon the
execution of the <code class="code">yank-media</code> command.
</p>
<dl class="first-deffn first-defun-alias-first-deffn">
<dt class="deffn defun-alias-deffn" id="index-yank_002dmedia_002dhandler"><span class="category-def">Function: </span><span><strong class="def-name">yank-media-handler</strong> <var class="def-var-arguments">types handler</var><a class="copiable-link" href="#index-yank_002dmedia_002dhandler"> &para;</a></span></dt>
<dd><p>Register a yank-media handler which applies to the current buffer.
</p>
<p><var class="var">types</var> can be a symbol designating a selection data type
(see <a class="pxref" href="Accessing-Selections.html">Accessing Selections</a>), a regexp against which such types are
matched, or a list of these symbols and regexps.  For instance:
</p>
<div class="example">
<pre class="example-preformatted">(yank-media-handler 'text/html #'my-html-handler)
(yank-media-handler &quot;image/.*&quot; #'my-image-handler)
</pre></div>

<p>When a selection offers a data type matching <var class="var">types</var>, the function
<var class="var">handler</var> is called to insert its data, with the symbol
designating the matching selection data type, and the data returned by
<code class="code">gui-get-selection</code>.
</p></dd></dl>

<p>The <code class="code">yank-media</code> command auto selects the preferred <small class="sc">MIME</small> type
by default.  The rules used for the selection can be controlled through
the variables <code class="code">yank-media-autoselect-function</code> and
<code class="code">yank-media-preferred-types</code>.
</p>
<dl class="first-defvr first-defvar-alias-first-defvr">
<dt class="defvr defvar-alias-defvr" id="index-yank_002dmedia_002dautoselect_002dfunction"><span class="category-def">Variable: </span><span><strong class="def-name">yank-media-autoselect-function</strong><a class="copiable-link" href="#index-yank_002dmedia_002dautoselect_002dfunction"> &para;</a></span></dt>
<dd><p>This variable should specify a function that will be called with the
list of <small class="sc">MIME</small> types available for the current major mode, and should
return a list of preferred <small class="sc">MIME</small> types to use.  The first <small class="sc">MIME</small>
type in the list will always be used by the <code class="code">yank-media</code> command
when auto selection is requested.
</p></dd></dl>

<dl class="first-defvr first-defvar-alias-first-defvr">
<dt class="defvr defvar-alias-defvr" id="index-yank_002dmedia_002dpreferred_002dtypes"><span class="category-def">Variable: </span><span><strong class="def-name">yank-media-preferred-types</strong><a class="copiable-link" href="#index-yank_002dmedia_002dpreferred_002dtypes"> &para;</a></span></dt>
<dd><p>This variable changes the default selection process of
<code class="code">yank-media-autoselect-function</code>.  It is a list that should contain
the sole <small class="sc">MIME</small> type to choose in the order of their preference.  It
can also contain a function in which case it is called with the list of
available <small class="sc">MIME</small> types and must return a list of preferred <small class="sc">MIME</small>
types in order of their preference.  This list is passed onto the
<code class="code">yank-media</code> command so the first element of the returned list is
chosen when auto selection is requested.
</p></dd></dl>

<p>The <code class="code">yank-media-types</code> command presents a list of selection data
types that are currently available, which is useful when implementing
yank-media handlers; for programs generally offer an eclectic and
seldom consistent medley of data types.
</p>
</div>
<hr>
<div class="nav-panel">
<p>
Next: <a href="Drag-and-Drop.html">Drag and Drop</a>, Previous: <a href="Accessing-Selections.html">Accessing Selections</a>, Up: <a href="Frames.html">Frames</a> &nbsp; [<a href="index.html#SEC_Contents" title="Table of contents" rel="contents">Contents</a>][<a href="Index.html" title="Index" rel="index">Index</a>]</p>
</div>



</body>
</html>
