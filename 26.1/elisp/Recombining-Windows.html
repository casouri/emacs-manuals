<!DOCTYPE html>
<html>
<!-- Created by GNU Texinfo 7.1, https://www.gnu.org/software/texinfo/ -->
<head>
<meta http-equiv="Content-Type" content="text/html; charset=utf-8">
<!-- This is the GNU Emacs Lisp Reference Manual
corresponding to Emacs version 26.1.

Copyright Â© 1990-1996, 1998-2018 Free Software Foundation, Inc.

Permission is granted to copy, distribute and/or modify this document
under the terms of the GNU Free Documentation License, Version 1.3 or
any later version published by the Free Software Foundation; with the
Invariant Sections being "GNU General Public License," with the
Front-Cover Texts being "A GNU Manual," and with the Back-Cover
Texts as in (a) below.  A copy of the license is included in the
section entitled "GNU Free Documentation License."

(a) The FSF's Back-Cover Text is: "You have the freedom to copy and
modify this GNU manual.  Buying copies from the FSF supports it in
developing GNU and promoting software freedom." -->
<title>Recombining Windows (GNU Emacs Lisp Reference Manual)</title>

<meta name="description" content="Recombining Windows (GNU Emacs Lisp Reference Manual)">
<meta name="keywords" content="Recombining Windows (GNU Emacs Lisp Reference Manual)">
<meta name="resource-type" content="document">
<meta name="distribution" content="global">
<meta name="Generator" content="makeinfo">
<meta name="viewport" content="width=device-width,initial-scale=1">

<link href="index.html" rel="start" title="Top">
<link href="Index.html" rel="index" title="Index">
<link href="index.html#SEC_Contents" rel="contents" title="Table of Contents">
<link href="Windows.html" rel="up" title="Windows">
<link href="Selecting-Windows.html" rel="next" title="Selecting Windows">
<link href="Deleting-Windows.html" rel="prev" title="Deleting Windows">
<style type="text/css">
<!--
a.copiable-link {visibility: hidden; text-decoration: none; line-height: 0em}
div.example {margin-left: 3.2em}
span:hover a.copiable-link {visibility: visible}
strong.def-name {font-family: monospace; font-weight: bold; font-size: larger}
-->
</style>
<link rel="stylesheet" type="text/css" href="./manual.css">


</head>

<body lang="en">
<div class="section-level-extent" id="Recombining-Windows">
<div class="nav-panel">
<p>
Next: <a href="Selecting-Windows.html" accesskey="n" rel="next">Selecting Windows</a>, Previous: <a href="Deleting-Windows.html" accesskey="p" rel="prev">Deleting Windows</a>, Up: <a href="Windows.html" accesskey="u" rel="up">Windows</a> &nbsp; [<a href="index.html#SEC_Contents" title="Table of contents" rel="contents">Contents</a>][<a href="Index.html" title="Index" rel="index">Index</a>]</p>
</div>
<hr>
<h3 class="section" id="Recombining-Windows-1"><span>28.8 Recombining Windows<a class="copiable-link" href="#Recombining-Windows-1"> &para;</a></span></h3>
<a class="index-entry-id" id="index-recombining-windows"></a>
<a class="index-entry-id" id="index-windows_002c-recombining"></a>

<p>When deleting the last sibling of a window <var class="var">W</var>, its parent window
is deleted too, with <var class="var">W</var> replacing it in the window tree.  This
means that <var class="var">W</var> must be recombined with its parent&rsquo;s siblings to
form a new window combination (see <a class="pxref" href="Windows-and-Frames.html">Windows and Frames</a>).  In some
occasions, deleting a live window may even entail the deletion of two
internal windows.
</p>
<div class="example smallexample">
<div class="group"><pre class="example-preformatted">     ______________________________________
    | ______  ____________________________ |
    ||      || __________________________ ||
    ||      ||| ___________  ___________ |||
    ||      ||||           ||           ||||
    ||      ||||____W6_____||_____W7____||||
    ||      |||____________W4____________|||
    ||      || __________________________ ||
    ||      |||                          |||
    ||      |||                          |||
    ||      |||____________W5____________|||
    ||__W2__||_____________W3_____________ |
    |__________________W1__________________|

</pre></div></div>

<p>Deleting <var class="var">W5</var> in this configuration normally causes the deletion of
<var class="var">W3</var> and <var class="var">W4</var>.  The remaining live windows <var class="var">W2</var>,
<var class="var">W6</var> and <var class="var">W7</var> are recombined to form a new horizontal
combination with parent <var class="var">W1</var>.
</p>
<p>Sometimes, however, it makes sense to not delete a parent window like
<var class="var">W4</var>.  In particular, a parent window should not be removed when it
was used to preserve a combination embedded in a combination of the same
type.  Such embeddings make sense to assure that when you split a window
and subsequently delete the new window, Emacs reestablishes the layout
of the associated frame as it existed before the splitting.
</p>
<p>Consider a scenario starting with two live windows <var class="var">W2</var> and
<var class="var">W3</var> and their parent <var class="var">W1</var>.
</p>
<div class="example smallexample">
<div class="group"><pre class="example-preformatted">     ______________________________________
    | ____________________________________ |
    ||                                    ||
    ||                                    ||
    ||                                    ||
    ||                                    ||
    ||                                    ||
    ||                                    ||
    ||_________________W2_________________||
    | ____________________________________ |
    ||                                    ||
    ||                                    ||
    ||_________________W3_________________||
    |__________________W1__________________|

</pre></div></div>

<p>Split <var class="var">W2</var> to make a new window <var class="var">W4</var> as follows.
</p>
<div class="example smallexample">
<div class="group"><pre class="example-preformatted">     ______________________________________
    | ____________________________________ |
    ||                                    ||
    ||                                    ||
    ||_________________W2_________________||
    | ____________________________________ |
    ||                                    ||
    ||                                    ||
    ||_________________W4_________________||
    | ____________________________________ |
    ||                                    ||
    ||                                    ||
    ||_________________W3_________________||
    |__________________W1__________________|

</pre></div></div>

<p>Now, when enlarging a window vertically, Emacs tries to obtain the
corresponding space from its lower sibling, provided such a window
exists.  In our scenario, enlarging <var class="var">W4</var> will steal space from
<var class="var">W3</var>.
</p>
<div class="example smallexample">
<div class="group"><pre class="example-preformatted">     ______________________________________
    | ____________________________________ |
    ||                                    ||
    ||                                    ||
    ||_________________W2_________________||
    | ____________________________________ |
    ||                                    ||
    ||                                    ||
    ||                                    ||
    ||                                    ||
    ||_________________W4_________________||
    | ____________________________________ |
    ||_________________W3_________________||
    |__________________W1__________________|

</pre></div></div>

<p>Deleting <var class="var">W4</var> will now give its entire space to <var class="var">W2</var>,
including the space earlier stolen from <var class="var">W3</var>.
</p>
<div class="example smallexample">
<div class="group"><pre class="example-preformatted">     ______________________________________
    | ____________________________________ |
    ||                                    ||
    ||                                    ||
    ||                                    ||
    ||                                    ||
    ||                                    ||
    ||                                    ||
    ||                                    ||
    ||                                    ||
    ||_________________W2_________________||
    | ____________________________________ |
    ||_________________W3_________________||
    |__________________W1__________________|

</pre></div></div>

<p>This can be counterintuitive, in particular if <var class="var">W4</var> were used for
displaying a buffer only temporarily (see <a class="pxref" href="Temporary-Displays.html">Temporary Displays</a>), and
you want to continue working with the initial layout.
</p>
<p>The behavior can be fixed by making a new parent window when splitting
<var class="var">W2</var>.  The variable described next allows that to be done.
</p>
<dl class="first-defvr first-defopt-alias-first-defvr">
<dt class="defvr defopt-alias-defvr" id="index-window_002dcombination_002dlimit-1"><span class="category-def">User Option: </span><span><strong class="def-name">window-combination-limit</strong><a class="copiable-link" href="#index-window_002dcombination_002dlimit-1"> &para;</a></span></dt>
<dd><p>This variable controls whether splitting a window shall make a new
parent window.  The following values are recognized:
</p>
<dl class="table">
<dt><code class="code">nil</code></dt>
<dd><p>This means that the new live window is allowed to share the existing
parent window, if one exists, provided the split occurs in the same
direction as the existing window combination (otherwise, a new internal
window is created anyway).
</p>
</dd>
<dt><code class="code">window-size</code></dt>
<dd><p>This means that <code class="code">display-buffer</code> makes a new parent window when it
splits a window and is passed a <code class="code">window-height</code> or
<code class="code">window-width</code> entry in the <var class="var">alist</var> argument (see <a class="pxref" href="Display-Action-Functions.html">Action Functions for <code class="code">display-buffer</code></a>).  Otherwise, window splitting behaves as for a value
of <code class="code">nil</code>.
</p>
</dd>
<dt><code class="code">temp-buffer-resize</code></dt>
<dd><p>In this case <code class="code">with-temp-buffer-window</code> makes a new parent window
when it splits a window and <code class="code">temp-buffer-resize-mode</code> is enabled
(see <a class="pxref" href="Temporary-Displays.html">Temporary Displays</a>).  Otherwise, window splitting behaves as
for <code class="code">nil</code>.
</p>
</dd>
<dt><code class="code">temp-buffer</code></dt>
<dd><p>In this case <code class="code">with-temp-buffer-window</code> always makes a new parent
window when it splits an existing window (see <a class="pxref" href="Temporary-Displays.html">Temporary Displays</a>).
Otherwise, window splitting behaves as for <code class="code">nil</code>.
</p>
</dd>
<dt><code class="code">display-buffer</code></dt>
<dd><p>This means that when <code class="code">display-buffer</code> (see <a class="pxref" href="Choosing-Window.html">Choosing a Window for Display</a>)
splits a window it always makes a new parent window.  Otherwise, window
splitting behaves as for <code class="code">nil</code>.
</p>
</dd>
<dt><code class="code">t</code></dt>
<dd><p>This means that splitting a window always creates a new parent window.
Thus, if the value of this variable is at all times <code class="code">t</code>, then at
all times every window tree is a binary tree (a tree where each window
except the root window has exactly one sibling).
</p></dd>
</dl>

<p>The default is <code class="code">window-size</code>.  Other values are reserved for future
use.
</p>
<p>If, as a consequence of this variable&rsquo;s setting, <code class="code">split-window</code>
makes a new parent window, it also calls
<code class="code">set-window-combination-limit</code> (see below) on the newly-created
internal window.  This affects how the window tree is rearranged when
the child windows are deleted (see below).
</p></dd></dl>

<p>If <code class="code">window-combination-limit</code> is <code class="code">t</code>, splitting <var class="var">W2</var> in
the initial configuration of our scenario would have produced this:
</p>
<div class="example smallexample">
<div class="group"><pre class="example-preformatted">     ______________________________________
    | ____________________________________ |
    || __________________________________ ||
    |||                                  |||
    |||________________W2________________|||
    || __________________________________ ||
    |||                                  |||
    |||________________W4________________|||
    ||_________________W5_________________||
    | ____________________________________ |
    ||                                    ||
    ||                                    ||
    ||_________________W3_________________||
    |__________________W1__________________|

</pre></div></div>

<p>A new internal window <var class="var">W5</var> has been created; its children are
<var class="var">W2</var> and the new live window <var class="var">W4</var>.  Now, <var class="var">W2</var> is the only
sibling of <var class="var">W4</var>, so enlarging <var class="var">W4</var> will try to shrink
<var class="var">W2</var>, leaving <var class="var">W3</var> unaffected.  Observe that <var class="var">W5</var>
represents a vertical combination of two windows embedded in the
vertical combination <var class="var">W1</var>.
</p>
<a class="index-entry-id" id="index-window-combination-limit"></a>
<dl class="first-deffn first-defun-alias-first-deffn">
<dt class="deffn defun-alias-deffn" id="index-set_002dwindow_002dcombination_002dlimit"><span class="category-def">Function: </span><span><strong class="def-name">set-window-combination-limit</strong> <var class="def-var-arguments">window limit</var><a class="copiable-link" href="#index-set_002dwindow_002dcombination_002dlimit"> &para;</a></span></dt>
<dd><p>This function sets the <em class="dfn">combination limit</em> of the window
<var class="var">window</var> to <var class="var">limit</var>.  This value can be retrieved via the
function <code class="code">window-combination-limit</code>.  See below for its effects;
note that it is only meaningful for internal windows.  The
<code class="code">split-window</code> function automatically calls this function, passing
it <code class="code">t</code> as <var class="var">limit</var>, provided the value of the variable
<code class="code">window-combination-limit</code> is <code class="code">t</code> when it is called.
</p></dd></dl>

<dl class="first-deffn first-defun-alias-first-deffn">
<dt class="deffn defun-alias-deffn" id="index-window_002dcombination_002dlimit"><span class="category-def">Function: </span><span><strong class="def-name">window-combination-limit</strong> <var class="def-var-arguments">window</var><a class="copiable-link" href="#index-window_002dcombination_002dlimit"> &para;</a></span></dt>
<dd><p>This function returns the combination limit for <var class="var">window</var>.
</p>
<p>The combination limit is meaningful only for an internal window.  If it
is <code class="code">nil</code>, then Emacs is allowed to automatically delete
<var class="var">window</var>, in response to a window deletion, in order to group the
child windows of <var class="var">window</var> with its sibling windows to form a new
window combination.  If the combination limit is <code class="code">t</code>, the child
windows of <var class="var">window</var> are never automatically recombined with its
siblings.
</p>
<p>If, in the configuration shown at the beginning of this section, the
combination limit of <var class="var">W4</var> (the parent window of <var class="var">W6</var> and
<var class="var">W7</var>) is <code class="code">t</code>, deleting <var class="var">W5</var> will not implicitly delete
<var class="var">W4</var> too.
</p></dd></dl>

<p>Alternatively, the problems sketched above can be avoided by always
resizing all windows in the same combination whenever one of its windows
is split or deleted.  This also permits splitting windows that would be
otherwise too small for such an operation.
</p>
<dl class="first-defvr first-defopt-alias-first-defvr">
<dt class="defvr defopt-alias-defvr" id="index-window_002dcombination_002dresize"><span class="category-def">User Option: </span><span><strong class="def-name">window-combination-resize</strong><a class="copiable-link" href="#index-window_002dcombination_002dresize"> &para;</a></span></dt>
<dd><p>If this variable is <code class="code">nil</code>, <code class="code">split-window</code> can only split a
window (denoted by <var class="var">window</var>) if <var class="var">window</var>&rsquo;s screen area is large
enough to accommodate both itself and the new window.
</p>
<p>If this variable is <code class="code">t</code>, <code class="code">split-window</code> tries to resize all
windows that are part of the same combination as <var class="var">window</var>, in order
to accommodate the new window.  In particular, this may allow
<code class="code">split-window</code> to succeed even if <var class="var">window</var> is a fixed-size
window or too small to ordinarily split.  Furthermore, subsequently
resizing or deleting <var class="var">window</var> may resize all other windows in its
combination.
</p>
<p>The default is <code class="code">nil</code>.  Other values are reserved for future use.  A
specific split operation may ignore the value of this variable if it is
affected by a non-<code class="code">nil</code> value of <code class="code">window-combination-limit</code>.
</p></dd></dl>

<p>To illustrate the effect of <code class="code">window-combination-resize</code>, consider
the following frame layout.
</p>
<div class="example smallexample">
<div class="group"><pre class="example-preformatted">     ______________________________________
    | ____________________________________ |
    ||                                    ||
    ||                                    ||
    ||                                    ||
    ||                                    ||
    ||_________________W2_________________||
    | ____________________________________ |
    ||                                    ||
    ||                                    ||
    ||                                    ||
    ||                                    ||
    ||_________________W3_________________||
    |__________________W1__________________|

</pre></div></div>

<p>If <code class="code">window-combination-resize</code> is <code class="code">nil</code>, splitting window
<var class="var">W3</var> leaves the size of <var class="var">W2</var> unchanged:
</p>
<div class="example smallexample">
<div class="group"><pre class="example-preformatted">     ______________________________________
    | ____________________________________ |
    ||                                    ||
    ||                                    ||
    ||                                    ||
    ||                                    ||
    ||_________________W2_________________||
    | ____________________________________ |
    ||                                    ||
    ||_________________W3_________________||
    | ____________________________________ |
    ||                                    ||
    ||_________________W4_________________||
    |__________________W1__________________|

</pre></div></div>

<p>If <code class="code">window-combination-resize</code> is <code class="code">t</code>, splitting <var class="var">W3</var>
instead leaves all three live windows with approximately the same
height:
</p>
<div class="example smallexample">
<div class="group"><pre class="example-preformatted">     ______________________________________
    | ____________________________________ |
    ||                                    ||
    ||                                    ||
    ||_________________W2_________________||
    | ____________________________________ |
    ||                                    ||
    ||                                    ||
    ||_________________W3_________________||
    | ____________________________________ |
    ||                                    ||
    ||                                    ||
    ||_________________W4_________________||
    |__________________W1__________________|

</pre></div></div>

<p>Deleting any of the live windows <var class="var">W2</var>, <var class="var">W3</var> or <var class="var">W4</var> will
distribute its space proportionally among the two remaining live
windows.
</p>

</div>
<hr>
<div class="nav-panel">
<p>
Next: <a href="Selecting-Windows.html">Selecting Windows</a>, Previous: <a href="Deleting-Windows.html">Deleting Windows</a>, Up: <a href="Windows.html">Windows</a> &nbsp; [<a href="index.html#SEC_Contents" title="Table of contents" rel="contents">Contents</a>][<a href="Index.html" title="Index" rel="index">Index</a>]</p>
</div>



</body>
</html>
