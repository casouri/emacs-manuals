<!DOCTYPE html>
<html>
<!-- Created by GNU Texinfo 7.1, https://www.gnu.org/software/texinfo/ -->
<head>
<meta http-equiv="Content-Type" content="text/html; charset=utf-8">
<!-- This is the GNU Emacs Lisp Reference Manual
corresponding to Emacs version 26.1.

Copyright Â© 1990-1996, 1998-2018 Free Software Foundation, Inc.

Permission is granted to copy, distribute and/or modify this document
under the terms of the GNU Free Documentation License, Version 1.3 or
any later version published by the Free Software Foundation; with the
Invariant Sections being "GNU General Public License," with the
Front-Cover Texts being "A GNU Manual," and with the Back-Cover
Texts as in (a) below.  A copy of the license is included in the
section entitled "GNU Free Documentation License."

(a) The FSF's Back-Cover Text is: "You have the freedom to copy and
modify this GNU manual.  Buying copies from the FSF supports it in
developing GNU and promoting software freedom." -->
<title>Defining Faces (GNU Emacs Lisp Reference Manual)</title>

<meta name="description" content="Defining Faces (GNU Emacs Lisp Reference Manual)">
<meta name="keywords" content="Defining Faces (GNU Emacs Lisp Reference Manual)">
<meta name="resource-type" content="document">
<meta name="distribution" content="global">
<meta name="Generator" content="makeinfo">
<meta name="viewport" content="width=device-width,initial-scale=1">

<link href="index.html" rel="start" title="Top">
<link href="Index.html" rel="index" title="Index">
<link href="index.html#SEC_Contents" rel="contents" title="Table of Contents">
<link href="Faces.html" rel="up" title="Faces">
<link href="Attribute-Functions.html" rel="next" title="Attribute Functions">
<link href="Face-Attributes.html" rel="prev" title="Face Attributes">
<style type="text/css">
<!--
a.copiable-link {visibility: hidden; text-decoration: none; line-height: 0em}
div.example {margin-left: 3.2em}
kbd.kbd {font-style: oblique}
span:hover a.copiable-link {visibility: visible}
strong.def-name {font-family: monospace; font-weight: bold; font-size: larger}
-->
</style>
<link rel="stylesheet" type="text/css" href="./manual.css">


</head>

<body lang="en">
<div class="subsection-level-extent" id="Defining-Faces">
<div class="nav-panel">
<p>
Next: <a href="Attribute-Functions.html" accesskey="n" rel="next">Face Attribute Functions</a>, Previous: <a href="Face-Attributes.html" accesskey="p" rel="prev">Face Attributes</a>, Up: <a href="Faces.html" accesskey="u" rel="up">Faces</a> &nbsp; [<a href="index.html#SEC_Contents" title="Table of contents" rel="contents">Contents</a>][<a href="Index.html" title="Index" rel="index">Index</a>]</p>
</div>
<hr>
<h4 class="subsection" id="Defining-Faces-1"><span>39.12.2 Defining Faces<a class="copiable-link" href="#Defining-Faces-1"> &para;</a></span></h4>
<a class="index-entry-id" id="index-defining-faces"></a>

<a class="index-entry-id" id="index-face-spec"></a>
<p>The usual way to define a face is through the <code class="code">defface</code> macro.
This macro associates a face name (a symbol) with a default <em class="dfn">face
spec</em>.  A face spec is a construct which specifies what attributes a
face should have on any given terminal; for example, a face spec might
specify one foreground color on high-color terminals, and a different
foreground color on low-color terminals.
</p>
<p>People are sometimes tempted to create a variable whose value is a
face name.  In the vast majority of cases, this is not necessary; the
usual procedure is to define a face with <code class="code">defface</code>, and then use
its name directly.
</p>
<dl class="first-deffn first-defmac-alias-first-deffn">
<dt class="deffn defmac-alias-deffn" id="index-defface"><span class="category-def">Macro: </span><span><strong class="def-name">defface</strong> <var class="def-var-arguments">face spec doc [keyword value]&hellip;</var><a class="copiable-link" href="#index-defface"> &para;</a></span></dt>
<dd><p>This macro declares <var class="var">face</var> as a named face whose default face spec
is given by <var class="var">spec</var>.  You should not quote the symbol <var class="var">face</var>,
and it should not end in &lsquo;<samp class="samp">-face</samp>&rsquo; (that would be redundant).  The
argument <var class="var">doc</var> is a documentation string for the face.  The
additional <var class="var">keyword</var> arguments have the same meanings as in
<code class="code">defgroup</code> and <code class="code">defcustom</code> (see <a class="pxref" href="Common-Keywords.html">Common Item Keywords</a>).
</p>
<p>If <var class="var">face</var> already has a default face spec, this macro does
nothing.
</p>
<p>The default face spec determines <var class="var">face</var>&rsquo;s appearance when no
customizations are in effect (see <a class="pxref" href="Customization.html">Customization Settings</a>).  If <var class="var">face</var>
has already been customized (via Custom themes or via customizations
read from the init file), its appearance is determined by the custom
face spec(s), which override the default face spec <var class="var">spec</var>.
However, if the customizations are subsequently removed, the
appearance of <var class="var">face</var> will again be determined by its default face
spec.
</p>
<p>As an exception, if you evaluate a <code class="code">defface</code> form with
<kbd class="kbd">C-M-x</kbd> in Emacs Lisp mode (<code class="code">eval-defun</code>), a special feature
of <code class="code">eval-defun</code> overrides any custom face specs on the face,
causing the face to reflect exactly what the <code class="code">defface</code> says.
</p>
<p>The <var class="var">spec</var> argument is a <em class="dfn">face spec</em>, which states how the
face should appear on different kinds of terminals.  It should be an
alist whose elements each have the form
</p>
<div class="example">
<pre class="example-preformatted">(<var class="var">display</var> . <var class="var">plist</var>)
</pre></div>

<p><var class="var">display</var> specifies a class of terminals (see below).  <var class="var">plist</var>
is a property list of face attributes and their values, specifying how
the face appears on such terminals.  For backward compatibility, you
can also write an element as <code class="code">(<var class="var">display</var> <var class="var">plist</var>)</code>.
</p>
<p>The <var class="var">display</var> part of an element of <var class="var">spec</var> determines which
terminals the element matches.  If more than one element of <var class="var">spec</var>
matches a given terminal, the first element that matches is the one
used for that terminal.  There are three possibilities for
<var class="var">display</var>:
</p>
<dl class="table">
<dt><code class="code">default</code></dt>
<dd><p>This element of <var class="var">spec</var> doesn&rsquo;t match any terminal; instead, it
specifies defaults that apply to all terminals.  This element, if
used, must be the first element of <var class="var">spec</var>.  Each of the following
elements can override any or all of these defaults.
</p>
</dd>
<dt><code class="code">t</code></dt>
<dd><p>This element of <var class="var">spec</var> matches all terminals.  Therefore, any
subsequent elements of <var class="var">spec</var> are never used.  Normally <code class="code">t</code>
is used in the last (or only) element of <var class="var">spec</var>.
</p>
</dd>
<dt>a list</dt>
<dd><p>If <var class="var">display</var> is a list, each element should have the form
<code class="code">(<var class="var">characteristic</var> <var class="var">value</var>&hellip;)</code>.  Here
<var class="var">characteristic</var> specifies a way of classifying terminals, and the
<var class="var">value</var>s are possible classifications which <var class="var">display</var> should
apply to.  Here are the possible values of <var class="var">characteristic</var>:
</p>
<dl class="table">
<dt><code class="code">type</code></dt>
<dd><p>The kind of window system the terminal uses&mdash;either <code class="code">graphic</code>
(any graphics-capable display), <code class="code">x</code>, <code class="code">pc</code> (for the MS-DOS
console), <code class="code">w32</code> (for MS Windows 9X/NT/2K/XP), or <code class="code">tty</code> (a
non-graphics-capable display).  See <a class="xref" href="Window-Systems.html">window-system</a>.
</p>
</dd>
<dt><code class="code">class</code></dt>
<dd><p>What kinds of colors the terminal supports&mdash;either <code class="code">color</code>,
<code class="code">grayscale</code>, or <code class="code">mono</code>.
</p>
</dd>
<dt><code class="code">background</code></dt>
<dd><p>The kind of background&mdash;either <code class="code">light</code> or <code class="code">dark</code>.
</p>
</dd>
<dt><code class="code">min-colors</code></dt>
<dd><p>An integer that represents the minimum number of colors the terminal
should support.  This matches a terminal if its
<code class="code">display-color-cells</code> value is at least the specified integer.
</p>
</dd>
<dt><code class="code">supports</code></dt>
<dd><p>Whether or not the terminal can display the face attributes given in
<var class="var">value</var>&hellip; (see <a class="pxref" href="Face-Attributes.html">Face Attributes</a>).  See <a class="xref" href="Display-Feature-Testing.html#Display-Face-Attribute-Testing">Display Face Attribute Testing</a>, for more information on exactly how this testing
is done.
</p></dd>
</dl>

<p>If an element of <var class="var">display</var> specifies more than one <var class="var">value</var> for
a given <var class="var">characteristic</var>, any of those values is acceptable.  If
<var class="var">display</var> has more than one element, each element should specify a
different <var class="var">characteristic</var>; then <em class="emph">each</em> characteristic of the
terminal must match one of the <var class="var">value</var>s specified for it in
<var class="var">display</var>.
</p></dd>
</dl>
</dd></dl>

<p>For example, here&rsquo;s the definition of the standard face
<code class="code">highlight</code>:
</p>
<div class="example">
<pre class="example-preformatted">(defface highlight
  '((((class color) (min-colors 88) (background light))
     :background &quot;darkseagreen2&quot;)
    (((class color) (min-colors 88) (background dark))
     :background &quot;darkolivegreen&quot;)
    (((class color) (min-colors 16) (background light))
     :background &quot;darkseagreen2&quot;)
    (((class color) (min-colors 16) (background dark))
     :background &quot;darkolivegreen&quot;)
    (((class color) (min-colors 8))
     :background &quot;green&quot; :foreground &quot;black&quot;)
    (t :inverse-video t))
  &quot;Basic face for highlighting.&quot;
  :group 'basic-faces)
</pre></div>

<p>Internally, Emacs stores each face&rsquo;s default spec in its
<code class="code">face-defface-spec</code> symbol property (see <a class="pxref" href="Symbol-Properties.html">Symbol Properties</a>).
The <code class="code">saved-face</code> property stores any face spec saved by the user
using the customization buffer; the <code class="code">customized-face</code> property
stores the face spec customized for the current session, but not
saved; and the <code class="code">theme-face</code> property stores an alist associating
the active customization settings and Custom themes with the face
specs for that face.  The face&rsquo;s documentation string is stored in the
<code class="code">face-documentation</code> property.
</p>
<p>Normally, a face is declared just once, using <code class="code">defface</code>, and
any further changes to its appearance are applied using the Customize
framework (e.g., via the Customize user interface or via the
<code class="code">custom-set-faces</code> function; see <a class="pxref" href="Applying-Customizations.html">Applying Customizations</a>), or
by face remapping (see <a class="pxref" href="Face-Remapping.html">Face Remapping</a>).  In the rare event that
you need to change a face spec directly from Lisp, you can use the
<code class="code">face-spec-set</code> function.
</p>
<dl class="first-deffn first-defun-alias-first-deffn">
<dt class="deffn defun-alias-deffn" id="index-face_002dspec_002dset"><span class="category-def">Function: </span><span><strong class="def-name">face-spec-set</strong> <var class="def-var-arguments">face spec &amp;optional spec-type</var><a class="copiable-link" href="#index-face_002dspec_002dset"> &para;</a></span></dt>
<dd><p>This function applies <var class="var">spec</var> as a face spec for <code class="code">face</code>.
<var class="var">spec</var> should be a face spec, as described in the above
documentation for <code class="code">defface</code>.
</p>
<p>This function also defines <var class="var">face</var> as a valid face name if it is
not already one, and (re)calculates its attributes on existing frames.
</p>
<a class="index-entry-id" id="index-override-spec-_0028for-a-face_0029"></a>
<p>The optional argument <var class="var">spec-type</var> determines which spec to set.
If it is omitted or <code class="code">nil</code> or <code class="code">face-override-spec</code>, this
function sets the <em class="dfn">override spec</em>, which overrides face specs on
<var class="var">face</var> of all the other types mentioned below.  This is useful
when calling this function outside of Custom code.  If <var class="var">spec-type</var>
is <code class="code">customized-face</code> or <code class="code">saved-face</code>, this function sets the
customized spec or the saved custom spec, respectively.  If it is
<code class="code">face-defface-spec</code>, this function sets the default face spec
(the same one set by <code class="code">defface</code>).  If it is <code class="code">reset</code>, this
function clears out all customization specs and override specs from
<var class="var">face</var> (in this case, the value of <var class="var">spec</var> is ignored).  The
effect of any other value of <var class="var">spec-type</var> on the face specs is
reserved for internal use, but the function will still define
<var class="var">face</var> itself and recalculate its attributes, as described above.
</p></dd></dl>

</div>
<hr>
<div class="nav-panel">
<p>
Next: <a href="Attribute-Functions.html">Face Attribute Functions</a>, Previous: <a href="Face-Attributes.html">Face Attributes</a>, Up: <a href="Faces.html">Faces</a> &nbsp; [<a href="index.html#SEC_Contents" title="Table of contents" rel="contents">Contents</a>][<a href="Index.html" title="Index" rel="index">Index</a>]</p>
</div>



</body>
</html>
