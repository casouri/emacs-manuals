<!DOCTYPE html>
<html>
<!-- Created by GNU Texinfo 7.1, https://www.gnu.org/software/texinfo/ -->
<head>
<meta http-equiv="Content-Type" content="text/html; charset=utf-8">
<!-- This is the GNU Emacs Lisp Reference Manual
corresponding to Emacs version 26.1.

Copyright Â© 1990-1996, 1998-2018 Free Software Foundation, Inc.

Permission is granted to copy, distribute and/or modify this document
under the terms of the GNU Free Documentation License, Version 1.3 or
any later version published by the Free Software Foundation; with the
Invariant Sections being "GNU General Public License," with the
Front-Cover Texts being "A GNU Manual," and with the Back-Cover
Texts as in (a) below.  A copy of the license is included in the
section entitled "GNU Free Documentation License."

(a) The FSF's Back-Cover Text is: "You have the freedom to copy and
modify this GNU manual.  Buying copies from the FSF supports it in
developing GNU and promoting software freedom." -->
<title>Composite Types (GNU Emacs Lisp Reference Manual)</title>

<meta name="description" content="Composite Types (GNU Emacs Lisp Reference Manual)">
<meta name="keywords" content="Composite Types (GNU Emacs Lisp Reference Manual)">
<meta name="resource-type" content="document">
<meta name="distribution" content="global">
<meta name="Generator" content="makeinfo">
<meta name="viewport" content="width=device-width,initial-scale=1">

<link href="index.html" rel="start" title="Top">
<link href="Index.html" rel="index" title="Index">
<link href="index.html#SEC_Contents" rel="contents" title="Table of Contents">
<link href="Customization-Types.html" rel="up" title="Customization Types">
<link href="Splicing-into-Lists.html" rel="next" title="Splicing into Lists">
<link href="Simple-Types.html" rel="prev" title="Simple Types">
<style type="text/css">
<!--
a.copiable-link {visibility: hidden; text-decoration: none; line-height: 0em}
div.example {margin-left: 3.2em}
span.r {font-family: initial; font-weight: normal; font-style: normal}
span:hover a.copiable-link {visibility: visible}
ul.mark-bullet {list-style-type: disc}
-->
</style>
<link rel="stylesheet" type="text/css" href="./manual.css">


</head>

<body lang="en">
<div class="subsection-level-extent" id="Composite-Types">
<div class="nav-panel">
<p>
Next: <a href="Splicing-into-Lists.html" accesskey="n" rel="next">Splicing into Lists</a>, Previous: <a href="Simple-Types.html" accesskey="p" rel="prev">Simple Types</a>, Up: <a href="Customization-Types.html" accesskey="u" rel="up">Customization Types</a> &nbsp; [<a href="index.html#SEC_Contents" title="Table of contents" rel="contents">Contents</a>][<a href="Index.html" title="Index" rel="index">Index</a>]</p>
</div>
<hr>
<h4 class="subsection" id="Composite-Types-1"><span>15.4.2 Composite Types<a class="copiable-link" href="#Composite-Types-1"> &para;</a></span></h4>
<a class="index-entry-id" id="index-composite-types-_0028customization_0029"></a>

<p>When none of the simple types is appropriate, you can use composite
types, which build new types from other types or from specified data.
The specified types or data are called the <em class="dfn">arguments</em> of the
composite type.  The composite type normally looks like this:
</p>
<div class="example">
<pre class="example-preformatted">(<var class="var">constructor</var> <var class="var">arguments</var>...)
</pre></div>

<p>but you can also add keyword-value pairs before the arguments, like
this:
</p>
<div class="example">
<pre class="example-preformatted">(<var class="var">constructor</var> <span class="r">{</span><var class="var">keyword</var> <var class="var">value</var><span class="r">}</span>... <var class="var">arguments</var>...)
</pre></div>

<p>Here is a table of constructors and how to use them to write
composite types:
</p>
<dl class="table">
<dt><code class="code">(cons <var class="var">car-type</var> <var class="var">cdr-type</var>)</code></dt>
<dd><p>The value must be a cons cell, its <small class="sc">CAR</small> must fit <var class="var">car-type</var>, and
its <small class="sc">CDR</small> must fit <var class="var">cdr-type</var>.  For example, <code class="code">(cons string
symbol)</code> is a customization type which matches values such as
<code class="code">(&quot;foo&quot; . foo)</code>.
</p>
<p>In the customization buffer, the <small class="sc">CAR</small> and <small class="sc">CDR</small> are displayed
and edited separately, each according to their specified type.
</p>
</dd>
<dt><code class="code">(list <var class="var">element-types</var>&hellip;)</code></dt>
<dd><p>The value must be a list with exactly as many elements as the
<var class="var">element-types</var> given; and each element must fit the
corresponding <var class="var">element-type</var>.
</p>
<p>For example, <code class="code">(list integer string function)</code> describes a list of
three elements; the first element must be an integer, the second a
string, and the third a function.
</p>
<p>In the customization buffer, each element is displayed and edited
separately, according to the type specified for it.
</p>
</dd>
<dt><code class="code">(group <var class="var">element-types</var>&hellip;)</code></dt>
<dd><p>This works like <code class="code">list</code> except for the formatting
of text in the Custom buffer.  <code class="code">list</code> labels each
element value with its tag; <code class="code">group</code> does not.
</p>
</dd>
<dt><code class="code">(vector <var class="var">element-types</var>&hellip;)</code></dt>
<dd><p>Like <code class="code">list</code> except that the value must be a vector instead of a
list.  The elements work the same as in <code class="code">list</code>.
</p>
</dd>
<dt><code class="code">(alist :key-type <var class="var">key-type</var> :value-type <var class="var">value-type</var>)</code></dt>
<dd><p>The value must be a list of cons-cells, the <small class="sc">CAR</small> of each cell
representing a key of customization type <var class="var">key-type</var>, and the
<small class="sc">CDR</small> of the same cell representing a value of customization type
<var class="var">value-type</var>.  The user can add and delete key/value pairs, and
edit both the key and the value of each pair.
</p>
<p>If omitted, <var class="var">key-type</var> and <var class="var">value-type</var> default to
<code class="code">sexp</code>.
</p>
<p>The user can add any key matching the specified key type, but you can
give some keys a preferential treatment by specifying them with the
<code class="code">:options</code> (see <a class="ref" href="Variable-Definitions.html">Defining Customization Variables</a>).  The specified keys
will always be shown in the customize buffer (together with a suitable
value), with a checkbox to include or exclude or disable the key/value
pair from the alist.  The user will not be able to edit the keys
specified by the <code class="code">:options</code> keyword argument.
</p>
<p>The argument to the <code class="code">:options</code> keywords should be a list of
specifications for reasonable keys in the alist.  Ordinarily, they are
simply atoms, which stand for themselves.  For example:
</p>
<div class="example">
<pre class="example-preformatted">:options '(&quot;foo&quot; &quot;bar&quot; &quot;baz&quot;)
</pre></div>

<p>specifies that there are three known keys, namely <code class="code">&quot;foo&quot;</code>,
<code class="code">&quot;bar&quot;</code> and <code class="code">&quot;baz&quot;</code>, which will always be shown first.
</p>
<p>You may want to restrict the value type for specific keys, for
example, the value associated with the <code class="code">&quot;bar&quot;</code> key can only be an
integer.  You can specify this by using a list instead of an atom in
the list.  The first element will specify the key, like before, while
the second element will specify the value type.  For example:
</p>
<div class="example">
<pre class="example-preformatted">:options '(&quot;foo&quot; (&quot;bar&quot; integer) &quot;baz&quot;)
</pre></div>

<p>Finally, you may want to change how the key is presented.  By default,
the key is simply shown as a <code class="code">const</code>, since the user cannot change
the special keys specified with the <code class="code">:options</code> keyword.  However,
you may want to use a more specialized type for presenting the key, like
<code class="code">function-item</code> if you know it is a symbol with a function binding.
This is done by using a customization type specification instead of a
symbol for the key.
</p>
<div class="example">
<pre class="example-preformatted">:options '(&quot;foo&quot;
           ((function-item some-function) integer)
           &quot;baz&quot;)
</pre></div>

<p>Many alists use lists with two elements, instead of cons cells.  For
example,
</p>
<div class="example">
<pre class="example-preformatted">(defcustom list-alist
  '((&quot;foo&quot; 1) (&quot;bar&quot; 2) (&quot;baz&quot; 3))
  &quot;Each element is a list of the form (KEY VALUE).&quot;)
</pre></div>

<p>instead of
</p>
<div class="example">
<pre class="example-preformatted">(defcustom cons-alist
  '((&quot;foo&quot; . 1) (&quot;bar&quot; . 2) (&quot;baz&quot; . 3))
  &quot;Each element is a cons-cell (KEY . VALUE).&quot;)
</pre></div>

<p>Because of the way lists are implemented on top of cons cells, you can
treat <code class="code">list-alist</code> in the example above as a cons cell alist, where
the value type is a list with a single element containing the real
value.
</p>
<div class="example">
<pre class="example-preformatted">(defcustom list-alist '((&quot;foo&quot; 1) (&quot;bar&quot; 2) (&quot;baz&quot; 3))
  &quot;Each element is a list of the form (KEY VALUE).&quot;
  :type '(alist :value-type (group integer)))
</pre></div>

<p>The <code class="code">group</code> widget is used here instead of <code class="code">list</code> only because
the formatting is better suited for the purpose.
</p>
<p>Similarly, you can have alists with more values associated with each
key, using variations of this trick:
</p>
<div class="example">
<pre class="example-preformatted">(defcustom person-data '((&quot;brian&quot;  50 t)
                         (&quot;dorith&quot; 55 nil)
                         (&quot;ken&quot;    52 t))
  &quot;Alist of basic info about people.
Each element has the form (NAME AGE MALE-FLAG).&quot;
  :type '(alist :value-type (group integer boolean)))
</pre></div>

</dd>
<dt><code class="code">(plist :key-type <var class="var">key-type</var> :value-type <var class="var">value-type</var>)</code></dt>
<dd><p>This customization type is similar to <code class="code">alist</code> (see above), except
that (i) the information is stored as a property list,
(see <a class="pxref" href="Property-Lists.html">Property Lists</a>), and (ii) <var class="var">key-type</var>, if omitted,
defaults to <code class="code">symbol</code> rather than <code class="code">sexp</code>.
</p>
</dd>
<dt><code class="code">(choice <var class="var">alternative-types</var>&hellip;)</code></dt>
<dd><p>The value must fit one of <var class="var">alternative-types</var>.  For example,
<code class="code">(choice integer string)</code> allows either an integer or a string.
</p>
<p>In the customization buffer, the user selects an alternative
using a menu, and can then edit the value in the usual way for that
alternative.
</p>
<p>Normally the strings in this menu are determined automatically from the
choices; however, you can specify different strings for the menu by
including the <code class="code">:tag</code> keyword in the alternatives.  For example, if
an integer stands for a number of spaces, while a string is text to use
verbatim, you might write the customization type this way,
</p>
<div class="example">
<pre class="example-preformatted">(choice (integer :tag &quot;Number of spaces&quot;)
        (string :tag &quot;Literal text&quot;))
</pre></div>

<p>so that the menu offers &lsquo;<samp class="samp">Number of spaces</samp>&rsquo; and &lsquo;<samp class="samp">Literal text</samp>&rsquo;.
</p>
<p>In any alternative for which <code class="code">nil</code> is not a valid value, other than
a <code class="code">const</code>, you should specify a valid default for that alternative
using the <code class="code">:value</code> keyword.  See <a class="xref" href="Type-Keywords.html">Type Keywords</a>.
</p>
<p>If some values are covered by more than one of the alternatives,
customize will choose the first alternative that the value fits.  This
means you should always list the most specific types first, and the
most general last.  Here&rsquo;s an example of proper usage:
</p>
<div class="example">
<pre class="example-preformatted">(choice (const :tag &quot;Off&quot; nil)
        symbol (sexp :tag &quot;Other&quot;))
</pre></div>

<p>This way, the special value <code class="code">nil</code> is not treated like other
symbols, and symbols are not treated like other Lisp expressions.
</p>
</dd>
<dt><a id="index-radio_002c-customization-types"></a><span><code class="code">(radio <var class="var">element-types</var>&hellip;)</code><a class="copiable-link" href="#index-radio_002c-customization-types"> &para;</a></span></dt>
<dd><p>This is similar to <code class="code">choice</code>, except that the choices are displayed
using radio buttons rather than a menu.  This has the advantage of
displaying documentation for the choices when applicable and so is often
a good choice for a choice between constant functions
(<code class="code">function-item</code> customization types).
</p>
</dd>
<dt><code class="code">(const <var class="var">value</var>)</code></dt>
<dd><p>The value must be <var class="var">value</var>&mdash;nothing else is allowed.
</p>
<p>The main use of <code class="code">const</code> is inside of <code class="code">choice</code>.  For example,
<code class="code">(choice integer (const nil))</code> allows either an integer or
<code class="code">nil</code>.
</p>
<p><code class="code">:tag</code> is often used with <code class="code">const</code>, inside of <code class="code">choice</code>.
For example,
</p>
<div class="example">
<pre class="example-preformatted">(choice (const :tag &quot;Yes&quot; t)
        (const :tag &quot;No&quot; nil)
        (const :tag &quot;Ask&quot; foo))
</pre></div>

<p>describes a variable for which <code class="code">t</code> means yes, <code class="code">nil</code> means no,
and <code class="code">foo</code> means &ldquo;ask&rdquo;.
</p>
</dd>
<dt><code class="code">(other <var class="var">value</var>)</code></dt>
<dd><p>This alternative can match any Lisp value, but if the user chooses this
alternative, that selects the value <var class="var">value</var>.
</p>
<p>The main use of <code class="code">other</code> is as the last element of <code class="code">choice</code>.
For example,
</p>
<div class="example">
<pre class="example-preformatted">(choice (const :tag &quot;Yes&quot; t)
        (const :tag &quot;No&quot; nil)
        (other :tag &quot;Ask&quot; foo))
</pre></div>

<p>describes a variable for which <code class="code">t</code> means yes, <code class="code">nil</code> means no,
and anything else means &ldquo;ask&rdquo;.  If the user chooses &lsquo;<samp class="samp">Ask</samp>&rsquo; from
the menu of alternatives, that specifies the value <code class="code">foo</code>; but any
other value (not <code class="code">t</code>, <code class="code">nil</code> or <code class="code">foo</code>) displays as
&lsquo;<samp class="samp">Ask</samp>&rsquo;, just like <code class="code">foo</code>.
</p>
</dd>
<dt><code class="code">(function-item <var class="var">function</var>)</code></dt>
<dd><p>Like <code class="code">const</code>, but used for values which are functions.  This
displays the documentation string as well as the function name.
The documentation string is either the one you specify with
<code class="code">:doc</code>, or <var class="var">function</var>&rsquo;s own documentation string.
</p>
</dd>
<dt><code class="code">(variable-item <var class="var">variable</var>)</code></dt>
<dd><p>Like <code class="code">const</code>, but used for values which are variable names.  This
displays the documentation string as well as the variable name.  The
documentation string is either the one you specify with <code class="code">:doc</code>, or
<var class="var">variable</var>&rsquo;s own documentation string.
</p>
</dd>
<dt><code class="code">(set <var class="var">types</var>&hellip;)</code></dt>
<dd><p>The value must be a list, and each element of the list must match one of
the <var class="var">types</var> specified.
</p>
<p>This appears in the customization buffer as a checklist, so that each of
<var class="var">types</var> may have either one corresponding element or none.  It is
not possible to specify two different elements that match the same one
of <var class="var">types</var>.  For example, <code class="code">(set integer symbol)</code> allows one
integer and/or one symbol in the list; it does not allow multiple
integers or multiple symbols.  As a result, it is rare to use
nonspecific types such as <code class="code">integer</code> in a <code class="code">set</code>.
</p>
<p>Most often, the <var class="var">types</var> in a <code class="code">set</code> are <code class="code">const</code> types, as
shown here:
</p>
<div class="example">
<pre class="example-preformatted">(set (const :bold) (const :italic))
</pre></div>

<p>Sometimes they describe possible elements in an alist:
</p>
<div class="example">
<pre class="example-preformatted">(set (cons :tag &quot;Height&quot; (const height) integer)
     (cons :tag &quot;Width&quot; (const width) integer))
</pre></div>

<p>That lets the user specify a height value optionally
and a width value optionally.
</p>
</dd>
<dt><code class="code">(repeat <var class="var">element-type</var>)</code></dt>
<dd><p>The value must be a list and each element of the list must fit the type
<var class="var">element-type</var>.  This appears in the customization buffer as a
list of elements, with &lsquo;<samp class="samp">[INS]</samp>&rsquo; and &lsquo;<samp class="samp">[DEL]</samp>&rsquo; buttons for adding
more elements or removing elements.
</p>
</dd>
<dt><a id="index-restricted_002dsexp_002c-customization-types"></a><span><code class="code">(restricted-sexp :match-alternatives <var class="var">criteria</var>)</code><a class="copiable-link" href="#index-restricted_002dsexp_002c-customization-types"> &para;</a></span></dt>
<dd><p>This is the most general composite type construct.  The value may be
any Lisp object that satisfies one of <var class="var">criteria</var>.  <var class="var">criteria</var>
should be a list, and each element should be one of these
possibilities:
</p>
<ul class="itemize mark-bullet">
<li>A predicate&mdash;that is, a function of one argument that has no side
effects, and returns either <code class="code">nil</code> or non-<code class="code">nil</code> according to
the argument.  Using a predicate in the list says that objects for which
the predicate returns non-<code class="code">nil</code> are acceptable.

</li><li>A quoted constant&mdash;that is, <code class="code">'<var class="var">object</var></code>.  This sort of element
in the list says that <var class="var">object</var> itself is an acceptable value.
</li></ul>

<p>For example,
</p>
<div class="example">
<pre class="example-preformatted">(restricted-sexp :match-alternatives
                 (integerp 't 'nil))
</pre></div>

<p>allows integers, <code class="code">t</code> and <code class="code">nil</code> as legitimate values.
</p>
<p>The customization buffer shows all legitimate values using their read
syntax, and the user edits them textually.
</p></dd>
</dl>

<p>Here is a table of the keywords you can use in keyword-value pairs
in a composite type:
</p>
<dl class="table">
<dt><code class="code">:tag <var class="var">tag</var></code></dt>
<dd><p>Use <var class="var">tag</var> as the name of this alternative, for user communication
purposes.  This is useful for a type that appears inside of a
<code class="code">choice</code>.
</p>
</dd>
<dt><a id="index-match_002dalternatives_002c-customization-keyword"></a><span><code class="code">:match-alternatives <var class="var">criteria</var></code><a class="copiable-link" href="#index-match_002dalternatives_002c-customization-keyword"> &para;</a></span></dt>
<dd><p>Use <var class="var">criteria</var> to match possible values.  This is used only in
<code class="code">restricted-sexp</code>.
</p>
</dd>
<dt><a id="index-args_002c-customization-keyword"></a><span><code class="code">:args <var class="var">argument-list</var></code><a class="copiable-link" href="#index-args_002c-customization-keyword"> &para;</a></span></dt>
<dd><p>Use the elements of <var class="var">argument-list</var> as the arguments of the type
construct.  For instance, <code class="code">(const :args (foo))</code> is equivalent to
<code class="code">(const foo)</code>.  You rarely need to write <code class="code">:args</code> explicitly,
because normally the arguments are recognized automatically as
whatever follows the last keyword-value pair.
</p></dd>
</dl>

</div>
<hr>
<div class="nav-panel">
<p>
Next: <a href="Splicing-into-Lists.html">Splicing into Lists</a>, Previous: <a href="Simple-Types.html">Simple Types</a>, Up: <a href="Customization-Types.html">Customization Types</a> &nbsp; [<a href="index.html#SEC_Contents" title="Table of contents" rel="contents">Contents</a>][<a href="Index.html" title="Index" rel="index">Index</a>]</p>
</div>



</body>
</html>
