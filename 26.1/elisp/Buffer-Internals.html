<!DOCTYPE html>
<html>
<!-- Created by GNU Texinfo 7.1, https://www.gnu.org/software/texinfo/ -->
<head>
<meta http-equiv="Content-Type" content="text/html; charset=utf-8">
<!-- This is the GNU Emacs Lisp Reference Manual
corresponding to Emacs version 26.1.

Copyright Â© 1990-1996, 1998-2018 Free Software Foundation, Inc.

Permission is granted to copy, distribute and/or modify this document
under the terms of the GNU Free Documentation License, Version 1.3 or
any later version published by the Free Software Foundation; with the
Invariant Sections being "GNU General Public License," with the
Front-Cover Texts being "A GNU Manual," and with the Back-Cover
Texts as in (a) below.  A copy of the license is included in the
section entitled "GNU Free Documentation License."

(a) The FSF's Back-Cover Text is: "You have the freedom to copy and
modify this GNU manual.  Buying copies from the FSF supports it in
developing GNU and promoting software freedom." -->
<title>Buffer Internals (GNU Emacs Lisp Reference Manual)</title>

<meta name="description" content="Buffer Internals (GNU Emacs Lisp Reference Manual)">
<meta name="keywords" content="Buffer Internals (GNU Emacs Lisp Reference Manual)">
<meta name="resource-type" content="document">
<meta name="distribution" content="global">
<meta name="Generator" content="makeinfo">
<meta name="viewport" content="width=device-width,initial-scale=1">

<link href="index.html" rel="start" title="Top">
<link href="Index.html" rel="index" title="Index">
<link href="index.html#SEC_Contents" rel="contents" title="Table of Contents">
<link href="Object-Internals.html" rel="up" title="Object Internals">
<link href="Window-Internals.html" rel="next" title="Window Internals">
<style type="text/css">
<!--
a.copiable-link {visibility: hidden; text-decoration: none; line-height: 0em}
span:hover a.copiable-link {visibility: visible}
-->
</style>
<link rel="stylesheet" type="text/css" href="./manual.css">


</head>

<body lang="en">
<div class="subsection-level-extent" id="Buffer-Internals">
<div class="nav-panel">
<p>
Next: <a href="Window-Internals.html" accesskey="n" rel="next">Window Internals</a>, Up: <a href="Object-Internals.html" accesskey="u" rel="up">Object Internals</a> &nbsp; [<a href="index.html#SEC_Contents" title="Table of contents" rel="contents">Contents</a>][<a href="Index.html" title="Index" rel="index">Index</a>]</p>
</div>
<hr>
<h4 class="subsection" id="Buffer-Internals-1"><span>E.8.1 Buffer Internals<a class="copiable-link" href="#Buffer-Internals-1"> &para;</a></span></h4>
<a class="index-entry-id" id="index-internals_002c-of-buffer"></a>
<a class="index-entry-id" id="index-buffer-internals"></a>

<p>Two structures (see <samp class="file">buffer.h</samp>) are used to represent buffers
in C.  The <code class="code">buffer_text</code> structure contains fields describing the
text of a buffer; the <code class="code">buffer</code> structure holds other fields.  In
the case of indirect buffers, two or more <code class="code">buffer</code> structures
reference the same <code class="code">buffer_text</code> structure.
</p>
<p>Here are some of the fields in <code class="code">struct buffer_text</code>:
</p>
<dl class="table">
<dt><code class="code">beg</code></dt>
<dd><p>The address of the buffer contents.
</p>
</dd>
<dt><code class="code">gpt</code></dt>
<dt><code class="code">gpt_byte</code></dt>
<dd><p>The character and byte positions of the buffer gap.  See <a class="xref" href="Buffer-Gap.html">The Buffer Gap</a>.
</p>
</dd>
<dt><code class="code">z</code></dt>
<dt><code class="code">z_byte</code></dt>
<dd><p>The character and byte positions of the end of the buffer text.
</p>
</dd>
<dt><code class="code">gap_size</code></dt>
<dd><p>The size of buffer&rsquo;s gap.  See <a class="xref" href="Buffer-Gap.html">The Buffer Gap</a>.
</p>
</dd>
<dt><code class="code">modiff</code></dt>
<dt><code class="code">save_modiff</code></dt>
<dt><code class="code">chars_modiff</code></dt>
<dt><code class="code">overlay_modiff</code></dt>
<dd><p>These fields count the number of buffer-modification events performed
in this buffer.  <code class="code">modiff</code> is incremented after each
buffer-modification event, and is never otherwise changed;
<code class="code">save_modiff</code> contains the value of <code class="code">modiff</code> the last time
the buffer was visited or saved; <code class="code">chars_modiff</code> counts only
modifications to the characters in the buffer, ignoring all other
kinds of changes; and <code class="code">overlay_modiff</code> counts only modifications
to the overlays.
</p>
</dd>
<dt><code class="code">beg_unchanged</code></dt>
<dt><code class="code">end_unchanged</code></dt>
<dd><p>The number of characters at the start and end of the text that are
known to be unchanged since the last complete redisplay.
</p>
</dd>
<dt><code class="code">unchanged_modified</code></dt>
<dt><code class="code">overlay_unchanged_modified</code></dt>
<dd><p>The values of <code class="code">modiff</code> and <code class="code">overlay_modiff</code>, respectively,
after the last complete redisplay.  If their current values match
<code class="code">modiff</code> or <code class="code">overlay_modiff</code>, that means
<code class="code">beg_unchanged</code> and <code class="code">end_unchanged</code> contain no useful
information.
</p>
</dd>
<dt><code class="code">markers</code></dt>
<dd><p>The markers that refer to this buffer.  This is actually a single
marker, and successive elements in its marker <code class="code">chain</code> are the other
markers referring to this buffer text.
</p>
</dd>
<dt><code class="code">intervals</code></dt>
<dd><p>The interval tree which records the text properties of this buffer.
</p></dd>
</dl>

<p>Some of the fields of <code class="code">struct buffer</code> are:
</p>
<dl class="table">
<dt><code class="code">header</code></dt>
<dd><p>A header of type <code class="code">union vectorlike_header</code> is common to all
vectorlike objects.
</p>
</dd>
<dt><code class="code">own_text</code></dt>
<dd><p>A <code class="code">struct buffer_text</code> structure that ordinarily holds the buffer
contents.  In indirect buffers, this field is not used.
</p>
</dd>
<dt><code class="code">text</code></dt>
<dd><p>A pointer to the <code class="code">buffer_text</code> structure for this buffer.  In an
ordinary buffer, this is the <code class="code">own_text</code> field above.  In an
indirect buffer, this is the <code class="code">own_text</code> field of the base buffer.
</p>
</dd>
<dt><code class="code">next</code></dt>
<dd><p>A pointer to the next buffer, in the chain of all buffers, including
killed buffers.  This chain is used only for allocation and garbage
collection, in order to collect killed buffers properly.
</p>
</dd>
<dt><code class="code">pt</code></dt>
<dt><code class="code">pt_byte</code></dt>
<dd><p>The character and byte positions of point in a buffer.
</p>
</dd>
<dt><code class="code">begv</code></dt>
<dt><code class="code">begv_byte</code></dt>
<dd><p>The character and byte positions of the beginning of the accessible
range of text in the buffer.
</p>
</dd>
<dt><code class="code">zv</code></dt>
<dt><code class="code">zv_byte</code></dt>
<dd><p>The character and byte positions of the end of the accessible range of
text in the buffer.
</p>
</dd>
<dt><code class="code">base_buffer</code></dt>
<dd><p>In an indirect buffer, this points to the base buffer.  In an ordinary
buffer, it is null.
</p>
</dd>
<dt><code class="code">local_flags</code></dt>
<dd><p>This field contains flags indicating that certain variables are local
in this buffer.  Such variables are declared in the C code using
<code class="code">DEFVAR_PER_BUFFER</code>, and their buffer-local bindings are stored
in fields in the buffer structure itself.  (Some of these fields are
described in this table.)
</p>
</dd>
<dt><code class="code">modtime</code></dt>
<dd><p>The modification time of the visited file.  It is set when the file is
written or read.  Before writing the buffer into a file, this field is
compared to the modification time of the file to see if the file has
changed on disk.  See <a class="xref" href="Buffer-Modification.html">Buffer Modification</a>.
</p>
</dd>
<dt><code class="code">auto_save_modified</code></dt>
<dd><p>The time when the buffer was last auto-saved.
</p>
</dd>
<dt><code class="code">last_window_start</code></dt>
<dd><p>The <code class="code">window-start</code> position in the buffer as of the last time the
buffer was displayed in a window.
</p>
</dd>
<dt><code class="code">clip_changed</code></dt>
<dd><p>This flag indicates that narrowing has changed in the buffer.
See <a class="xref" href="Narrowing.html">Narrowing</a>.
</p>
</dd>
<dt><code class="code">prevent_redisplay_optimizations_p</code></dt>
<dd><p>This flag indicates that redisplay optimizations should not be used to
display this buffer.
</p>
</dd>
<dt><code class="code">overlay_center</code></dt>
<dd><p>This field holds the current overlay center position.  See <a class="xref" href="Managing-Overlays.html">Managing Overlays</a>.
</p>
</dd>
<dt><code class="code">overlays_before</code></dt>
<dt><code class="code">overlays_after</code></dt>
<dd><p>These fields hold, respectively, a list of overlays that end at or
before the current overlay center, and a list of overlays that end
after the current overlay center.  See <a class="xref" href="Managing-Overlays.html">Managing Overlays</a>.
<code class="code">overlays_before</code> is sorted in order of decreasing end position,
and <code class="code">overlays_after</code> is sorted in order of increasing beginning
position.
</p>

</dd>
<dt><code class="code">name</code></dt>
<dd><p>A Lisp string that names the buffer.  It is guaranteed to be unique.
See <a class="xref" href="Buffer-Names.html">Buffer Names</a>.
</p>
</dd>
<dt><code class="code">save_length</code></dt>
<dd><p>The length of the file this buffer is visiting, when last read or
saved.  This and other fields concerned with saving are not kept in
the <code class="code">buffer_text</code> structure because indirect buffers are never
saved.
</p>
</dd>
<dt><code class="code">directory</code></dt>
<dd><p>The directory for expanding relative file names.  This is the value of
the buffer-local variable <code class="code">default-directory</code> (see <a class="pxref" href="File-Name-Expansion.html">Functions that Expand Filenames</a>).
</p>
</dd>
<dt><code class="code">filename</code></dt>
<dd><p>The name of the file visited in this buffer, or <code class="code">nil</code>.  This is
the value of the buffer-local variable <code class="code">buffer-file-name</code>
(see <a class="pxref" href="Buffer-File-Name.html">Buffer File Name</a>).
</p>
</dd>
<dt><code class="code">undo_list</code></dt>
<dt><code class="code">backed_up</code></dt>
<dt><code class="code">auto_save_file_name</code></dt>
<dt><code class="code">auto_save_file_format</code></dt>
<dt><code class="code">read_only</code></dt>
<dt><code class="code">file_format</code></dt>
<dt><code class="code">file_truename</code></dt>
<dt><code class="code">invisibility_spec</code></dt>
<dt><code class="code">display_count</code></dt>
<dt><code class="code">display_time</code></dt>
<dd><p>These fields store the values of Lisp variables that are automatically
buffer-local (see <a class="pxref" href="Buffer_002dLocal-Variables.html">Buffer-Local Variables</a>), whose corresponding
variable names have the additional prefix <code class="code">buffer-</code> and have
underscores replaced with dashes.  For instance, <code class="code">undo_list</code>
stores the value of <code class="code">buffer-undo-list</code>.
</p>
</dd>
<dt><code class="code">mark</code></dt>
<dd><p>The mark for the buffer.  The mark is a marker, hence it is also
included on the list <code class="code">markers</code>.  See <a class="xref" href="The-Mark.html">The Mark</a>.
</p>
</dd>
<dt><code class="code">local_var_alist</code></dt>
<dd><p>The association list describing the buffer-local variable bindings of
this buffer, not including the built-in buffer-local bindings that
have special slots in the buffer object.  (Those slots are omitted
from this table.)  See <a class="xref" href="Buffer_002dLocal-Variables.html">Buffer-Local Variables</a>.
</p>
</dd>
<dt><code class="code">major_mode</code></dt>
<dd><p>Symbol naming the major mode of this buffer, e.g., <code class="code">lisp-mode</code>.
</p>
</dd>
<dt><code class="code">mode_name</code></dt>
<dd><p>Pretty name of the major mode, e.g., <code class="code">&quot;Lisp&quot;</code>.
</p>
</dd>
<dt><code class="code">keymap</code></dt>
<dt><code class="code">abbrev_table</code></dt>
<dt><code class="code">syntax_table</code></dt>
<dt><code class="code">category_table</code></dt>
<dt><code class="code">display_table</code></dt>
<dd><p>These fields store the buffer&rsquo;s local keymap (see <a class="pxref" href="Keymaps.html">Keymaps</a>), abbrev
table (see <a class="pxref" href="Abbrev-Tables.html">Abbrev Tables</a>), syntax table (see <a class="pxref" href="Syntax-Tables.html">Syntax Tables</a>),
category table (see <a class="pxref" href="Categories.html">Categories</a>), and display table (see <a class="pxref" href="Display-Tables.html">Display Tables</a>).
</p>
</dd>
<dt><code class="code">downcase_table</code></dt>
<dt><code class="code">upcase_table</code></dt>
<dt><code class="code">case_canon_table</code></dt>
<dd><p>These fields store the conversion tables for converting text to lower
case, upper case, and for canonicalizing text for case-fold search.
See <a class="xref" href="Case-Tables.html">The Case Table</a>.
</p>
</dd>
<dt><code class="code">minor_modes</code></dt>
<dd><p>An alist of the minor modes of this buffer.
</p>
</dd>
<dt><code class="code">pt_marker</code></dt>
<dt><code class="code">begv_marker</code></dt>
<dt><code class="code">zv_marker</code></dt>
<dd><p>These fields are only used in an indirect buffer, or in a buffer that
is the base of an indirect buffer.  Each holds a marker that records
<code class="code">pt</code>, <code class="code">begv</code>, and <code class="code">zv</code> respectively, for this buffer
when the buffer is not current.
</p>
</dd>
<dt><code class="code">mode_line_format</code></dt>
<dt><code class="code">header_line_format</code></dt>
<dt><code class="code">case_fold_search</code></dt>
<dt><code class="code">tab_width</code></dt>
<dt><code class="code">fill_column</code></dt>
<dt><code class="code">left_margin</code></dt>
<dt><code class="code">auto_fill_function</code></dt>
<dt><code class="code">truncate_lines</code></dt>
<dt><code class="code">word_wrap</code></dt>
<dt><code class="code">ctl_arrow</code></dt>
<dt><code class="code">bidi_display_reordering</code></dt>
<dt><code class="code">bidi_paragraph_direction</code></dt>
<dt><code class="code">selective_display</code></dt>
<dt><code class="code">selective_display_ellipses</code></dt>
<dt><code class="code">overwrite_mode</code></dt>
<dt><code class="code">abbrev_mode</code></dt>
<dt><code class="code">mark_active</code></dt>
<dt><code class="code">enable_multibyte_characters</code></dt>
<dt><code class="code">buffer_file_coding_system</code></dt>
<dt><code class="code">cache_long_line_scans</code></dt>
<dt><code class="code">point_before_scroll</code></dt>
<dt><code class="code">left_fringe_width</code></dt>
<dt><code class="code">right_fringe_width</code></dt>
<dt><code class="code">fringes_outside_margins</code></dt>
<dt><code class="code">scroll_bar_width</code></dt>
<dt><code class="code">indicate_empty_lines</code></dt>
<dt><code class="code">indicate_buffer_boundaries</code></dt>
<dt><code class="code">fringe_indicator_alist</code></dt>
<dt><code class="code">fringe_cursor_alist</code></dt>
<dt><code class="code">scroll_up_aggressively</code></dt>
<dt><code class="code">scroll_down_aggressively</code></dt>
<dt><code class="code">cursor_type</code></dt>
<dt><code class="code">cursor_in_non_selected_windows</code></dt>
<dd><p>These fields store the values of Lisp variables that are automatically
buffer-local (see <a class="pxref" href="Buffer_002dLocal-Variables.html">Buffer-Local Variables</a>), whose corresponding
variable names have underscores replaced with dashes.  For instance,
<code class="code">mode_line_format</code> stores the value of <code class="code">mode-line-format</code>.
</p>
</dd>
<dt><code class="code">last_selected_window</code></dt>
<dd><p>This is the last window that was selected with this buffer in it, or <code class="code">nil</code>
if that window no longer displays this buffer.
</p></dd>
</dl>

</div>
<hr>
<div class="nav-panel">
<p>
Next: <a href="Window-Internals.html">Window Internals</a>, Up: <a href="Object-Internals.html">Object Internals</a> &nbsp; [<a href="index.html#SEC_Contents" title="Table of contents" rel="contents">Contents</a>][<a href="Index.html" title="Index" rel="index">Index</a>]</p>
</div>



</body>
</html>
