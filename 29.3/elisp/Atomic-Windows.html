<!DOCTYPE html>
<html>
<!-- Created by GNU Texinfo 7.1, https://www.gnu.org/software/texinfo/ -->
<head>
<meta http-equiv="Content-Type" content="text/html; charset=utf-8">
<!-- This is the GNU Emacs Lisp Reference Manual
corresponding to Emacs version 29.3.

Copyright Â© 1990-1996, 1998-2024 Free Software Foundation,
Inc.

Permission is granted to copy, distribute and/or modify this document
under the terms of the GNU Free Documentation License, Version 1.3 or
any later version published by the Free Software Foundation; with the
Invariant Sections being "GNU General Public License," with the
Front-Cover Texts being "A GNU Manual," and with the Back-Cover
Texts as in (a) below.  A copy of the license is included in the
section entitled "GNU Free Documentation License."

(a) The FSF's Back-Cover Text is: "You have the freedom to copy and
modify this GNU manual.  Buying copies from the FSF supports it in
developing GNU and promoting software freedom." -->
<title>Atomic Windows (GNU Emacs Lisp Reference Manual)</title>

<meta name="description" content="Atomic Windows (GNU Emacs Lisp Reference Manual)">
<meta name="keywords" content="Atomic Windows (GNU Emacs Lisp Reference Manual)">
<meta name="resource-type" content="document">
<meta name="distribution" content="global">
<meta name="Generator" content="makeinfo">
<meta name="viewport" content="width=device-width,initial-scale=1">

<link href="index.html" rel="start" title="Top">
<link href="Index.html" rel="index" title="Index">
<link href="index.html#SEC_Contents" rel="contents" title="Table of Contents">
<link href="Windows.html" rel="up" title="Windows">
<link href="Window-Point.html" rel="next" title="Window Point">
<link href="Side-Windows.html" rel="prev" title="Side Windows">
<style type="text/css">
<!--
a.copiable-link {visibility: hidden; text-decoration: none; line-height: 0em}
div.example {margin-left: 3.2em}
kbd.kbd {font-style: oblique}
span:hover a.copiable-link {visibility: visible}
strong.def-name {font-family: monospace; font-weight: bold; font-size: larger}
ul.mark-bullet {list-style-type: disc}
-->
</style>
<link rel="stylesheet" type="text/css" href="./manual.css">


</head>

<body lang="en">
<div class="section-level-extent" id="Atomic-Windows">
<div class="nav-panel">
<p>
Next: <a href="Window-Point.html" accesskey="n" rel="next">Windows and Point</a>, Previous: <a href="Side-Windows.html" accesskey="p" rel="prev">Side Windows</a>, Up: <a href="Windows.html" accesskey="u" rel="up">Windows</a> &nbsp; [<a href="index.html#SEC_Contents" title="Table of contents" rel="contents">Contents</a>][<a href="Index.html" title="Index" rel="index">Index</a>]</p>
</div>
<hr>
<h3 class="section" id="Atomic-Windows-1"><span>29.18 Atomic Windows<a class="copiable-link" href="#Atomic-Windows-1"> &para;</a></span></h3>
<a class="index-entry-id" id="index-atomic-windows"></a>

<p>Atomic windows are rectangular compositions of at least two live
windows.  They have the following distinctive characteristics:
</p>
<ul class="itemize mark-bullet">
<li>The function <code class="code">split-window</code> (see <a class="pxref" href="Splitting-Windows.html">Splitting Windows</a>), when
applied to a constituent of an atomic window, will try to create the new
window outside of the atomic window.

</li><li>The function <code class="code">delete-window</code> (see <a class="pxref" href="Deleting-Windows.html">Deleting Windows</a>), when
applied to a constituent of an atomic window, will try to delete the
entire atomic window instead.

</li><li>The function <code class="code">delete-other-windows</code> (see <a class="pxref" href="Deleting-Windows.html">Deleting Windows</a>),
when applied to a constituent of an atomic window, will try to make the
atomic window fill its frame or main window (see <a class="pxref" href="Side-Windows.html">Side Windows</a>).
</li></ul>

<p>This means that the basic groups of functions that alter the window
structure treat an atomic window like a live one, thus preserving the
internal structure of the atomic window.
</p>
<p>Atomic windows are useful to construct and preserve window layouts
that are meaningful only when all involved buffers are shown
simultaneously in a specific manner, such as when showing differences
between file revisions, or the same text in different languages or
markups.  They can also be used to permanently display information
pertinent to a specific window in bars on that window&rsquo;s sides.
</p>
<a class="index-entry-id" id="index-root-window-of-atomic-window"></a>
<p>Atomic windows are implemented with the help of the reserved
<code class="code">window-atom</code> window parameter (see <a class="pxref" href="Window-Parameters.html">Window Parameters</a>) and an
internal window (see <a class="pxref" href="Basic-Windows.html">Basic Concepts of Emacs Windows</a>) called the root window of the
atomic window.  All windows that are part of the same atomic window have
this root window as their common ancestor and are assigned a
non-<code class="code">nil</code> <code class="code">window-atom</code> parameter.
</p>
<p>The following function returns the root of the atomic window a
specified window is part of:
</p>
<dl class="first-deffn first-defun-alias-first-deffn">
<dt class="deffn defun-alias-deffn" id="index-window_002datom_002droot"><span class="category-def">Function: </span><span><strong class="def-name">window-atom-root</strong> <var class="def-var-arguments">&amp;optional window</var><a class="copiable-link" href="#index-window_002datom_002droot"> &para;</a></span></dt>
<dd><p>This functions returns the root of the atomic window <var class="var">window</var> is a
part of.  The specified <var class="var">window</var> must be a valid window and defaults
to the selected one.  It returns <code class="code">nil</code> if <var class="var">window</var> is not part
of an atomic window.
</p></dd></dl>

<p>The most simple approach to make a new atomic window is to take an
existing internal window and apply the following function:
</p>
<dl class="first-deffn first-defun-alias-first-deffn">
<dt class="deffn defun-alias-deffn" id="index-window_002dmake_002datom"><span class="category-def">Function: </span><span><strong class="def-name">window-make-atom</strong> <var class="def-var-arguments">window</var><a class="copiable-link" href="#index-window_002dmake_002datom"> &para;</a></span></dt>
<dd><p>This function converts <var class="var">window</var> into an atomic window.  The
specified <var class="var">window</var> must be an internal window.  All this function
does is to set the <code class="code">window-atom</code> parameter of each descendant of
<var class="var">window</var> to <code class="code">t</code>.
</p></dd></dl>

<p>To create a new atomic window from an existing live window or to add a
new window to an existing atomic window, the following buffer display
action function (see <a class="pxref" href="Buffer-Display-Action-Functions.html">Action Functions for Buffer Display</a>) can be used:
</p>
<dl class="first-deffn first-defun-alias-first-deffn">
<dt class="deffn defun-alias-deffn" id="index-display_002dbuffer_002din_002datom_002dwindow"><span class="category-def">Function: </span><span><strong class="def-name">display-buffer-in-atom-window</strong> <var class="def-var-arguments">buffer alist</var><a class="copiable-link" href="#index-display_002dbuffer_002din_002datom_002dwindow"> &para;</a></span></dt>
<dd><p>This function tries to display <var class="var">buffer</var> in a new window that will be
combined with an existing window to form an atomic window.  If the
existing window is already part of an atomic window, it adds the new
window to that atomic window.
</p>
<p>The specified <var class="var">alist</var> is an association list of symbols and values.
The following symbols have a special meaning:
</p>
<dl class="table">
<dt><code class="code">window</code></dt>
<dd><p>The value of such an element specifies an existing window the new window
shall be combined with.  If it specifies an internal window, all
children of that window become part of the atomic window too.  If no
window is specified, the new window becomes a sibling of the selected
window.  The <code class="code">window-atom</code> parameter of the existing window is set
to <code class="code">main</code> provided that window is live and its <code class="code">window-atom</code>
parameter was not already set.
</p>
</dd>
<dt><code class="code">side</code></dt>
<dd><p>The value of such an element denotes the side of the existing window
where the new window shall be located.  Valid values are <code class="code">below</code>,
<code class="code">right</code>, <code class="code">above</code> and <code class="code">left</code>.  The default is
<code class="code">below</code>.  The <code class="code">window-atom</code> parameter of the new window is set
to this value.
</p></dd>
</dl>

<p>The return value is the new window, <code class="code">nil</code> when creating that window
failed.
</p></dd></dl>

<p>Note that the value of the <code class="code">window-atom</code> parameter does not really
matter as long as it is non-<code class="code">nil</code>.  The values assigned by
<code class="code">display-buffer-in-atom-window</code> just allow for easy retrieval of
the original and the new window after that function has been applied.
Note also that the <code class="code">window-atom</code> parameter is the only window
parameter assigned by <code class="code">display-buffer-in-atom-window</code>.  Further
parameters have to be set by the application explicitly via a
<code class="code">window-parameters</code> entry in <var class="var">alist</var>.
</p>
<p>Atomic windows automatically cease to exist when one of their
constituents gets deleted.  To dissolve an atomic window manually,
reset the <code class="code">window-atom</code> parameter of its constituents&mdash;the root
of the atomic window and all its descendants.
</p>
<p>The following code snippet, when applied to a single-window frame,
first splits the selected window and makes the selected and the new
window constituents of an atomic window with their parent as root.  It
then displays the buffer <samp class="file">*Messages*</samp> in a new window at the
frame&rsquo;s bottom and makes that new window part of the atomic window just
created.
</p>
<div class="example">
<div class="group"><pre class="example-preformatted">(let ((window (split-window-right)))
  (window-make-atom (window-parent window))
  (display-buffer-in-atom-window
   (get-buffer-create &quot;*Messages*&quot;)
   `((window . ,(window-parent window)) (window-height . 5))))
</pre></div></div>

<p>At this moment typing <kbd class="kbd">C-x&nbsp;2</kbd><!-- /@w --> in any window of that frame
produces a new window at the bottom of the frame.  Typing <kbd class="kbd">C-x&nbsp;3</kbd><!-- /@w --> instead will put the new window at the frame&rsquo;s right.  In either
case, typing now <kbd class="kbd">C-x&nbsp;1</kbd><!-- /@w --> in any window of the atomic window will
remove the new window only.  Typing <kbd class="kbd">C-x&nbsp;0</kbd><!-- /@w --> in any window of the
atomic window will make that new window fill the frame.
</p>

</div>
<hr>
<div class="nav-panel">
<p>
Next: <a href="Window-Point.html">Windows and Point</a>, Previous: <a href="Side-Windows.html">Side Windows</a>, Up: <a href="Windows.html">Windows</a> &nbsp; [<a href="index.html#SEC_Contents" title="Table of contents" rel="contents">Contents</a>][<a href="Index.html" title="Index" rel="index">Index</a>]</p>
</div>



</body>
</html>
