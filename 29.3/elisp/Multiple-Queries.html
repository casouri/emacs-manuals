<!DOCTYPE html>
<html>
<!-- Created by GNU Texinfo 7.1, https://www.gnu.org/software/texinfo/ -->
<head>
<meta http-equiv="Content-Type" content="text/html; charset=utf-8">
<!-- This is the GNU Emacs Lisp Reference Manual
corresponding to Emacs version 29.3.

Copyright Â© 1990-1996, 1998-2024 Free Software Foundation,
Inc.

Permission is granted to copy, distribute and/or modify this document
under the terms of the GNU Free Documentation License, Version 1.3 or
any later version published by the Free Software Foundation; with the
Invariant Sections being "GNU General Public License," with the
Front-Cover Texts being "A GNU Manual," and with the Back-Cover
Texts as in (a) below.  A copy of the license is included in the
section entitled "GNU Free Documentation License."

(a) The FSF's Back-Cover Text is: "You have the freedom to copy and
modify this GNU manual.  Buying copies from the FSF supports it in
developing GNU and promoting software freedom." -->
<title>Multiple Queries (GNU Emacs Lisp Reference Manual)</title>

<meta name="description" content="Multiple Queries (GNU Emacs Lisp Reference Manual)">
<meta name="keywords" content="Multiple Queries (GNU Emacs Lisp Reference Manual)">
<meta name="resource-type" content="document">
<meta name="distribution" content="global">
<meta name="Generator" content="makeinfo">
<meta name="viewport" content="width=device-width,initial-scale=1">

<link href="index.html" rel="start" title="Top">
<link href="Index.html" rel="index" title="Index">
<link href="index.html#SEC_Contents" rel="contents" title="Table of Contents">
<link href="Minibuffers.html" rel="up" title="Minibuffers">
<link href="Reading-a-Password.html" rel="next" title="Reading a Password">
<link href="Yes_002dor_002dNo-Queries.html" rel="prev" title="Yes-or-No Queries">
<style type="text/css">
<!--
a.copiable-link {visibility: hidden; text-decoration: none; line-height: 0em}
div.example {margin-left: 3.2em}
kbd.kbd {font-style: oblique}
kbd.key {font-style: normal}
span:hover a.copiable-link {visibility: visible}
strong.def-name {font-family: monospace; font-weight: bold; font-size: larger}
-->
</style>
<link rel="stylesheet" type="text/css" href="./manual.css">


</head>

<body lang="en">
<div class="section-level-extent" id="Multiple-Queries">
<div class="nav-panel">
<p>
Next: <a href="Reading-a-Password.html" accesskey="n" rel="next">Reading a Password</a>, Previous: <a href="Yes_002dor_002dNo-Queries.html" accesskey="p" rel="prev">Yes-or-No Queries</a>, Up: <a href="Minibuffers.html" accesskey="u" rel="up">Minibuffers</a> &nbsp; [<a href="index.html#SEC_Contents" title="Table of contents" rel="contents">Contents</a>][<a href="Index.html" title="Index" rel="index">Index</a>]</p>
</div>
<hr>
<h3 class="section" id="Asking-Multiple_002dChoice-Questions"><span>21.8 Asking Multiple-Choice Questions<a class="copiable-link" href="#Asking-Multiple_002dChoice-Questions"> &para;</a></span></h3>

<p>This section describes facilities for asking the user more complex
questions or several similar questions.
</p>
<a class="index-entry-id" id="index-multiple-yes_002dor_002dno-questions"></a>
<p>When you have a series of similar questions to ask, such as &ldquo;Do you
want to save this buffer?&rdquo; for each buffer in turn, you should use
<code class="code">map-y-or-n-p</code> to ask the collection of questions, rather than
asking each question individually.  This gives the user certain
convenient facilities such as the ability to answer the whole series at
once.
</p>
<dl class="first-deffn first-defun-alias-first-deffn">
<dt class="deffn defun-alias-deffn" id="index-map_002dy_002dor_002dn_002dp"><span class="category-def">Function: </span><span><strong class="def-name">map-y-or-n-p</strong> <var class="def-var-arguments">prompter actor list &amp;optional help action-alist no-cursor-in-echo-area</var><a class="copiable-link" href="#index-map_002dy_002dor_002dn_002dp"> &para;</a></span></dt>
<dd><p>This function asks the user a series of questions, reading a
single-character answer in the echo area for each one.
</p>
<p>The value of <var class="var">list</var> specifies the objects to ask questions about.
It should be either a list of objects or a generator function.  If it
is a function, it will be called with no arguments, and should return
either the next object to ask about, or <code class="code">nil</code>, meaning to stop
asking questions.
</p>
<p>The argument <var class="var">prompter</var> specifies how to ask each question.  If
<var class="var">prompter</var> is a string, the question text is computed like this:
</p>
<div class="example">
<pre class="example-preformatted">(format <var class="var">prompter</var> <var class="var">object</var>)
</pre></div>

<p>where <var class="var">object</var> is the next object to ask about (as obtained from
<var class="var">list</var>).  See <a class="xref" href="Formatting-Strings.html">Formatting Strings</a>, for more information about
<code class="code">format</code>.
</p>
<p>If <var class="var">prompter</var> is not a string, it should be a function of one
argument (the object to ask about) and should return the question text
for that object.  If the value <var class="var">prompter</var> returns is a string,
that is the question to ask the user.  The function can also return
<code class="code">t</code>, meaning to act on this object without asking the user, or
<code class="code">nil</code>, which means to silently ignore this object.
</p>
<p>The argument <var class="var">actor</var> says how to act on the objects for which the
user answers yes.  It should be a function of one argument, and will
be called with each object from <var class="var">list</var> for which the user answers
yes.
</p>
<p>If the argument <var class="var">help</var> is given, it should be a list of this form:
</p>
<div class="example">
<pre class="example-preformatted">(<var class="var">singular</var> <var class="var">plural</var> <var class="var">action</var>)
</pre></div>

<p>where <var class="var">singular</var> is a string containing a singular noun that
describes a single object to be acted on, <var class="var">plural</var> is the
corresponding plural noun, and <var class="var">action</var> is a transitive verb
describing what <var class="var">actor</var> does with the objects.
</p>
<p>If you don&rsquo;t specify <var class="var">help</var>, it defaults to the list
<code class="code">(&quot;object&quot;&nbsp;&quot;objects&quot;&nbsp;&quot;act&nbsp;on&quot;)</code><!-- /@w -->.
</p>
<p>Each time a question is asked, the user can answer as follows:
</p>
<dl class="table">
<dt><kbd class="kbd">y</kbd>, <kbd class="kbd">Y</kbd>, or <kbd class="kbd"><kbd class="key">SPC</kbd></kbd></dt>
<dd><p>act on the object
</p></dd>
<dt><kbd class="kbd">n</kbd>, <kbd class="kbd">N</kbd>, or <kbd class="kbd"><kbd class="key">DEL</kbd></kbd></dt>
<dd><p>skip the object
</p></dd>
<dt><kbd class="kbd">!</kbd></dt>
<dd><p>act on all the following objects
</p></dd>
<dt><kbd class="kbd"><kbd class="key">ESC</kbd></kbd> or <kbd class="kbd">q</kbd></dt>
<dd><p>exit (skip all following objects)
</p></dd>
<dt><kbd class="kbd">.</kbd> (period)</dt>
<dd><p>act on the object and then exit
</p></dd>
<dt><kbd class="kbd">C-h</kbd></dt>
<dd><p>get help
</p></dd>
</dl>

<p>These are the same answers that <code class="code">query-replace</code> accepts.  The
keymap <code class="code">query-replace-map</code> defines their meaning for
<code class="code">map-y-or-n-p</code> as well as for <code class="code">query-replace</code>; see
<a class="ref" href="Search-and-Replace.html">Search and Replace</a>.
</p>
<p>You can use <var class="var">action-alist</var> to specify additional possible answers
and what they mean.  If provided, <var class="var">action-alist</var> should be an
alist whose elements are of the form <code class="code">(<var class="var">char</var>&nbsp;<var class="var">function</var>&nbsp;<var class="var">help</var>)</code><!-- /@w -->.  Each of the alist elements defines one
additional answer.  In each element, <var class="var">char</var> is a character (the
answer); <var class="var">function</var> is a function of one argument (an object from
<var class="var">list</var>); and <var class="var">help</var> is a string.  When the user responds with
<var class="var">char</var>, <code class="code">map-y-or-n-p</code> calls <var class="var">function</var>.  If it returns
non-<code class="code">nil</code>, the object is considered to have been acted upon, and
<code class="code">map-y-or-n-p</code> advances to the next object in <var class="var">list</var>.  If it
returns <code class="code">nil</code>, the prompt is repeated for the same object.  If
the user requests help, the text in <var class="var">help</var> is used to describe
these additional answers.
</p>
<p>Normally, <code class="code">map-y-or-n-p</code> binds <code class="code">cursor-in-echo-area</code> while
prompting.  But if <var class="var">no-cursor-in-echo-area</var> is non-<code class="code">nil</code>, it
does not do that.
</p>
<p>If <code class="code">map-y-or-n-p</code> is called in a command that was invoked using
the mouse or some other window-system gesture, or a command invoked
via a menu, then it uses a dialog box or pop-up menu to ask the
question if dialog boxes are supported.  In this case, it does not use
keyboard input or the echo area.  You can force use either of the
mouse or of keyboard input by binding <code class="code">last-nonmenu-event</code> to a
suitable value around the call&mdash;bind it to <code class="code">t</code> to force keyboard
interaction, and to a list to force dialog boxes.
</p>
<p>The return value of <code class="code">map-y-or-n-p</code> is the number of objects acted on.
</p></dd></dl>

<p>If you need to ask the user a question that might have more than just
2 answers, use <code class="code">read-answer</code>.
</p>
<dl class="first-deffn first-defun-alias-first-deffn">
<dt class="deffn defun-alias-deffn" id="index-read_002danswer"><span class="category-def">Function: </span><span><strong class="def-name">read-answer</strong> <var class="def-var-arguments">question answers</var><a class="copiable-link" href="#index-read_002danswer"> &para;</a></span></dt>
<dd><a class="index-entry-id" id="index-read_002danswer_002dshort"></a>
<p>This function prompts the user with text in <var class="var">question</var>, which
should end in the &lsquo;<samp class="samp">SPC</samp>&rsquo; character.  The function includes in the
prompt the possible responses in <var class="var">answers</var> by appending them to
the end of <var class="var">question</var>.  The possible responses are provided in
<var class="var">answers</var> as an alist whose elements are of the following form:
</p>
<div class="example lisp">
<pre class="lisp-preformatted">(<var class="var">long-answer</var> <var class="var">short-answer</var> <var class="var">help-message</var>)
</pre></div>

<p>where <var class="var">long-answer</var> is the complete text of the user response, a
string; <var class="var">short-answer</var> is a short form of the same response, a
single character or a function key; and <var class="var">help-message</var> is the text
that describes the meaning of the answer.  If the variable
<code class="code">read-answer-short</code> is non-<code class="code">nil</code>, the prompt will show the
short variants of the possible answers and the user is expected to
type the single characters/keys shown in the prompt; otherwise the
prompt will show the long variants of the answers, and the user is
expected to type the full text of one of the answers and end by
pressing <kbd class="key">RET</kbd>.  If <code class="code">use-dialog-box</code> is non-<code class="code">nil</code>, and
this function was invoked by mouse events, the question and the
answers will be displayed in a GUI dialog box.
</p>
<p>The function returns the text of the <var class="var">long-answer</var> selected by the
user, regardless of whether long or short answers were shown in the
prompt and typed by the user.
</p>
<p>Here is an example of using this function:
</p>
<div class="example lisp">
<pre class="lisp-preformatted">(let ((read-answer-short t))
  (read-answer &quot;Foo &quot;
     '((&quot;yes&quot;  ?y &quot;perform the action&quot;)
       (&quot;no&quot;   ?n &quot;skip to the next&quot;)
       (&quot;all&quot;  ?! &quot;perform for the rest without more questions&quot;)
       (&quot;help&quot; ?h &quot;show help&quot;)
       (&quot;quit&quot; ?q &quot;exit&quot;))))
</pre></div>
</dd></dl>

<dl class="first-deffn first-defun-alias-first-deffn">
<dt class="deffn defun-alias-deffn" id="index-read_002dchar_002dfrom_002dminibuffer"><span class="category-def">Function: </span><span><strong class="def-name">read-char-from-minibuffer</strong> <var class="def-var-arguments">prompt &amp;optional chars history</var><a class="copiable-link" href="#index-read_002dchar_002dfrom_002dminibuffer"> &para;</a></span></dt>
<dd><p>This function uses the minibuffer to read and return a single
character.  Optionally, it ignores any input that is not a member of
<var class="var">chars</var>, a list of accepted characters.  The <var class="var">history</var>
argument specifies the history list symbol to use; if it is omitted or
<code class="code">nil</code>, this function doesn&rsquo;t use the history.
</p>
<p>If you bind <code class="code">help-form</code> (see <a class="pxref" href="Help-Functions.html">Help Functions</a>) to
a non-<code class="code">nil</code> value while calling <code class="code">read-char-from-minibuffer</code>,
then pressing <code class="code">help-char</code> causes it to evaluate <code class="code">help-form</code>
and display the result.
</p></dd></dl>

</div>
<hr>
<div class="nav-panel">
<p>
Next: <a href="Reading-a-Password.html">Reading a Password</a>, Previous: <a href="Yes_002dor_002dNo-Queries.html">Yes-or-No Queries</a>, Up: <a href="Minibuffers.html">Minibuffers</a> &nbsp; [<a href="index.html#SEC_Contents" title="Table of contents" rel="contents">Contents</a>][<a href="Index.html" title="Index" rel="index">Index</a>]</p>
</div>



</body>
</html>
