<!DOCTYPE html>
<html>
<!-- Created by GNU Texinfo 7.1, https://www.gnu.org/software/texinfo/ -->
<head>
<meta http-equiv="Content-Type" content="text/html; charset=utf-8">
<!-- This is the GNU Emacs Lisp Reference Manual
corresponding to Emacs version 29.3.

Copyright Â© 1990-1996, 1998-2024 Free Software Foundation,
Inc.

Permission is granted to copy, distribute and/or modify this document
under the terms of the GNU Free Documentation License, Version 1.3 or
any later version published by the Free Software Foundation; with the
Invariant Sections being "GNU General Public License," with the
Front-Cover Texts being "A GNU Manual," and with the Back-Cover
Texts as in (a) below.  A copy of the license is included in the
section entitled "GNU Free Documentation License."

(a) The FSF's Back-Cover Text is: "You have the freedom to copy and
modify this GNU manual.  Buying copies from the FSF supports it in
developing GNU and promoting software freedom." -->
<title>Coverage Testing (GNU Emacs Lisp Reference Manual)</title>

<meta name="description" content="Coverage Testing (GNU Emacs Lisp Reference Manual)">
<meta name="keywords" content="Coverage Testing (GNU Emacs Lisp Reference Manual)">
<meta name="resource-type" content="document">
<meta name="distribution" content="global">
<meta name="Generator" content="makeinfo">
<meta name="viewport" content="width=device-width,initial-scale=1">

<link href="index.html" rel="start" title="Top">
<link href="Index.html" rel="index" title="Index">
<link href="index.html#SEC_Contents" rel="contents" title="Table of Contents">
<link href="Edebug.html" rel="up" title="Edebug">
<link href="The-Outside-Context.html" rel="next" title="The Outside Context">
<link href="Trace-Buffer.html" rel="prev" title="Trace Buffer">
<style type="text/css">
<!--
a.copiable-link {visibility: hidden; text-decoration: none; line-height: 0em}
div.example {margin-left: 3.2em}
kbd.kbd {font-style: oblique}
span:hover a.copiable-link {visibility: visible}
strong.def-name {font-family: monospace; font-weight: bold; font-size: larger}
-->
</style>
<link rel="stylesheet" type="text/css" href="./manual.css">


</head>

<body lang="en">
<div class="subsection-level-extent" id="Coverage-Testing">
<div class="nav-panel">
<p>
Next: <a href="The-Outside-Context.html" accesskey="n" rel="next">The Outside Context</a>, Previous: <a href="Trace-Buffer.html" accesskey="p" rel="prev">Trace Buffer</a>, Up: <a href="Edebug.html" accesskey="u" rel="up">Edebug</a> &nbsp; [<a href="index.html#SEC_Contents" title="Table of contents" rel="contents">Contents</a>][<a href="Index.html" title="Index" rel="index">Index</a>]</p>
</div>
<hr>
<h4 class="subsection" id="Coverage-Testing-1"><span>19.2.13 Coverage Testing<a class="copiable-link" href="#Coverage-Testing-1"> &para;</a></span></h4>

<a class="index-entry-id" id="index-coverage-testing-_0028Edebug_0029"></a>
<a class="index-entry-id" id="index-frequency-counts"></a>
<a class="index-entry-id" id="index-performance-analysis-_0028Edebug_0029"></a>
<p>Edebug provides rudimentary coverage testing and display of execution
frequency.
</p>
<p>Coverage testing works by comparing the result of each expression with
the previous result; each form in the program is considered covered
if it has returned two different values since you began testing coverage
in the current Emacs session.  Thus, to do coverage testing on your
program, execute it under various conditions and note whether it behaves
correctly; Edebug will tell you when you have tried enough different
conditions that each form has returned two different values.
</p>
<p>Coverage testing makes execution slower, so it is only done if
<code class="code">edebug-test-coverage</code> is non-<code class="code">nil</code>.  Frequency counting is
performed for all executions of an instrumented function, even if the
execution mode is Go-nonstop, and regardless of whether coverage testing
is enabled.
</p>
<a class="index-entry-id" id="index-C_002dx-X-_003d"></a>
<a class="index-entry-id" id="index-edebug_002dtemp_002ddisplay_002dfreq_002dcount"></a>
<p>Use <kbd class="kbd">C-x X =</kbd> (<code class="code">edebug-display-freq-count</code>) to display both
the coverage information and the frequency counts for a definition.
Just <kbd class="kbd">=</kbd> (<code class="code">edebug-temp-display-freq-count</code>) displays the same
information temporarily, only until you type another key.
</p>
<dl class="first-deffn">
<dt class="deffn" id="index-edebug_002ddisplay_002dfreq_002dcount"><span class="category-def">Command: </span><span><strong class="def-name">edebug-display-freq-count</strong><a class="copiable-link" href="#index-edebug_002ddisplay_002dfreq_002dcount"> &para;</a></span></dt>
<dd><p>This command displays the frequency count data for each line of the
current definition.
</p>
<p>It inserts frequency counts as comment lines after each line of code.
You can undo all insertions with one <code class="code">undo</code> command.  The counts
appear under the &lsquo;<samp class="samp">(</samp>&rsquo; before an expression or the &lsquo;<samp class="samp">)</samp>&rsquo; after
an expression, or on the last character of a variable.  To simplify
the display, a count is not shown if it is equal to the count of an
earlier expression on the same line.
</p>
<p>The character &lsquo;<samp class="samp">=</samp>&rsquo; following the count for an expression says that
the expression has returned the same value each time it was evaluated.
In other words, it is not yet covered for coverage testing purposes.
</p>
<p>To clear the frequency count and coverage data for a definition,
simply reinstrument it with <code class="code">eval-defun</code>.
</p></dd></dl>

<p>For example, after evaluating <code class="code">(fac 5)</code> with a source
breakpoint, and setting <code class="code">edebug-test-coverage</code> to <code class="code">t</code>, when
the breakpoint is reached, the frequency data looks like this:
</p>
<div class="example">
<pre class="example-preformatted">(defun fac (n)
  (if (= n 0) (edebug))
;#6           1      = =5
  (if (&lt; 0 n)
;#5         =
      (* n (fac (1- n)))
;#    5               0
    1))
;#   0
</pre></div>

<p>The comment lines show that <code class="code">fac</code> was called 6 times.  The
first <code class="code">if</code> statement returned 5 times with the same result each
time; the same is true of the condition on the second <code class="code">if</code>.
The recursive call of <code class="code">fac</code> did not return at all.
</p>

</div>
<hr>
<div class="nav-panel">
<p>
Next: <a href="The-Outside-Context.html">The Outside Context</a>, Previous: <a href="Trace-Buffer.html">Trace Buffer</a>, Up: <a href="Edebug.html">Edebug</a> &nbsp; [<a href="index.html#SEC_Contents" title="Table of contents" rel="contents">Contents</a>][<a href="Index.html" title="Index" rel="index">Index</a>]</p>
</div>



</body>
</html>
