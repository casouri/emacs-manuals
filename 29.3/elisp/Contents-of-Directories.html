<!DOCTYPE html>
<html>
<!-- Created by GNU Texinfo 7.1, https://www.gnu.org/software/texinfo/ -->
<head>
<meta http-equiv="Content-Type" content="text/html; charset=utf-8">
<!-- This is the GNU Emacs Lisp Reference Manual
corresponding to Emacs version 29.3.

Copyright Â© 1990-1996, 1998-2024 Free Software Foundation,
Inc.

Permission is granted to copy, distribute and/or modify this document
under the terms of the GNU Free Documentation License, Version 1.3 or
any later version published by the Free Software Foundation; with the
Invariant Sections being "GNU General Public License," with the
Front-Cover Texts being "A GNU Manual," and with the Back-Cover
Texts as in (a) below.  A copy of the license is included in the
section entitled "GNU Free Documentation License."

(a) The FSF's Back-Cover Text is: "You have the freedom to copy and
modify this GNU manual.  Buying copies from the FSF supports it in
developing GNU and promoting software freedom." -->
<title>Contents of Directories (GNU Emacs Lisp Reference Manual)</title>

<meta name="description" content="Contents of Directories (GNU Emacs Lisp Reference Manual)">
<meta name="keywords" content="Contents of Directories (GNU Emacs Lisp Reference Manual)">
<meta name="resource-type" content="document">
<meta name="distribution" content="global">
<meta name="Generator" content="makeinfo">
<meta name="viewport" content="width=device-width,initial-scale=1">

<link href="index.html" rel="start" title="Top">
<link href="Index.html" rel="index" title="Index">
<link href="index.html#SEC_Contents" rel="contents" title="Table of Contents">
<link href="Files.html" rel="up" title="Files">
<link href="Create_002fDelete-Dirs.html" rel="next" title="Create/Delete Dirs">
<link href="File-Names.html" rel="prev" title="File Names">
<style type="text/css">
<!--
a.copiable-link {visibility: hidden; text-decoration: none; line-height: 0em}
div.example {margin-left: 3.2em}
span:hover a.copiable-link {visibility: visible}
strong.def-name {font-family: monospace; font-weight: bold; font-size: larger}
-->
</style>
<link rel="stylesheet" type="text/css" href="./manual.css">


</head>

<body lang="en">
<div class="section-level-extent" id="Contents-of-Directories">
<div class="nav-panel">
<p>
Next: <a href="Create_002fDelete-Dirs.html" accesskey="n" rel="next">Creating, Copying and Deleting Directories</a>, Previous: <a href="File-Names.html" accesskey="p" rel="prev">File Names</a>, Up: <a href="Files.html" accesskey="u" rel="up">Files</a> &nbsp; [<a href="index.html#SEC_Contents" title="Table of contents" rel="contents">Contents</a>][<a href="Index.html" title="Index" rel="index">Index</a>]</p>
</div>
<hr>
<h3 class="section" id="Contents-of-Directories-1"><span>26.10 Contents of Directories<a class="copiable-link" href="#Contents-of-Directories-1"> &para;</a></span></h3>
<a class="index-entry-id" id="index-directory_002doriented-functions"></a>
<a class="index-entry-id" id="index-file-names-in-directory"></a>

<p>A directory is a kind of file that contains other files entered under
various names.  Directories are a feature of the file system.
</p>
<p>Emacs can list the names of the files in a directory as a Lisp list,
or display the names in a buffer using the <code class="code">ls</code> shell command.  In
the latter case, it can optionally display information about each file,
depending on the options passed to the <code class="code">ls</code> command.
</p>
<dl class="first-deffn first-defun-alias-first-deffn">
<dt class="deffn defun-alias-deffn" id="index-directory_002dfiles"><span class="category-def">Function: </span><span><strong class="def-name">directory-files</strong> <var class="def-var-arguments">directory &amp;optional full-name match-regexp nosort count</var><a class="copiable-link" href="#index-directory_002dfiles"> &para;</a></span></dt>
<dd><p>This function returns a list of the names of the files in the directory
<var class="var">directory</var>.  By default, the list is in alphabetical order.
</p>
<p>If <var class="var">full-name</var> is non-<code class="code">nil</code>, the function returns the files&rsquo;
absolute file names.  Otherwise, it returns the names relative to
the specified directory.
</p>
<p>If <var class="var">match-regexp</var> is non-<code class="code">nil</code>, this function returns only
those file names whose non-directory part contain a match for that
regular expression&mdash;the other file names are excluded from the list.
On case-insensitive filesystems, the regular expression matching is
case-insensitive.
</p>
<p>If <var class="var">nosort</var> is non-<code class="code">nil</code>, <code class="code">directory-files</code> does not sort
the list, so you get the file names in no particular order.  Use this if
you want the utmost possible speed and don&rsquo;t care what order the files
are processed in.  If the order of processing is visible to the user,
then the user will probably be happier if you do sort the names.
</p>
<p>If <var class="var">count</var> is non-<code class="code">nil</code>, the function will return names of
first <var class="var">count</var> number of files, or names of all files, whichever
occurs first.  <var class="var">count</var> has to be an integer greater than zero.
</p>
<div class="example">
<div class="group"><pre class="example-preformatted">(directory-files &quot;~lewis&quot;)
     &rArr; (&quot;#foo#&quot; &quot;#foo.el#&quot; &quot;.&quot; &quot;..&quot;
         &quot;dired-mods.el&quot; &quot;files.texi&quot;
         &quot;files.texi.~1~&quot;)
</pre></div></div>

<p>An error is signaled if <var class="var">directory</var> is not the name of a directory
that can be read.
</p></dd></dl>

<dl class="first-deffn first-defun-alias-first-deffn">
<dt class="deffn defun-alias-deffn" id="index-directory_002dempty_002dp"><span class="category-def">Function: </span><span><strong class="def-name">directory-empty-p</strong> <var class="def-var-arguments">directory</var><a class="copiable-link" href="#index-directory_002dempty_002dp"> &para;</a></span></dt>
<dd><p>This utility function returns <code class="code">t</code> if given <var class="var">directory</var> is an
accessible directory and it does not contain any files, i.e., is an
empty directory.  It will ignore &lsquo;<samp class="samp">.</samp>&rsquo; and &lsquo;<samp class="samp">..</samp>&rsquo; on systems
that return them as files in a directory.
</p>
<p>Symbolic links to directories count as directories.
See <var class="var">file-symlink-p</var> to distinguish symlinks.
</p></dd></dl>

<a class="index-entry-id" id="index-recursive-traverse-of-directory-tree"></a>
<dl class="first-deffn first-defun-alias-first-deffn">
<dt class="deffn defun-alias-deffn" id="index-directory_002dfiles_002drecursively"><span class="category-def">Function: </span><span><strong class="def-name">directory-files-recursively</strong> <var class="def-var-arguments">directory regexp &amp;optional include-directories predicate follow-symlinks</var><a class="copiable-link" href="#index-directory_002dfiles_002drecursively"> &para;</a></span></dt>
<dd><p>Return all files under <var class="var">directory</var> whose names match <var class="var">regexp</var>.
This function searches the specified <var class="var">directory</var> and its
sub-directories, recursively, for files whose basenames (i.e., without
the leading directories) match the specified <var class="var">regexp</var>, and returns
a list of the absolute file names of the matching files
(see <a class="pxref" href="Relative-File-Names.html">absolute file names</a>).  The file names
are returned in depth-first order, meaning that files in some
sub-directory are returned before the files in its parent directory.
In addition, matching files found in each subdirectory are sorted
alphabetically by their basenames.  By default, directories whose
names match <var class="var">regexp</var> are omitted from the list, but if the
optional argument <var class="var">include-directories</var> is non-<code class="code">nil</code>, they
are included.
</p>
<p>By default, all subdirectories are descended into.  If <var class="var">predicate</var>
is <code class="code">t</code>, errors when trying to descend into a subdirectory (for
instance, if it&rsquo;s not readable by this user) are ignored.  If it&rsquo;s
neither <code class="code">nil</code> nor <code class="code">t</code>, it should be a function that takes
one parameter (the subdirectory name) and should return non-<code class="code">nil</code>
if the directory is to be descended into.
</p>
<p>Symbolic links to subdirectories are not followed by default, but if
<var class="var">follow-symlinks</var> is non-<code class="code">nil</code>, they are followed.
</p></dd></dl>


<dl class="first-deffn first-defun-alias-first-deffn">
<dt class="deffn defun-alias-deffn" id="index-locate_002ddominating_002dfile"><span class="category-def">Function: </span><span><strong class="def-name">locate-dominating-file</strong> <var class="def-var-arguments">file name</var><a class="copiable-link" href="#index-locate_002ddominating_002dfile"> &para;</a></span></dt>
<dd><p>Starting at <var class="var">file</var>, go up the directory tree hierarchy looking for
the first directory where <var class="var">name</var>, a string, exists, and return that
directory.  If <var class="var">file</var> is a file, its directory will serve as the
starting point for the search; otherwise <var class="var">file</var> should be a
directory from which to start.  The function looks in the starting
directory, then in its parent, then in its parent&rsquo;s parent, etc.,
until it either finds a directory with <var class="var">name</var> or reaches the root
directory of the filesystem without finding <var class="var">name</var> &ndash; in the
latter case the function returns <code class="code">nil</code>.
</p>
<p>The argument <code class="code">name</code> can also be a predicate function.  The
predicate is called for every directory examined by the function,
starting from <var class="var">file</var> (even if <var class="var">file</var> is not a directory).  It
is called with one argument (the file or directory) and should return
non-<code class="code">nil</code> if that directory is the one it is looking for.
</p></dd></dl>

<a class="index-entry-id" id="index-parent-directory-of-file"></a>
<a class="index-entry-id" id="index-ancestor-directory-of-file"></a>
<a class="index-entry-id" id="index-file_002c-ancestor-directory-of"></a>
<dl class="first-deffn first-defun-alias-first-deffn">
<dt class="deffn defun-alias-deffn" id="index-file_002din_002ddirectory_002dp"><span class="category-def">Function: </span><span><strong class="def-name">file-in-directory-p</strong> <var class="def-var-arguments">file dir</var><a class="copiable-link" href="#index-file_002din_002ddirectory_002dp"> &para;</a></span></dt>
<dd><p>This function returns <code class="code">t</code> if <var class="var">file</var> is a file in directory
<var class="var">dir</var>, or in a subdirectory of <var class="var">dir</var>.  It also returns
<code class="code">t</code> if <var class="var">file</var> and <var class="var">dir</var> are the same directory.  It
compares the truenames of the two directories.  If <var class="var">dir</var> does not
name an existing directory, the return value is <code class="code">nil</code>.
</p></dd></dl>

<dl class="first-deffn first-defun-alias-first-deffn">
<dt class="deffn defun-alias-deffn" id="index-directory_002dfiles_002dand_002dattributes"><span class="category-def">Function: </span><span><strong class="def-name">directory-files-and-attributes</strong> <var class="def-var-arguments">directory &amp;optional full-name match-regexp nosort id-format count</var><a class="copiable-link" href="#index-directory_002dfiles_002dand_002dattributes"> &para;</a></span></dt>
<dd><p>This is similar to <code class="code">directory-files</code> in deciding which files
to report on and how to report their names.  However, instead
of returning a list of file names, it returns for each file a
list <code class="code">(<var class="var">filename</var> . <var class="var">attributes</var>)</code>, where <var class="var">attributes</var>
is what <code class="code">file-attributes</code> returns for that file.
The optional argument <var class="var">id-format</var> has the same meaning as the
corresponding argument to <code class="code">file-attributes</code> (see <a class="pxref" href="File-Attributes.html#Definition-of-file_002dattributes">Definition of file-attributes</a>).
</p></dd></dl>

<dl class="first-defvr">
<dt class="defvr" id="index-directory_002dfiles_002dno_002ddot_002dfiles_002dregexp"><span class="category-def">Constant: </span><span><strong class="def-name">directory-files-no-dot-files-regexp</strong><a class="copiable-link" href="#index-directory_002dfiles_002dno_002ddot_002dfiles_002dregexp"> &para;</a></span></dt>
<dd><p>This regular expression matches any file name except &lsquo;<samp class="samp">.</samp>&rsquo; and
&lsquo;<samp class="samp">..</samp>&rsquo;.  More precisely, it matches parts of any nonempty string
except those two.  It is useful as the <var class="var">match-regexp</var> argument to
<code class="code">directory-files</code> and <code class="code">directory-files-and-attributes</code>:
</p>
<div class="example">
<pre class="example-preformatted">(directory-files &quot;/foo&quot; nil directory-files-no-dot-files-regexp)
</pre></div>

<p>returns <code class="code">nil</code>, if directory &lsquo;<samp class="samp">/foo</samp>&rsquo; is empty.
</p></dd></dl>

<dl class="first-deffn first-defun-alias-first-deffn">
<dt class="deffn defun-alias-deffn" id="index-file_002dexpand_002dwildcards"><span class="category-def">Function: </span><span><strong class="def-name">file-expand-wildcards</strong> <var class="def-var-arguments">pattern &amp;optional full regexp</var><a class="copiable-link" href="#index-file_002dexpand_002dwildcards"> &para;</a></span></dt>
<dd><p>This function expands the wildcard pattern <var class="var">pattern</var>, returning
a list of file names that match it.
</p>
<p><var class="var">pattern</var> is, by default, a &ldquo;glob&rdquo;/wildcard string, e.g.,
&lsquo;<samp class="samp">&quot;/tmp/*.png&quot;</samp>&rsquo; or &lsquo;<samp class="samp">&quot;/*/*/foo.png&quot;</samp>&rsquo;, but can also be a
regular expression if the optional <var class="var">regexp</var> parameter is non-<code class="code">nil</code>.
In any case, the matches are applied per sub-directory, so a match
can&rsquo;t span a parent/sub directory.
</p>
<p>If <var class="var">pattern</var> is written as an absolute file name,
the values are absolute also.
</p>
<p>If <var class="var">pattern</var> is written as a relative file name, it is interpreted
relative to the current default directory.  The file names returned are
normally also relative to the current default directory.  However, if
<var class="var">full</var> is non-<code class="code">nil</code>, they are absolute.
</p></dd></dl>

<dl class="first-deffn first-defun-alias-first-deffn">
<dt class="deffn defun-alias-deffn" id="index-insert_002ddirectory"><span class="category-def">Function: </span><span><strong class="def-name">insert-directory</strong> <var class="def-var-arguments">file switches &amp;optional wildcard full-directory-p</var><a class="copiable-link" href="#index-insert_002ddirectory"> &para;</a></span></dt>
<dd><p>This function inserts (in the current buffer) a directory listing for
directory <var class="var">file</var>, formatted with <code class="code">ls</code> according to
<var class="var">switches</var>.  It leaves point after the inserted text.
<var class="var">switches</var> may be a string of options, or a list of strings
representing individual options.
</p>
<p>The argument <var class="var">file</var> may be either a directory or a file
specification including wildcard characters.  If <var class="var">wildcard</var> is
non-<code class="code">nil</code>, that means treat <var class="var">file</var> as a file specification with
wildcards.
</p>
<p>If <var class="var">full-directory-p</var> is non-<code class="code">nil</code>, that means the directory
listing is expected to show the full contents of a directory.  You
should specify <code class="code">t</code> when <var class="var">file</var> is a directory and switches do
not contain &lsquo;<samp class="samp">-d</samp>&rsquo;.  (The &lsquo;<samp class="samp">-d</samp>&rsquo; option to <code class="code">ls</code> says to
describe a directory itself as a file, rather than showing its
contents.)
</p>
<p>On most systems, this function works by running a directory listing
program whose name is in the variable <code class="code">insert-directory-program</code>.
If <var class="var">wildcard</var> is non-<code class="code">nil</code>, it also runs the shell specified by
<code class="code">shell-file-name</code>, to expand the wildcards.
</p>
<p>MS-DOS and MS-Windows systems usually lack the standard Unix program
<code class="code">ls</code>, so this function emulates the standard Unix program <code class="code">ls</code>
with Lisp code.
</p>
<p>As a technical detail, when <var class="var">switches</var> contains the long
&lsquo;<samp class="samp">--dired</samp>&rsquo; option, <code class="code">insert-directory</code> treats it specially,
for the sake of dired.  However, the normally equivalent short
&lsquo;<samp class="samp">-D</samp>&rsquo; option is just passed on to <code class="code">insert-directory-program</code>,
as any other option.
</p></dd></dl>

<dl class="first-defvr first-defvar-alias-first-defvr">
<dt class="defvr defvar-alias-defvr" id="index-insert_002ddirectory_002dprogram"><span class="category-def">Variable: </span><span><strong class="def-name">insert-directory-program</strong><a class="copiable-link" href="#index-insert_002ddirectory_002dprogram"> &para;</a></span></dt>
<dd><p>This variable&rsquo;s value is the program to run to generate a directory listing
for the function <code class="code">insert-directory</code>.  It is ignored on systems
which generate the listing with Lisp code.
</p></dd></dl>

</div>
<hr>
<div class="nav-panel">
<p>
Next: <a href="Create_002fDelete-Dirs.html">Creating, Copying and Deleting Directories</a>, Previous: <a href="File-Names.html">File Names</a>, Up: <a href="Files.html">Files</a> &nbsp; [<a href="index.html#SEC_Contents" title="Table of contents" rel="contents">Contents</a>][<a href="Index.html" title="Index" rel="index">Index</a>]</p>
</div>



</body>
</html>
