<!DOCTYPE html>
<html>
<!-- Created by GNU Texinfo 7.1, https://www.gnu.org/software/texinfo/ -->
<head>
<meta http-equiv="Content-Type" content="text/html; charset=utf-8">
<!-- This is the GNU Emacs Lisp Reference Manual
corresponding to Emacs version 29.3.

Copyright © 1990-1996, 1998-2024 Free Software Foundation,
Inc.

Permission is granted to copy, distribute and/or modify this document
under the terms of the GNU Free Documentation License, Version 1.3 or
any later version published by the Free Software Foundation; with the
Invariant Sections being "GNU General Public License," with the
Front-Cover Texts being "A GNU Manual," and with the Back-Cover
Texts as in (a) below.  A copy of the license is included in the
section entitled "GNU Free Documentation License."

(a) The FSF's Back-Cover Text is: "You have the freedom to copy and
modify this GNU manual.  Buying copies from the FSF supports it in
developing GNU and promoting software freedom." -->
<title>Shell Arguments (GNU Emacs Lisp Reference Manual)</title>

<meta name="description" content="Shell Arguments (GNU Emacs Lisp Reference Manual)">
<meta name="keywords" content="Shell Arguments (GNU Emacs Lisp Reference Manual)">
<meta name="resource-type" content="document">
<meta name="distribution" content="global">
<meta name="Generator" content="makeinfo">
<meta name="viewport" content="width=device-width,initial-scale=1">

<link href="index.html" rel="start" title="Top">
<link href="Index.html" rel="index" title="Index">
<link href="index.html#SEC_Contents" rel="contents" title="Table of Contents">
<link href="Processes.html" rel="up" title="Processes">
<link href="Synchronous-Processes.html" rel="next" title="Synchronous Processes">
<link href="Subprocess-Creation.html" rel="prev" title="Subprocess Creation">
<style type="text/css">
<!--
a.copiable-link {visibility: hidden; text-decoration: none; line-height: 0em}
div.example {margin-left: 3.2em}
span.r {font-family: initial; font-weight: normal; font-style: normal}
span:hover a.copiable-link {visibility: visible}
strong.def-name {font-family: monospace; font-weight: bold; font-size: larger}
-->
</style>
<link rel="stylesheet" type="text/css" href="./manual.css">


</head>

<body lang="en">
<div class="section-level-extent" id="Shell-Arguments">
<div class="nav-panel">
<p>
Next: <a href="Synchronous-Processes.html" accesskey="n" rel="next">Creating a Synchronous Process</a>, Previous: <a href="Subprocess-Creation.html" accesskey="p" rel="prev">Functions that Create Subprocesses</a>, Up: <a href="Processes.html" accesskey="u" rel="up">Processes</a> &nbsp; [<a href="index.html#SEC_Contents" title="Table of contents" rel="contents">Contents</a>][<a href="Index.html" title="Index" rel="index">Index</a>]</p>
</div>
<hr>
<h3 class="section" id="Shell-Arguments-1"><span>40.2 Shell Arguments<a class="copiable-link" href="#Shell-Arguments-1"> &para;</a></span></h3>
<a class="index-entry-id" id="index-arguments-for-shell-commands"></a>
<a class="index-entry-id" id="index-shell-command-arguments"></a>

<p>Lisp programs sometimes need to run a shell and give it a command
that contains file names that were specified by the user.  These
programs ought to be able to support any valid file name.  But the shell
gives special treatment to certain characters, and if these characters
occur in the file name, they will confuse the shell.  To handle these
characters, use the function <code class="code">shell-quote-argument</code>:
</p>
<dl class="first-deffn first-defun-alias-first-deffn">
<dt class="deffn defun-alias-deffn" id="index-shell_002dquote_002dargument"><span class="category-def">Function: </span><span><strong class="def-name">shell-quote-argument</strong> <var class="def-var-arguments">argument &amp;optional posix</var><a class="copiable-link" href="#index-shell_002dquote_002dargument"> &para;</a></span></dt>
<dd><p>This function returns a string that represents, in shell syntax,
an argument whose actual contents are <var class="var">argument</var>.  It should
work reliably to concatenate the return value into a shell command
and then pass it to a shell for execution.
</p>
<p>Precisely what this function does depends on your operating system.  The
function is designed to work with the syntax of your system&rsquo;s standard
shell; if you use an unusual shell, you will need to redefine this
function.  See <a class="xref" href="Security-Considerations.html">Security Considerations</a>.
</p>
<div class="example">
<pre class="example-preformatted">;; <span class="r">This example shows the behavior on GNU and Unix systems.</span>
(shell-quote-argument &quot;foo &gt; bar&quot;)
     &rArr; &quot;foo\\ \\&gt;\\ bar&quot;

;; <span class="r">This example shows the behavior on MS-DOS and MS-Windows.</span>
(shell-quote-argument &quot;foo &gt; bar&quot;)
     &rArr; &quot;\&quot;foo &gt; bar\&quot;&quot;
</pre></div>

<p>Here&rsquo;s an example of using <code class="code">shell-quote-argument</code> to construct
a shell command:
</p>
<div class="example">
<pre class="example-preformatted">(concat &quot;diff -u &quot;
        (shell-quote-argument oldfile)
        &quot; &quot;
        (shell-quote-argument newfile))
</pre></div>

<p>If the optional <var class="var">posix</var> argument is non-<code class="code">nil</code>, <var class="var">argument</var>
is quoted according to POSIX shell quoting rules, regardless of the
system’s shell.  This is useful when your shell could run on a remote
host, which requires a POSIX shell in general.
</p>
<div class="example">
<pre class="example-preformatted">(shell-quote-argument &quot;foo &gt; bar&quot; (file-remote-p default-directory))
</pre></div>
</dd></dl>

<a class="index-entry-id" id="index-quoting-and-unquoting-command_002dline-arguments"></a>
<a class="index-entry-id" id="index-minibuffer-input_002c-and-command_002dline-arguments"></a>
<a class="index-entry-id" id="index-call_002dprocess_002c-command_002dline-arguments-from-minibuffer"></a>
<a class="index-entry-id" id="index-start_002dprocess_002c-command_002dline-arguments-from-minibuffer"></a>
<p>The following two functions are useful for combining a list of
individual command-line argument strings into a single string, and
taking a string apart into a list of individual command-line
arguments.  These functions are mainly intended for converting user
input in the minibuffer, a Lisp string, into a list of string
arguments to be passed to <code class="code">make-process</code>, <code class="code">call-process</code> or
<code class="code">start-process</code>, or for converting such lists of arguments into a
single Lisp string to be presented in the minibuffer or echo area.
Note that if a shell is involved (e.g., if using
<code class="code">call-process-shell-command</code>), arguments should still be
protected by <code class="code">shell-quote-argument</code>;
<code class="code">combine-and-quote-strings</code> is <em class="emph">not</em> intended to protect
special characters from shell evaluation.
</p>
<dl class="first-deffn first-defun-alias-first-deffn">
<dt class="deffn defun-alias-deffn" id="index-split_002dstring_002dshell_002dcommand"><span class="category-def">Function: </span><span><strong class="def-name">split-string-shell-command</strong> <var class="def-var-arguments">string</var><a class="copiable-link" href="#index-split_002dstring_002dshell_002dcommand"> &para;</a></span></dt>
<dd><p>This function splits <var class="var">string</var> into substrings, respecting double
and single quotes, as well as backslash quoting.
</p>
<div class="example smallexample">
<pre class="example-preformatted">(split-string-shell-command &quot;ls /tmp/'foo bar'&quot;)
     &rArr; (&quot;ls&quot; &quot;/tmp/foo bar&quot;)
</pre></div>
</dd></dl>

<dl class="first-deffn first-defun-alias-first-deffn">
<dt class="deffn defun-alias-deffn" id="index-split_002dstring_002dand_002dunquote"><span class="category-def">Function: </span><span><strong class="def-name">split-string-and-unquote</strong> <var class="def-var-arguments">string &amp;optional separators</var><a class="copiable-link" href="#index-split_002dstring_002dand_002dunquote"> &para;</a></span></dt>
<dd><p>This function splits <var class="var">string</var> into substrings at matches for the
regular expression <var class="var">separators</var>, like <code class="code">split-string</code> does
(see <a class="pxref" href="Creating-Strings.html">Creating Strings</a>); in addition, it removes quoting from the
substrings.  It then makes a list of the substrings and returns it.
</p>
<p>If <var class="var">separators</var> is omitted or <code class="code">nil</code>, it defaults to
<code class="code">&quot;\\s-+&quot;</code>, which is a regular expression that matches one or more
characters with whitespace syntax (see <a class="pxref" href="Syntax-Class-Table.html">Table of Syntax Classes</a>).
</p>
<p>This function supports two types of quoting: enclosing a whole string
in double quotes <code class="code">&quot;&hellip;&quot;</code>, and quoting individual characters
with a backslash escape &lsquo;<samp class="samp">\</samp>&rsquo;.  The latter is also used in Lisp
strings, so this function can handle those as well.
</p></dd></dl>

<dl class="first-deffn first-defun-alias-first-deffn">
<dt class="deffn defun-alias-deffn" id="index-combine_002dand_002dquote_002dstrings"><span class="category-def">Function: </span><span><strong class="def-name">combine-and-quote-strings</strong> <var class="def-var-arguments">list-of-strings &amp;optional separator</var><a class="copiable-link" href="#index-combine_002dand_002dquote_002dstrings"> &para;</a></span></dt>
<dd><p>This function concatenates <var class="var">list-of-strings</var> into a single string,
quoting each string as necessary.  It also sticks the <var class="var">separator</var>
string between each pair of strings; if <var class="var">separator</var> is omitted or
<code class="code">nil</code>, it defaults to <code class="code">&quot; &quot;</code>.  The return value is the
resulting string.
</p>
<p>The strings in <var class="var">list-of-strings</var> that need quoting are those that
include <var class="var">separator</var> as their substring.  Quoting a string encloses
it in double quotes <code class="code">&quot;&hellip;&quot;</code>.  In the simplest case, if you
are consing a command from the individual command-line arguments,
every argument that includes embedded blanks will be quoted.
</p></dd></dl>

</div>
<hr>
<div class="nav-panel">
<p>
Next: <a href="Synchronous-Processes.html">Creating a Synchronous Process</a>, Previous: <a href="Subprocess-Creation.html">Functions that Create Subprocesses</a>, Up: <a href="Processes.html">Processes</a> &nbsp; [<a href="index.html#SEC_Contents" title="Table of contents" rel="contents">Contents</a>][<a href="Index.html" title="Index" rel="index">Index</a>]</p>
</div>



</body>
</html>
