<!DOCTYPE html>
<html>
<!-- Created by GNU Texinfo 7.1, https://www.gnu.org/software/texinfo/ -->
<head>
<meta http-equiv="Content-Type" content="text/html; charset=utf-8">
<!-- This is the GNU Emacs Lisp Reference Manual
corresponding to Emacs version 24.4.

Copyright Â© 1990-1996, 1998-2014 Free Software Foundation, Inc.

Permission is granted to copy, distribute and/or modify this document
under the terms of the GNU Free Documentation License, Version 1.3 or
any later version published by the Free Software Foundation; with the
Invariant Sections being "GNU General Public License," with the
Front-Cover Texts being "A GNU Manual," and with the Back-Cover
Texts as in (a) below.  A copy of the license is included in the
section entitled "GNU Free Documentation License."

(a) The FSF's Back-Cover Text is: "You have the freedom to copy and
modify this GNU manual.  Buying copies from the FSF supports it in
developing GNU and promoting software freedom." -->
<title>Window Start and End (GNU Emacs Lisp Reference Manual)</title>

<meta name="description" content="Window Start and End (GNU Emacs Lisp Reference Manual)">
<meta name="keywords" content="Window Start and End (GNU Emacs Lisp Reference Manual)">
<meta name="resource-type" content="document">
<meta name="distribution" content="global">
<meta name="Generator" content="makeinfo">
<meta name="viewport" content="width=device-width,initial-scale=1">

<link href="index.html" rel="start" title="Top">
<link href="Index.html" rel="index" title="Index">
<link href="index.html#SEC_Contents" rel="contents" title="Table of Contents">
<link href="Windows.html" rel="up" title="Windows">
<link href="Textual-Scrolling.html" rel="next" title="Textual Scrolling">
<link href="Window-Point.html" rel="prev" title="Window Point">
<style type="text/css">
<!--
a.copiable-link {visibility: hidden; text-decoration: none; line-height: 0em}
div.example {margin-left: 3.2em}
span.r {font-family: initial; font-weight: normal; font-style: normal}
span:hover a.copiable-link {visibility: visible}
strong.def-name {font-family: monospace; font-weight: bold; font-size: larger}
-->
</style>
<link rel="stylesheet" type="text/css" href="./manual.css">


</head>

<body lang="en">
<div class="section-level-extent" id="Window-Start-and-End">
<div class="nav-panel">
<p>
Next: <a href="Textual-Scrolling.html" accesskey="n" rel="next">Textual Scrolling</a>, Previous: <a href="Window-Point.html" accesskey="p" rel="prev">Windows and Point</a>, Up: <a href="Windows.html" accesskey="u" rel="up">Windows</a> &nbsp; [<a href="index.html#SEC_Contents" title="Table of contents" rel="contents">Contents</a>][<a href="Index.html" title="Index" rel="index">Index</a>]</p>
</div>
<hr>
<h3 class="section" id="The-Window-Start-and-End-Positions"><span>27.19 The Window Start and End Positions<a class="copiable-link" href="#The-Window-Start-and-End-Positions"> &para;</a></span></h3>
<a class="index-entry-id" id="index-window-start-position"></a>
<a class="index-entry-id" id="index-display_002dstart-position"></a>

<p>Each window maintains a marker used to keep track of a buffer position
that specifies where in the buffer display should start.  This position
is called the <em class="dfn">display-start</em> position of the window (or just the
<em class="dfn">start</em>).  The character after this position is the one that appears
at the upper left corner of the window.  It is usually, but not
inevitably, at the beginning of a text line.
</p>
<p>After switching windows or buffers, and in some other cases, if the
window start is in the middle of a line, Emacs adjusts the window
start to the start of a line.  This prevents certain operations from
leaving the window start at a meaningless point within a line.  This
feature may interfere with testing some Lisp code by executing it
using the commands of Lisp mode, because they trigger this
readjustment.  To test such code, put it into a command and bind the
command to a key.
</p>
<dl class="first-deffn first-defun-alias-first-deffn">
<dt class="deffn defun-alias-deffn" id="index-window_002dstart"><span class="category-def">Function: </span><span><strong class="def-name">window-start</strong> <var class="def-var-arguments">&amp;optional window</var><a class="copiable-link" href="#index-window_002dstart"> &para;</a></span></dt>
<dd><a class="index-entry-id" id="index-window-top-line"></a>
<p>This function returns the display-start position of window
<var class="var">window</var>.  If <var class="var">window</var> is <code class="code">nil</code>, the selected window is
used.
</p>
<p>When you create a window, or display a different buffer in it, the
display-start position is set to a display-start position recently used
for the same buffer, or to <code class="code">point-min</code> if the buffer doesn&rsquo;t have
any.
</p>
<p>Redisplay updates the window-start position (if you have not specified
it explicitly since the previous redisplay)&mdash;to make sure point appears
on the screen.  Nothing except redisplay automatically changes the
window-start position; if you move point, do not expect the window-start
position to change in response until after the next redisplay.
</p></dd></dl>

<a class="index-entry-id" id="index-window-end-position"></a>
<dl class="first-deffn first-defun-alias-first-deffn">
<dt class="deffn defun-alias-deffn" id="index-window_002dend"><span class="category-def">Function: </span><span><strong class="def-name">window-end</strong> <var class="def-var-arguments">&amp;optional window update</var><a class="copiable-link" href="#index-window_002dend"> &para;</a></span></dt>
<dd><p>This function returns the position where display of its buffer ends in
<var class="var">window</var>.  The default for <var class="var">window</var> is the selected window.
</p>
<p>Simply changing the buffer text or moving point does not update the
value that <code class="code">window-end</code> returns.  The value is updated only when
Emacs redisplays and redisplay completes without being preempted.
</p>
<p>If the last redisplay of <var class="var">window</var> was preempted, and did not finish,
Emacs does not know the position of the end of display in that window.
In that case, this function returns <code class="code">nil</code>.
</p>
<p>If <var class="var">update</var> is non-<code class="code">nil</code>, <code class="code">window-end</code> always returns an
up-to-date value for where display ends, based on the current
<code class="code">window-start</code> value.  If a previously saved value of that position
is still valid, <code class="code">window-end</code> returns that value; otherwise it
computes the correct value by scanning the buffer text.
</p>
<p>Even if <var class="var">update</var> is non-<code class="code">nil</code>, <code class="code">window-end</code> does not
attempt to scroll the display if point has moved off the screen, the
way real redisplay would do.  It does not alter the
<code class="code">window-start</code> value.  In effect, it reports where the displayed
text will end if scrolling is not required.
</p></dd></dl>

<dl class="first-deffn first-defun-alias-first-deffn">
<dt class="deffn defun-alias-deffn" id="index-set_002dwindow_002dstart"><span class="category-def">Function: </span><span><strong class="def-name">set-window-start</strong> <var class="def-var-arguments">window position &amp;optional noforce</var><a class="copiable-link" href="#index-set_002dwindow_002dstart"> &para;</a></span></dt>
<dd><p>This function sets the display-start position of <var class="var">window</var> to
<var class="var">position</var> in <var class="var">window</var>&rsquo;s buffer.  It returns <var class="var">position</var>.
</p>
<p>The display routines insist that the position of point be visible when a
buffer is displayed.  Normally, they change the display-start position
(that is, scroll the window) whenever necessary to make point visible.
However, if you specify the start position with this function using
<code class="code">nil</code> for <var class="var">noforce</var>, it means you want display to start at
<var class="var">position</var> even if that would put the location of point off the
screen.  If this does place point off screen, the display routines move
point to the left margin on the middle line in the window.
</p>
<p>For example, if point is&nbsp;1<!-- /@w --> and you set the start of the window
to&nbsp;37<!-- /@w -->, the start of the next line, point will be &ldquo;above&rdquo; the top
of the window.  The display routines will automatically move point if
it is still 1 when redisplay occurs.  Here is an example:
</p>
<div class="example">
<div class="group"><pre class="example-preformatted">;; <span class="r">Here is what &lsquo;<samp class="samp">foo</samp>&rsquo; looks like before executing</span>
;;   <span class="r">the <code class="code">set-window-start</code> expression.</span>
</pre></div><pre class="example-preformatted">

</pre><div class="group"><pre class="example-preformatted">---------- Buffer: foo ----------
&lowast;This is the contents of buffer foo.
2
3
4
5
6
---------- Buffer: foo ----------
</pre></div><pre class="example-preformatted">

</pre><div class="group"><pre class="example-preformatted">(set-window-start
 (selected-window)
 (save-excursion
   (goto-char 1)
   (forward-line 1)
   (point)))
&rArr; 37
</pre></div><pre class="example-preformatted">

</pre><div class="group"><pre class="example-preformatted">;; <span class="r">Here is what &lsquo;<samp class="samp">foo</samp>&rsquo; looks like after executing</span>
;;   <span class="r">the <code class="code">set-window-start</code> expression.</span>
---------- Buffer: foo ----------
2
3
&lowast;4
5
6
---------- Buffer: foo ----------
</pre></div></div>

<p>If <var class="var">noforce</var> is non-<code class="code">nil</code>, and <var class="var">position</var> would place point
off screen at the next redisplay, then redisplay computes a new window-start
position that works well with point, and thus <var class="var">position</var> is not used.
</p></dd></dl>

<dl class="first-deffn first-defun-alias-first-deffn">
<dt class="deffn defun-alias-deffn" id="index-pos_002dvisible_002din_002dwindow_002dp"><span class="category-def">Function: </span><span><strong class="def-name">pos-visible-in-window-p</strong> <var class="def-var-arguments">&amp;optional position window partially</var><a class="copiable-link" href="#index-pos_002dvisible_002din_002dwindow_002dp"> &para;</a></span></dt>
<dd><p>This function returns non-<code class="code">nil</code> if <var class="var">position</var> is within the
range of text currently visible on the screen in <var class="var">window</var>.  It
returns <code class="code">nil</code> if <var class="var">position</var> is scrolled vertically out of view.
Locations that are partially obscured are not considered visible unless
<var class="var">partially</var> is non-<code class="code">nil</code>.  The argument <var class="var">position</var> defaults
to the current position of point in <var class="var">window</var>; <var class="var">window</var>, to the
selected window.  If <var class="var">position</var> is <code class="code">t</code>, that means to check the
last visible position in <var class="var">window</var>.
</p>
<p>This function considers only vertical scrolling.  If <var class="var">position</var> is
out of view only because <var class="var">window</var> has been scrolled horizontally,
<code class="code">pos-visible-in-window-p</code> returns non-<code class="code">nil</code> anyway.
See <a class="xref" href="Horizontal-Scrolling.html">Horizontal Scrolling</a>.
</p>
<p>If <var class="var">position</var> is visible, <code class="code">pos-visible-in-window-p</code> returns
<code class="code">t</code> if <var class="var">partially</var> is <code class="code">nil</code>; if <var class="var">partially</var> is
non-<code class="code">nil</code>, and the character following <var class="var">position</var> is fully
visible, it returns a list of the form <code class="code">(<var class="var">x</var> <var class="var">y</var>)</code>, where
<var class="var">x</var> and <var class="var">y</var> are the pixel coordinates relative to the top left
corner of the window; otherwise it returns an extended list of the form
<code class="code">(<var class="var">x</var> <var class="var">y</var> <var class="var">rtop</var> <var class="var">rbot</var> <var class="var">rowh</var> <var class="var">vpos</var>)</code>,
where <var class="var">rtop</var> and <var class="var">rbot</var> specify the number of off-window pixels
at the top and bottom of the row at <var class="var">position</var>, <var class="var">rowh</var> specifies
the visible height of that row, and <var class="var">vpos</var> specifies the vertical
position (zero-based row number) of that row.
</p>
<p>Here is an example:
</p>
<div class="example">
<div class="group"><pre class="example-preformatted">;; <span class="r">If point is off the screen now, recenter it now.</span>
(or (pos-visible-in-window-p
     (point) (selected-window))
    (recenter 0))
</pre></div></div>
</dd></dl>

<dl class="first-deffn first-defun-alias-first-deffn">
<dt class="deffn defun-alias-deffn" id="index-window_002dline_002dheight"><span class="category-def">Function: </span><span><strong class="def-name">window-line-height</strong> <var class="def-var-arguments">&amp;optional line window</var><a class="copiable-link" href="#index-window_002dline_002dheight"> &para;</a></span></dt>
<dd><p>This function returns the height of text line <var class="var">line</var> in
<var class="var">window</var>.  If <var class="var">line</var> is one of <code class="code">header-line</code> or
<code class="code">mode-line</code>, <code class="code">window-line-height</code> returns information about
the corresponding line of the window.  Otherwise, <var class="var">line</var> is a text
line number starting from 0.  A negative number counts from the end of
the window.  The default for <var class="var">line</var> is the current line in
<var class="var">window</var>; the default for <var class="var">window</var> is the selected window.
</p>
<p>If the display is not up to date, <code class="code">window-line-height</code> returns
<code class="code">nil</code>.  In that case, <code class="code">pos-visible-in-window-p</code> may be used
to obtain related information.
</p>
<p>If there is no line corresponding to the specified <var class="var">line</var>,
<code class="code">window-line-height</code> returns <code class="code">nil</code>.  Otherwise, it returns
a list <code class="code">(<var class="var">height</var> <var class="var">vpos</var> <var class="var">ypos</var> <var class="var">offbot</var>)</code>,
where <var class="var">height</var> is the height in pixels of the visible part of the
line, <var class="var">vpos</var> and <var class="var">ypos</var> are the vertical position in lines and
pixels of the line relative to the top of the first text line, and
<var class="var">offbot</var> is the number of off-window pixels at the bottom of the
text line.  If there are off-window pixels at the top of the (first)
text line, <var class="var">ypos</var> is negative.
</p></dd></dl>

</div>
<hr>
<div class="nav-panel">
<p>
Next: <a href="Textual-Scrolling.html">Textual Scrolling</a>, Previous: <a href="Window-Point.html">Windows and Point</a>, Up: <a href="Windows.html">Windows</a> &nbsp; [<a href="index.html#SEC_Contents" title="Table of contents" rel="contents">Contents</a>][<a href="Index.html" title="Index" rel="index">Index</a>]</p>
</div>



</body>
</html>
