<!DOCTYPE html>
<html>
<!-- Created by GNU Texinfo 7.1, https://www.gnu.org/software/texinfo/ -->
<head>
<meta http-equiv="Content-Type" content="text/html; charset=utf-8">
<!-- This is the GNU Emacs Lisp Reference Manual
corresponding to Emacs version 24.4.

Copyright Â© 1990-1996, 1998-2014 Free Software Foundation, Inc.

Permission is granted to copy, distribute and/or modify this document
under the terms of the GNU Free Documentation License, Version 1.3 or
any later version published by the Free Software Foundation; with the
Invariant Sections being "GNU General Public License," with the
Front-Cover Texts being "A GNU Manual," and with the Back-Cover
Texts as in (a) below.  A copy of the license is included in the
section entitled "GNU Free Documentation License."

(a) The FSF's Back-Cover Text is: "You have the freedom to copy and
modify this GNU manual.  Buying copies from the FSF supports it in
developing GNU and promoting software freedom." -->
<title>Unique File Names (GNU Emacs Lisp Reference Manual)</title>

<meta name="description" content="Unique File Names (GNU Emacs Lisp Reference Manual)">
<meta name="keywords" content="Unique File Names (GNU Emacs Lisp Reference Manual)">
<meta name="resource-type" content="document">
<meta name="distribution" content="global">
<meta name="Generator" content="makeinfo">
<meta name="viewport" content="width=device-width,initial-scale=1">

<link href="index.html" rel="start" title="Top">
<link href="Index.html" rel="index" title="Index">
<link href="index.html#SEC_Contents" rel="contents" title="Table of Contents">
<link href="File-Names.html" rel="up" title="File Names">
<link href="File-Name-Completion.html" rel="next" title="File Name Completion">
<link href="File-Name-Expansion.html" rel="prev" title="File Name Expansion">
<style type="text/css">
<!--
a.copiable-link {visibility: hidden; text-decoration: none; line-height: 0em}
div.example {margin-left: 3.2em}
span:hover a.copiable-link {visibility: visible}
strong.def-name {font-family: monospace; font-weight: bold; font-size: larger}
-->
</style>
<link rel="stylesheet" type="text/css" href="./manual.css">


</head>

<body lang="en">
<div class="subsection-level-extent" id="Unique-File-Names">
<div class="nav-panel">
<p>
Next: <a href="File-Name-Completion.html" accesskey="n" rel="next">File Name Completion</a>, Previous: <a href="File-Name-Expansion.html" accesskey="p" rel="prev">Functions that Expand Filenames</a>, Up: <a href="File-Names.html" accesskey="u" rel="up">File Names</a> &nbsp; [<a href="index.html#SEC_Contents" title="Table of contents" rel="contents">Contents</a>][<a href="Index.html" title="Index" rel="index">Index</a>]</p>
</div>
<hr>
<h4 class="subsection" id="Generating-Unique-File-Names"><span>24.8.5 Generating Unique File Names<a class="copiable-link" href="#Generating-Unique-File-Names"> &para;</a></span></h4>

<p>Some programs need to write temporary files.  Here is the usual way to
construct a name for such a file:
</p>
<div class="example">
<pre class="example-preformatted">(make-temp-file <var class="var">name-of-application</var>)
</pre></div>

<p>The job of <code class="code">make-temp-file</code> is to prevent two different users or
two different jobs from trying to use the exact same file name.
</p>
<dl class="first-deffn first-defun-alias-first-deffn">
<dt class="deffn defun-alias-deffn" id="index-make_002dtemp_002dfile"><span class="category-def">Function: </span><span><strong class="def-name">make-temp-file</strong> <var class="def-var-arguments">prefix &amp;optional dir-flag suffix</var><a class="copiable-link" href="#index-make_002dtemp_002dfile"> &para;</a></span></dt>
<dd><p>This function creates a temporary file and returns its name.  Emacs
creates the temporary file&rsquo;s name by adding to <var class="var">prefix</var> some
random characters that are different in each Emacs job.  The result is
guaranteed to be a newly created empty file.  On MS-DOS, this function
can truncate the <var class="var">string</var> prefix to fit into the 8+3 file-name
limits.  If <var class="var">prefix</var> is a relative file name, it is expanded
against <code class="code">temporary-file-directory</code>.
</p>
<div class="example">
<div class="group"><pre class="example-preformatted">(make-temp-file &quot;foo&quot;)
     &rArr; &quot;/tmp/foo232J6v&quot;
</pre></div></div>

<p>When <code class="code">make-temp-file</code> returns, the file has been created and is
empty.  At that point, you should write the intended contents into the
file.
</p>
<p>If <var class="var">dir-flag</var> is non-<code class="code">nil</code>, <code class="code">make-temp-file</code> creates an
empty directory instead of an empty file.  It returns the file name,
not the directory name, of that directory.  See <a class="xref" href="Directory-Names.html">Directory Names</a>.
</p>
<p>If <var class="var">suffix</var> is non-<code class="code">nil</code>, <code class="code">make-temp-file</code> adds it at
the end of the file name.
</p>
<p>To prevent conflicts among different libraries running in the same
Emacs, each Lisp program that uses <code class="code">make-temp-file</code> should have its
own <var class="var">prefix</var>.  The number added to the end of <var class="var">prefix</var>
distinguishes between the same application running in different Emacs
jobs.  Additional added characters permit a large number of distinct
names even in one Emacs job.
</p></dd></dl>

<p>The default directory for temporary files is controlled by the
variable <code class="code">temporary-file-directory</code>.  This variable gives the user
a uniform way to specify the directory for all temporary files.  Some
programs use <code class="code">small-temporary-file-directory</code> instead, if that is
non-<code class="code">nil</code>.  To use it, you should expand the prefix against
the proper directory before calling <code class="code">make-temp-file</code>.
</p>
<dl class="first-defvr first-defopt-alias-first-defvr">
<dt class="defvr defopt-alias-defvr" id="index-temporary_002dfile_002ddirectory"><span class="category-def">User Option: </span><span><strong class="def-name">temporary-file-directory</strong><a class="copiable-link" href="#index-temporary_002dfile_002ddirectory"> &para;</a></span></dt>
<dd><a class="index-entry-id" id="index-TMPDIR-environment-variable"></a>
<a class="index-entry-id" id="index-TMP-environment-variable"></a>
<a class="index-entry-id" id="index-TEMP-environment-variable"></a>
<p>This variable specifies the directory name for creating temporary files.
Its value should be a directory name (see <a class="pxref" href="Directory-Names.html">Directory Names</a>), but it
is good for Lisp programs to cope if the value is a directory&rsquo;s file
name instead.  Using the value as the second argument to
<code class="code">expand-file-name</code> is a good way to achieve that.
</p>
<p>The default value is determined in a reasonable way for your operating
system; it is based on the <code class="env">TMPDIR</code>, <code class="env">TMP</code> and <code class="env">TEMP</code>
environment variables, with a fall-back to a system-dependent name if
none of these variables is defined.
</p>
<p>Even if you do not use <code class="code">make-temp-file</code> to create the temporary
file, you should still use this variable to decide which directory to
put the file in.  However, if you expect the file to be small, you
should use <code class="code">small-temporary-file-directory</code> first if that is
non-<code class="code">nil</code>.
</p></dd></dl>

<dl class="first-defvr first-defopt-alias-first-defvr">
<dt class="defvr defopt-alias-defvr" id="index-small_002dtemporary_002dfile_002ddirectory"><span class="category-def">User Option: </span><span><strong class="def-name">small-temporary-file-directory</strong><a class="copiable-link" href="#index-small_002dtemporary_002dfile_002ddirectory"> &para;</a></span></dt>
<dd><p>This variable specifies the directory name for
creating certain temporary files, which are likely to be small.
</p>
<p>If you want to write a temporary file which is likely to be small, you
should compute the directory like this:
</p>
<div class="example">
<pre class="example-preformatted">(make-temp-file
  (expand-file-name <var class="var">prefix</var>
                    (or small-temporary-file-directory
                        temporary-file-directory)))
</pre></div>
</dd></dl>

<dl class="first-deffn first-defun-alias-first-deffn">
<dt class="deffn defun-alias-deffn" id="index-make_002dtemp_002dname"><span class="category-def">Function: </span><span><strong class="def-name">make-temp-name</strong> <var class="def-var-arguments">base-name</var><a class="copiable-link" href="#index-make_002dtemp_002dname"> &para;</a></span></dt>
<dd><p>This function generates a string that can be used as a unique file
name.  The name starts with <var class="var">base-name</var>, and has several random
characters appended to it, which are different in each Emacs job.  It
is like <code class="code">make-temp-file</code> except that (i) it just constructs a
name, and does not create a file, and (ii) <var class="var">base-name</var> should be
an absolute file name (on MS-DOS, this function can truncate
<var class="var">base-name</var> to fit into the 8+3 file-name limits).
</p>
<p><strong class="strong">Warning:</strong> In most cases, you should not use this function; use
<code class="code">make-temp-file</code> instead!  This function is susceptible to a race
condition, between the <code class="code">make-temp-name</code> call and the creation of
the file, which in some cases may cause a security hole.
</p></dd></dl>

</div>
<hr>
<div class="nav-panel">
<p>
Next: <a href="File-Name-Completion.html">File Name Completion</a>, Previous: <a href="File-Name-Expansion.html">Functions that Expand Filenames</a>, Up: <a href="File-Names.html">File Names</a> &nbsp; [<a href="index.html#SEC_Contents" title="Table of contents" rel="contents">Contents</a>][<a href="Index.html" title="Index" rel="index">Index</a>]</p>
</div>



</body>
</html>
