<!DOCTYPE html>
<html>
<!-- Created by GNU Texinfo 7.1, https://www.gnu.org/software/texinfo/ -->
<head>
<meta http-equiv="Content-Type" content="text/html; charset=utf-8">
<!-- This is the GNU Emacs Lisp Reference Manual
corresponding to Emacs version 24.4.

Copyright Â© 1990-1996, 1998-2014 Free Software Foundation, Inc.

Permission is granted to copy, distribute and/or modify this document
under the terms of the GNU Free Documentation License, Version 1.3 or
any later version published by the Free Software Foundation; with the
Invariant Sections being "GNU General Public License," with the
Front-Cover Texts being "A GNU Manual," and with the Back-Cover
Texts as in (a) below.  A copy of the license is included in the
section entitled "GNU Free Documentation License."

(a) The FSF's Back-Cover Text is: "You have the freedom to copy and
modify this GNU manual.  Buying copies from the FSF supports it in
developing GNU and promoting software freedom." -->
<title>Desktop Notifications (GNU Emacs Lisp Reference Manual)</title>

<meta name="description" content="Desktop Notifications (GNU Emacs Lisp Reference Manual)">
<meta name="keywords" content="Desktop Notifications (GNU Emacs Lisp Reference Manual)">
<meta name="resource-type" content="document">
<meta name="distribution" content="global">
<meta name="Generator" content="makeinfo">
<meta name="viewport" content="width=device-width,initial-scale=1">

<link href="index.html" rel="start" title="Top">
<link href="Index.html" rel="index" title="Index">
<link href="index.html#SEC_Contents" rel="contents" title="Table of Contents">
<link href="System-Interface.html" rel="up" title="System Interface">
<link href="File-Notifications.html" rel="next" title="File Notifications">
<link href="Session-Management.html" rel="prev" title="Session Management">
<style type="text/css">
<!--
a.copiable-link {visibility: hidden; text-decoration: none; line-height: 0em}
div.example {margin-left: 3.2em}
span:hover a.copiable-link {visibility: visible}
strong.def-name {font-family: monospace; font-weight: bold; font-size: larger}
ul.mark-bullet {list-style-type: disc}
-->
</style>
<link rel="stylesheet" type="text/css" href="./manual.css">


</head>

<body lang="en">
<div class="section-level-extent" id="Desktop-Notifications">
<div class="nav-panel">
<p>
Next: <a href="File-Notifications.html" accesskey="n" rel="next">Notifications on File Changes</a>, Previous: <a href="Session-Management.html" accesskey="p" rel="prev">Session Management</a>, Up: <a href="System-Interface.html" accesskey="u" rel="up">Operating System Interface</a> &nbsp; [<a href="index.html#SEC_Contents" title="Table of contents" rel="contents">Contents</a>][<a href="Index.html" title="Index" rel="index">Index</a>]</p>
</div>
<hr>
<h3 class="section" id="Desktop-Notifications-1"><span>38.18 Desktop Notifications<a class="copiable-link" href="#Desktop-Notifications-1"> &para;</a></span></h3>
<a class="index-entry-id" id="index-desktop-notifications"></a>
<a class="index-entry-id" id="index-notifications_002c-on-desktop"></a>

<p>Emacs is able to send <em class="dfn">notifications</em> on systems that support the
freedesktop.org Desktop Notifications Specification.  In order to use
this functionality, Emacs must have been compiled with D-Bus support,
and the <code class="code">notifications</code> library must be loaded.  See <a data-manual="dbus" href="https://www.gnu.org/software/emacs/manual/html_node/dbus/index.html#Top">D-Bus</a> in <cite class="cite">D-Bus integration in Emacs</cite>.
</p>
<dl class="first-deffn first-defun-alias-first-deffn">
<dt class="deffn defun-alias-deffn" id="index-notifications_002dnotify"><span class="category-def">Function: </span><span><strong class="def-name">notifications-notify</strong> <var class="def-var-arguments">&amp;rest params</var><a class="copiable-link" href="#index-notifications_002dnotify"> &para;</a></span></dt>
<dd><p>This function sends a notification to the desktop via D-Bus,
consisting of the parameters specified by the <var class="var">params</var> arguments.
These arguments should consist of alternating keyword and value pairs.
The supported keywords and values are as follows:
</p>
<dl class="table">
<dt><code class="code">:bus <var class="var">bus</var></code></dt>
<dd><p>The D-Bus bus.  This argument is needed only if a bus other than
<code class="code">:session</code> shall be used.
</p>
</dd>
<dt><code class="code">:title <var class="var">title</var></code></dt>
<dd><p>The notification title.
</p>
</dd>
<dt><code class="code">:body <var class="var">text</var></code></dt>
<dd><p>The notification body text.  Depending on the implementation of the
notification server, the text could contain HTML markups, like
&lsquo;<samp class="samp">&quot;&lt;b&gt;bold text&lt;/b&gt;&quot;</samp>&rsquo;, hyperlinks, or images.  Special HTML
characters must be encoded, as &lsquo;<samp class="samp">&quot;Contact
&amp;lt;postmaster@localhost&amp;gt;!&quot;</samp>&rsquo;.
</p>
</dd>
<dt><code class="code">:app-name <var class="var">name</var></code></dt>
<dd><p>The name of the application sending the notification.  The default is
<code class="code">notifications-application-name</code>.
</p>
</dd>
<dt><code class="code">:replaces-id <var class="var">id</var></code></dt>
<dd><p>The notification <var class="var">id</var> that this notification replaces.  <var class="var">id</var>
must be the result of a previous <code class="code">notifications-notify</code> call.
</p>
</dd>
<dt><code class="code">:app-icon <var class="var">icon-file</var></code></dt>
<dd><p>The file name of the notification icon.  If set to <code class="code">nil</code>, no icon
is displayed.  The default is <code class="code">notifications-application-icon</code>.
</p>
</dd>
<dt><code class="code">:actions (<var class="var">key</var> <var class="var">title</var> <var class="var">key</var> <var class="var">title</var> ...)</code></dt>
<dd><p>A list of actions to be applied.  <var class="var">key</var> and <var class="var">title</var> are both
strings.  The default action (usually invoked by clicking the
notification) should have a key named &lsquo;<samp class="samp">&quot;default&quot;</samp>&rsquo;.  The title can
be anything, though implementations are free not to display it.
</p>
</dd>
<dt><code class="code">:timeout <var class="var">timeout</var></code></dt>
<dd><p>The timeout time in milliseconds since the display of the notification
at which the notification should automatically close.  If &minus;1, the
notification&rsquo;s expiration time is dependent on the notification
server&rsquo;s settings, and may vary for the type of notification.  If 0,
the notification never expires.  Default value is &minus;1.
</p>
</dd>
<dt><code class="code">:urgency <var class="var">urgency</var></code></dt>
<dd><p>The urgency level.  It can be <code class="code">low</code>, <code class="code">normal</code>, or <code class="code">critical</code>.
</p>
</dd>
<dt><code class="code">:action-items</code></dt>
<dd><p>When this keyword is given, the <var class="var">title</var> string of the actions is
interpreted as icon name.
</p>
</dd>
<dt><code class="code">:category <var class="var">category</var></code></dt>
<dd><p>The type of notification this is, a string.  See the
<a class="uref" href="http://developer.gnome.org/notification-spec/#categories">Desktop Notifications Specification</a> for a list of standard
categories.
</p>
</dd>
<dt><code class="code">:desktop-entry <var class="var">filename</var></code></dt>
<dd><p>This specifies the name of the desktop filename representing the
calling program, like &lsquo;<samp class="samp">&quot;emacs&quot;</samp>&rsquo;.
</p>
</dd>
<dt><code class="code">:image-data (<var class="var">width</var> <var class="var">height</var> <var class="var">rowstride</var> <var class="var">has-alpha</var> <var class="var">bits</var> <var class="var">channels</var> <var class="var">data</var>)</code></dt>
<dd><p>This is a raw data image format that describes the width, height,
rowstride, whether there is an alpha channel, bits per sample,
channels and image data, respectively.
</p>
</dd>
<dt><code class="code">:image-path <var class="var">path</var></code></dt>
<dd><p>This is represented either as a URI (&lsquo;<samp class="samp">file://</samp>&rsquo; is the only URI
schema supported right now) or a name in a freedesktop.org-compliant
icon theme from &lsquo;<samp class="samp">$XDG_DATA_DIRS/icons</samp>&rsquo;.
</p>
</dd>
<dt><code class="code">:sound-file <var class="var">filename</var></code></dt>
<dd><p>The path to a sound file to play when the notification pops up.
</p>
</dd>
<dt><code class="code">:sound-name <var class="var">name</var></code></dt>
<dd><p>A themable named sound from the freedesktop.org sound naming
specification from &lsquo;<samp class="samp">$XDG_DATA_DIRS/sounds</samp>&rsquo;, to play when the
notification pops up.  Similar to the icon name, only for sounds. An
example would be &lsquo;<samp class="samp">&quot;message-new-instant&quot;</samp>&rsquo;.
</p>
</dd>
<dt><code class="code">:suppress-sound</code></dt>
<dd><p>Causes the server to suppress playing any sounds, if it has that
ability.
</p>
</dd>
<dt><code class="code">:resident</code></dt>
<dd><p>When set the server will not automatically remove the notification
when an action has been invoked. The notification will remain resident
in the server until it is explicitly removed by the user or by the
sender. This hint is likely only useful when the server has the
<code class="code">:persistence</code> capability.
</p>
</dd>
<dt><code class="code">:transient</code></dt>
<dd><p>When set the server will treat the notification as transient and
by-pass the server&rsquo;s persistence capability, if it should exist.
</p>
</dd>
<dt><code class="code">:x <var class="var">position</var></code></dt>
<dt><code class="code">:y <var class="var">position</var></code></dt>
<dd><p>Specifies the X, Y location on the screen that the
notification should point to.  Both arguments must be used together.
</p>
</dd>
<dt><code class="code">:on-action <var class="var">function</var></code></dt>
<dd><p>Function to call when an action is invoked.  The notification <var class="var">id</var>
and the <var class="var">key</var> of the action are passed as arguments to the
function.
</p>
</dd>
<dt><code class="code">:on-close <var class="var">function</var></code></dt>
<dd><p>Function to call when the notification has been closed by timeout or
by the user.  The function receive the notification <var class="var">id</var> and the closing
<var class="var">reason</var> as arguments:
</p>
<ul class="itemize mark-bullet">
<li><code class="code">expired</code> if the notification has expired
</li><li><code class="code">dismissed</code> if the notification was dismissed by the user
</li><li><code class="code">close-notification</code> if the notification was closed by a call to
<code class="code">notifications-close-notification</code>
</li><li><code class="code">undefined</code> if the notification server hasn&rsquo;t provided a reason
</li></ul>
</dd>
</dl>

<p>Which parameters are accepted by the notification server can be
checked via <code class="code">notifications-get-capabilities</code>.
</p>
<p>This function returns a notification id, an integer, which can be used
to manipulate the notification item with
<code class="code">notifications-close-notification</code> or the <code class="code">:replaces-id</code>
argument of another <code class="code">notifications-notify</code> call.  For example:
</p>
<div class="example">
<div class="group"><pre class="example-preformatted">(defun my-on-action-function (id key)
  (message &quot;Message %d, key \&quot;%s\&quot; pressed&quot; id key))
     &rArr; my-on-action-function
</pre></div><pre class="example-preformatted">

</pre><div class="group"><pre class="example-preformatted">(defun my-on-close-function (id reason)
  (message &quot;Message %d, closed due to \&quot;%s\&quot;&quot; id reason))
     &rArr; my-on-close-function
</pre></div><pre class="example-preformatted">

</pre><div class="group"><pre class="example-preformatted">(notifications-notify
 :title &quot;Title&quot;
 :body &quot;This is &lt;b&gt;important&lt;/b&gt;.&quot;
 :actions '(&quot;Confirm&quot; &quot;I agree&quot; &quot;Refuse&quot; &quot;I disagree&quot;)
 :on-action 'my-on-action-function
 :on-close 'my-on-close-function)
     &rArr; 22
</pre></div><pre class="example-preformatted">

</pre><div class="group"><pre class="example-preformatted">A message window opens on the desktop.  Press &quot;I agree&quot;
     &rArr; Message 22, key &quot;Confirm&quot; pressed
        Message 22, closed due to &quot;dismissed&quot;
</pre></div></div>
</dd></dl>

<dl class="first-deffn first-defun-alias-first-deffn">
<dt class="deffn defun-alias-deffn" id="index-notifications_002dclose_002dnotification"><span class="category-def">Function: </span><span><strong class="def-name">notifications-close-notification</strong> <var class="def-var-arguments">id &amp;optional bus</var><a class="copiable-link" href="#index-notifications_002dclose_002dnotification"> &para;</a></span></dt>
<dd><p>This function closes a notification with identifier <var class="var">id</var>.
<var class="var">bus</var> can be a string denoting a D-Bus connection, the default is
<code class="code">:session</code>.
</p></dd></dl>

<dl class="first-deffn first-defun-alias-first-deffn">
<dt class="deffn defun-alias-deffn" id="index-notifications_002dget_002dcapabilities"><span class="category-def">Function: </span><span><strong class="def-name">notifications-get-capabilities</strong> <var class="def-var-arguments">&amp;optional bus</var><a class="copiable-link" href="#index-notifications_002dget_002dcapabilities"> &para;</a></span></dt>
<dd><p>Returns the capabilities of the notification server, a list of
symbols.  <var class="var">bus</var> can be a string denoting a D-Bus connection, the
default is <code class="code">:session</code>.  The following capabilities can be
expected:
</p>
<dl class="table">
<dt><code class="code">:actions</code></dt>
<dd><p>The server will provide the specified actions to the user.
</p>
</dd>
<dt><code class="code">:body</code></dt>
<dd><p>Supports body text.
</p>
</dd>
<dt><code class="code">:body-hyperlinks</code></dt>
<dd><p>The server supports hyperlinks in the notifications.
</p>
</dd>
<dt><code class="code">:body-images</code></dt>
<dd><p>The server supports images in the notifications.
</p>
</dd>
<dt><code class="code">:body-markup</code></dt>
<dd><p>Supports markup in the body text.
</p>
</dd>
<dt><code class="code">:icon-multi</code></dt>
<dd><p>The server will render an animation of all the frames in a given image
array.
</p>
</dd>
<dt><code class="code">:icon-static</code></dt>
<dd><p>Supports display of exactly 1 frame of any given image array.  This
value is mutually exclusive with <code class="code">:icon-multi</code>.
</p>
</dd>
<dt><code class="code">:persistence</code></dt>
<dd><p>The server supports persistence of notifications.
</p>
</dd>
<dt><code class="code">:sound</code></dt>
<dd><p>The server supports sounds on notifications.
</p></dd>
</dl>

<p>Further vendor-specific caps start with <code class="code">:x-vendor</code>, like
<code class="code">:x-gnome-foo-cap</code>.
</p></dd></dl>

<dl class="first-deffn first-defun-alias-first-deffn">
<dt class="deffn defun-alias-deffn" id="index-notifications_002dget_002dserver_002dinformation"><span class="category-def">Function: </span><span><strong class="def-name">notifications-get-server-information</strong> <var class="def-var-arguments">&amp;optional bus</var><a class="copiable-link" href="#index-notifications_002dget_002dserver_002dinformation"> &para;</a></span></dt>
<dd><p>Return information on the notification server, a list of strings.
<var class="var">bus</var> can be a string denoting a D-Bus connection, the default is
<code class="code">:session</code>.  The returned list is <code class="code">(<var class="var">name</var> <var class="var">vendor</var>
<var class="var">version</var> <var class="var">spec-version</var>)</code>.
</p>
<dl class="table">
<dt><var class="var">name</var></dt>
<dd><p>The product name of the server.
</p>
</dd>
<dt><var class="var">vendor</var></dt>
<dd><p>The vendor name.  For example, &lsquo;<samp class="samp">&quot;KDE&quot;</samp>&rsquo;, &lsquo;<samp class="samp">&quot;GNOME&quot;</samp>&rsquo;.
</p>
</dd>
<dt><var class="var">version</var></dt>
<dd><p>The server&rsquo;s version number.
</p>
</dd>
<dt><var class="var">spec-version</var></dt>
<dd><p>The specification version the server is compliant with.
</p></dd>
</dl>

<p>If <var class="var">SPEC_VERSION</var> is <code class="code">nil</code>, the server supports a
specification prior to &lsquo;<samp class="samp">&quot;1.0&quot;</samp>&rsquo;.
</p></dd></dl>

</div>
<hr>
<div class="nav-panel">
<p>
Next: <a href="File-Notifications.html">Notifications on File Changes</a>, Previous: <a href="Session-Management.html">Session Management</a>, Up: <a href="System-Interface.html">Operating System Interface</a> &nbsp; [<a href="index.html#SEC_Contents" title="Table of contents" rel="contents">Contents</a>][<a href="Index.html" title="Index" rel="index">Index</a>]</p>
</div>



</body>
</html>
