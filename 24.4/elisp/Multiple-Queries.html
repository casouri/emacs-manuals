<!DOCTYPE html>
<html>
<!-- Created by GNU Texinfo 7.1, https://www.gnu.org/software/texinfo/ -->
<head>
<meta http-equiv="Content-Type" content="text/html; charset=utf-8">
<!-- This is the GNU Emacs Lisp Reference Manual
corresponding to Emacs version 24.4.

Copyright Â© 1990-1996, 1998-2014 Free Software Foundation, Inc.

Permission is granted to copy, distribute and/or modify this document
under the terms of the GNU Free Documentation License, Version 1.3 or
any later version published by the Free Software Foundation; with the
Invariant Sections being "GNU General Public License," with the
Front-Cover Texts being "A GNU Manual," and with the Back-Cover
Texts as in (a) below.  A copy of the license is included in the
section entitled "GNU Free Documentation License."

(a) The FSF's Back-Cover Text is: "You have the freedom to copy and
modify this GNU manual.  Buying copies from the FSF supports it in
developing GNU and promoting software freedom." -->
<title>Multiple Queries (GNU Emacs Lisp Reference Manual)</title>

<meta name="description" content="Multiple Queries (GNU Emacs Lisp Reference Manual)">
<meta name="keywords" content="Multiple Queries (GNU Emacs Lisp Reference Manual)">
<meta name="resource-type" content="document">
<meta name="distribution" content="global">
<meta name="Generator" content="makeinfo">
<meta name="viewport" content="width=device-width,initial-scale=1">

<link href="index.html" rel="start" title="Top">
<link href="Index.html" rel="index" title="Index">
<link href="index.html#SEC_Contents" rel="contents" title="Table of Contents">
<link href="Minibuffers.html" rel="up" title="Minibuffers">
<link href="Reading-a-Password.html" rel="next" title="Reading a Password">
<link href="Yes_002dor_002dNo-Queries.html" rel="prev" title="Yes-or-No Queries">
<style type="text/css">
<!--
a.copiable-link {visibility: hidden; text-decoration: none; line-height: 0em}
div.example {margin-left: 3.2em}
kbd.kbd {font-style: oblique}
kbd.key {font-style: normal}
span:hover a.copiable-link {visibility: visible}
strong.def-name {font-family: monospace; font-weight: bold; font-size: larger}
-->
</style>
<link rel="stylesheet" type="text/css" href="./manual.css">


</head>

<body lang="en">
<div class="section-level-extent" id="Multiple-Queries">
<div class="nav-panel">
<p>
Next: <a href="Reading-a-Password.html" accesskey="n" rel="next">Reading a Password</a>, Previous: <a href="Yes_002dor_002dNo-Queries.html" accesskey="p" rel="prev">Yes-or-No Queries</a>, Up: <a href="Minibuffers.html" accesskey="u" rel="up">Minibuffers</a> &nbsp; [<a href="index.html#SEC_Contents" title="Table of contents" rel="contents">Contents</a>][<a href="Index.html" title="Index" rel="index">Index</a>]</p>
</div>
<hr>
<h3 class="section" id="Asking-Multiple-Y_002dor_002dN-Questions"><span>19.8 Asking Multiple Y-or-N Questions<a class="copiable-link" href="#Asking-Multiple-Y_002dor_002dN-Questions"> &para;</a></span></h3>

<p>When you have a series of similar questions to ask, such as &ldquo;Do you
want to save this buffer&rdquo; for each buffer in turn, you should use
<code class="code">map-y-or-n-p</code> to ask the collection of questions, rather than
asking each question individually.  This gives the user certain
convenient facilities such as the ability to answer the whole series at
once.
</p>
<dl class="first-deffn first-defun-alias-first-deffn">
<dt class="deffn defun-alias-deffn" id="index-map_002dy_002dor_002dn_002dp"><span class="category-def">Function: </span><span><strong class="def-name">map-y-or-n-p</strong> <var class="def-var-arguments">prompter actor list &amp;optional help action-alist no-cursor-in-echo-area</var><a class="copiable-link" href="#index-map_002dy_002dor_002dn_002dp"> &para;</a></span></dt>
<dd><p>This function asks the user a series of questions, reading a
single-character answer in the echo area for each one.
</p>
<p>The value of <var class="var">list</var> specifies the objects to ask questions about.
It should be either a list of objects or a generator function.  If it is
a function, it should expect no arguments, and should return either the
next object to ask about, or <code class="code">nil</code>, meaning to stop asking questions.
</p>
<p>The argument <var class="var">prompter</var> specifies how to ask each question.  If
<var class="var">prompter</var> is a string, the question text is computed like this:
</p>
<div class="example">
<pre class="example-preformatted">(format <var class="var">prompter</var> <var class="var">object</var>)
</pre></div>

<p>where <var class="var">object</var> is the next object to ask about (as obtained from
<var class="var">list</var>).
</p>
<p>If not a string, <var class="var">prompter</var> should be a function of one argument
(the next object to ask about) and should return the question text.  If
the value is a string, that is the question to ask the user.  The
function can also return <code class="code">t</code>, meaning do act on this object (and
don&rsquo;t ask the user), or <code class="code">nil</code>, meaning ignore this object (and don&rsquo;t
ask the user).
</p>
<p>The argument <var class="var">actor</var> says how to act on the answers that the user
gives.  It should be a function of one argument, and it is called with
each object that the user says yes for.  Its argument is always an
object obtained from <var class="var">list</var>.
</p>
<p>If the argument <var class="var">help</var> is given, it should be a list of this form:
</p>
<div class="example">
<pre class="example-preformatted">(<var class="var">singular</var> <var class="var">plural</var> <var class="var">action</var>)
</pre></div>

<p>where <var class="var">singular</var> is a string containing a singular noun that
describes the objects conceptually being acted on, <var class="var">plural</var> is the
corresponding plural noun, and <var class="var">action</var> is a transitive verb
describing what <var class="var">actor</var> does.
</p>
<p>If you don&rsquo;t specify <var class="var">help</var>, the default is <code class="code">(&quot;object&quot;
&quot;objects&quot; &quot;act on&quot;)</code>.
</p>
<p>Each time a question is asked, the user may enter <kbd class="kbd">y</kbd>, <kbd class="kbd">Y</kbd>, or
<kbd class="key">SPC</kbd> to act on that object; <kbd class="kbd">n</kbd>, <kbd class="kbd">N</kbd>, or <kbd class="key">DEL</kbd> to skip
that object; <kbd class="kbd">!</kbd> to act on all following objects; <kbd class="key">ESC</kbd> or
<kbd class="kbd">q</kbd> to exit (skip all following objects); <kbd class="kbd">.</kbd> (period) to act on
the current object and then exit; or <kbd class="kbd">C-h</kbd> to get help.  These are
the same answers that <code class="code">query-replace</code> accepts.  The keymap
<code class="code">query-replace-map</code> defines their meaning for <code class="code">map-y-or-n-p</code>
as well as for <code class="code">query-replace</code>; see <a class="ref" href="Search-and-Replace.html">Search and Replace</a>.
</p>
<p>You can use <var class="var">action-alist</var> to specify additional possible answers
and what they mean.  It is an alist of elements of the form
<code class="code">(<var class="var">char</var> <var class="var">function</var> <var class="var">help</var>)</code>, each of which defines one
additional answer.  In this element, <var class="var">char</var> is a character (the
answer); <var class="var">function</var> is a function of one argument (an object from
<var class="var">list</var>); <var class="var">help</var> is a string.
</p>
<p>When the user responds with <var class="var">char</var>, <code class="code">map-y-or-n-p</code> calls
<var class="var">function</var>.  If it returns non-<code class="code">nil</code>, the object is considered
&ldquo;acted upon&rdquo;, and <code class="code">map-y-or-n-p</code> advances to the next object in
<var class="var">list</var>.  If it returns <code class="code">nil</code>, the prompt is repeated for the
same object.
</p>
<p>Normally, <code class="code">map-y-or-n-p</code> binds <code class="code">cursor-in-echo-area</code> while
prompting.  But if <var class="var">no-cursor-in-echo-area</var> is non-<code class="code">nil</code>, it
does not do that.
</p>
<p>If <code class="code">map-y-or-n-p</code> is called in a command that was invoked using the
mouse&mdash;more precisely, if <code class="code">last-nonmenu-event</code> (see <a class="pxref" href="Command-Loop-Info.html">Information from the Command Loop</a>) is either <code class="code">nil</code> or a list&mdash;then it uses a dialog box
or pop-up menu to ask the question.  In this case, it does not use
keyboard input or the echo area.  You can force use either of the mouse or
of keyboard input by binding <code class="code">last-nonmenu-event</code> to a suitable
value around the call.
</p>
<p>The return value of <code class="code">map-y-or-n-p</code> is the number of objects acted on.
</p></dd></dl>

</div>
<hr>
<div class="nav-panel">
<p>
Next: <a href="Reading-a-Password.html">Reading a Password</a>, Previous: <a href="Yes_002dor_002dNo-Queries.html">Yes-or-No Queries</a>, Up: <a href="Minibuffers.html">Minibuffers</a> &nbsp; [<a href="index.html#SEC_Contents" title="Table of contents" rel="contents">Contents</a>][<a href="Index.html" title="Index" rel="index">Index</a>]</p>
</div>



</body>
</html>
