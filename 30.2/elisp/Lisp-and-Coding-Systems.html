<!DOCTYPE html>
<html>
<!-- Created by GNU Texinfo 7.1, https://www.gnu.org/software/texinfo/ -->
<head>
<meta http-equiv="Content-Type" content="text/html; charset=utf-8">
<!-- This is the GNU Emacs Lisp Reference Manual
corresponding to Emacs version 30.2.

Copyright Â© 1990-1996, 1998-2025 Free Software Foundation,
Inc.

Permission is granted to copy, distribute and/or modify this document
under the terms of the GNU Free Documentation License, Version 1.3 or
any later version published by the Free Software Foundation; with the
Invariant Sections being "GNU General Public License," with the
Front-Cover Texts being "A GNU Manual," and with the Back-Cover
Texts as in (a) below.  A copy of the license is included in the
section entitled "GNU Free Documentation License."

(a) The FSF's Back-Cover Text is: "You have the freedom to copy and
modify this GNU manual.  Buying copies from the FSF supports it in
developing GNU and promoting software freedom." -->
<title>Lisp and Coding Systems (GNU Emacs Lisp Reference Manual)</title>

<meta name="description" content="Lisp and Coding Systems (GNU Emacs Lisp Reference Manual)">
<meta name="keywords" content="Lisp and Coding Systems (GNU Emacs Lisp Reference Manual)">
<meta name="resource-type" content="document">
<meta name="distribution" content="global">
<meta name="Generator" content="makeinfo">
<meta name="viewport" content="width=device-width,initial-scale=1">

<link href="index.html" rel="start" title="Top">
<link href="Index.html" rel="index" title="Index">
<link href="index.html#SEC_Contents" rel="contents" title="Table of Contents">
<link href="Coding-Systems.html" rel="up" title="Coding Systems">
<link href="User_002dChosen-Coding-Systems.html" rel="next" title="User-Chosen Coding Systems">
<link href="Encoding-and-I_002fO.html" rel="prev" title="Encoding and I/O">
<style type="text/css">
<!--
a.copiable-link {visibility: hidden; text-decoration: none; line-height: 0em}
div.example {margin-left: 3.2em}
span:hover a.copiable-link {visibility: visible}
strong.def-name {font-family: monospace; font-weight: bold; font-size: larger}
ul.mark-bullet {list-style-type: disc}
-->
</style>
<link rel="stylesheet" type="text/css" href="./manual.css">


</head>

<body lang="en">
<div class="subsection-level-extent" id="Lisp-and-Coding-Systems">
<div class="nav-panel">
<p>
Next: <a href="User_002dChosen-Coding-Systems.html" accesskey="n" rel="next">User-Chosen Coding Systems</a>, Previous: <a href="Encoding-and-I_002fO.html" accesskey="p" rel="prev">Encoding and I/O</a>, Up: <a href="Coding-Systems.html" accesskey="u" rel="up">Coding Systems</a> &nbsp; [<a href="index.html#SEC_Contents" title="Table of contents" rel="contents">Contents</a>][<a href="Index.html" title="Index" rel="index">Index</a>]</p>
</div>
<hr>
<h4 class="subsection" id="Coding-Systems-in-Lisp"><span>34.10.3 Coding Systems in Lisp<a class="copiable-link" href="#Coding-Systems-in-Lisp"> &para;</a></span></h4>

<p>Here are the Lisp facilities for working with coding systems:
</p>
<a class="index-entry-id" id="index-list-all-coding-systems"></a>
<dl class="first-deffn first-defun-alias-first-deffn">
<dt class="deffn defun-alias-deffn" id="index-coding_002dsystem_002dlist"><span class="category-def">Function: </span><span><strong class="def-name">coding-system-list</strong> <var class="def-var-arguments">&amp;optional base-only</var><a class="copiable-link" href="#index-coding_002dsystem_002dlist"> &para;</a></span></dt>
<dd><p>This function returns a list of all coding system names (symbols).  If
<var class="var">base-only</var> is non-<code class="code">nil</code>, the value includes only the
base coding systems.  Otherwise, it includes alias and variant coding
systems as well.
</p></dd></dl>

<dl class="first-deffn first-defun-alias-first-deffn">
<dt class="deffn defun-alias-deffn" id="index-coding_002dsystem_002dp"><span class="category-def">Function: </span><span><strong class="def-name">coding-system-p</strong> <var class="def-var-arguments">object</var><a class="copiable-link" href="#index-coding_002dsystem_002dp"> &para;</a></span></dt>
<dd><p>This function returns <code class="code">t</code> if <var class="var">object</var> is a coding system
name or <code class="code">nil</code>.
</p></dd></dl>

<a class="index-entry-id" id="index-validity-of-coding-system"></a>
<a class="index-entry-id" id="index-coding-system_002c-validity-check"></a>
<dl class="first-deffn first-defun-alias-first-deffn">
<dt class="deffn defun-alias-deffn" id="index-check_002dcoding_002dsystem"><span class="category-def">Function: </span><span><strong class="def-name">check-coding-system</strong> <var class="def-var-arguments">coding-system</var><a class="copiable-link" href="#index-check_002dcoding_002dsystem"> &para;</a></span></dt>
<dd><p>This function checks the validity of <var class="var">coding-system</var>.  If that is
valid, it returns <var class="var">coding-system</var>.  If <var class="var">coding-system</var> is
<code class="code">nil</code>, the function returns <code class="code">nil</code>.  For any other values, it
signals an error whose <code class="code">error-symbol</code> is <code class="code">coding-system-error</code>
(see <a class="pxref" href="Signaling-Errors.html">signal</a>).
</p></dd></dl>

<a class="index-entry-id" id="index-eol-type-of-coding-system"></a>
<dl class="first-deffn first-defun-alias-first-deffn">
<dt class="deffn defun-alias-deffn" id="index-coding_002dsystem_002deol_002dtype"><span class="category-def">Function: </span><span><strong class="def-name">coding-system-eol-type</strong> <var class="def-var-arguments">coding-system</var><a class="copiable-link" href="#index-coding_002dsystem_002deol_002dtype"> &para;</a></span></dt>
<dd><p>This function returns the type of end-of-line (a.k.a. <em class="dfn">eol</em>)
conversion used by <var class="var">coding-system</var>.  If <var class="var">coding-system</var>
specifies a certain eol conversion, the return value is an integer 0,
1, or 2, standing for <code class="code">unix</code>, <code class="code">dos</code>, and <code class="code">mac</code>,
respectively.  If <var class="var">coding-system</var> doesn&rsquo;t specify eol conversion
explicitly, the return value is a vector of coding systems, each one
with one of the possible eol conversion types, like this:
</p>
<div class="example lisp">
<pre class="lisp-preformatted">(coding-system-eol-type 'latin-1)
     &rArr; [latin-1-unix latin-1-dos latin-1-mac]
</pre></div>

<p>If this function returns a vector, Emacs will decide, as part of the
text encoding or decoding process, what eol conversion to use.  For
decoding, the end-of-line format of the text is auto-detected, and the
eol conversion is set to match it (e.g., DOS-style CRLF format will
imply <code class="code">dos</code> eol conversion).  For encoding, the eol conversion is
taken from the appropriate default coding system (e.g.,
default value of <code class="code">buffer-file-coding-system</code> for
<code class="code">buffer-file-coding-system</code>), or from the default eol conversion
appropriate for the underlying platform.
</p></dd></dl>

<a class="index-entry-id" id="index-eol-conversion-of-coding-system"></a>
<dl class="first-deffn first-defun-alias-first-deffn">
<dt class="deffn defun-alias-deffn" id="index-coding_002dsystem_002dchange_002deol_002dconversion"><span class="category-def">Function: </span><span><strong class="def-name">coding-system-change-eol-conversion</strong> <var class="def-var-arguments">coding-system eol-type</var><a class="copiable-link" href="#index-coding_002dsystem_002dchange_002deol_002dconversion"> &para;</a></span></dt>
<dd><p>This function returns a coding system which is like <var class="var">coding-system</var>
except for its eol conversion, which is specified by <code class="code">eol-type</code>.
<var class="var">eol-type</var> should be <code class="code">unix</code>, <code class="code">dos</code>, <code class="code">mac</code>, or
<code class="code">nil</code>.  If it is <code class="code">nil</code>, the returned coding system determines
the end-of-line conversion from the data.
</p>
<p><var class="var">eol-type</var> may also be 0, 1 or 2, standing for <code class="code">unix</code>,
<code class="code">dos</code> and <code class="code">mac</code>, respectively.
</p></dd></dl>

<a class="index-entry-id" id="index-text-conversion-of-coding-system"></a>
<dl class="first-deffn first-defun-alias-first-deffn">
<dt class="deffn defun-alias-deffn" id="index-coding_002dsystem_002dchange_002dtext_002dconversion"><span class="category-def">Function: </span><span><strong class="def-name">coding-system-change-text-conversion</strong> <var class="def-var-arguments">eol-coding text-coding</var><a class="copiable-link" href="#index-coding_002dsystem_002dchange_002dtext_002dconversion"> &para;</a></span></dt>
<dd><p>This function returns a coding system which uses the end-of-line
conversion of <var class="var">eol-coding</var>, and the text conversion of
<var class="var">text-coding</var>.  If <var class="var">text-coding</var> is <code class="code">nil</code>, it returns
<code class="code">undecided</code>, or one of its variants according to <var class="var">eol-coding</var>.
</p></dd></dl>

<a class="index-entry-id" id="index-safely-encode-region"></a>
<a class="index-entry-id" id="index-coding-systems-for-encoding-region"></a>
<dl class="first-deffn first-defun-alias-first-deffn">
<dt class="deffn defun-alias-deffn" id="index-find_002dcoding_002dsystems_002dregion"><span class="category-def">Function: </span><span><strong class="def-name">find-coding-systems-region</strong> <var class="def-var-arguments">from to</var><a class="copiable-link" href="#index-find_002dcoding_002dsystems_002dregion"> &para;</a></span></dt>
<dd><p>This function returns a list of coding systems that could be used to
encode a text between <var class="var">from</var> and <var class="var">to</var>.  All coding systems in
the list can safely encode any multibyte characters in that portion of
the text.
</p>
<p>If the text contains no multibyte characters, the function returns the
list <code class="code">(undecided)</code>.
</p></dd></dl>

<a class="index-entry-id" id="index-safely-encode-a-string"></a>
<a class="index-entry-id" id="index-coding-systems-for-encoding-a-string"></a>
<dl class="first-deffn first-defun-alias-first-deffn">
<dt class="deffn defun-alias-deffn" id="index-find_002dcoding_002dsystems_002dstring"><span class="category-def">Function: </span><span><strong class="def-name">find-coding-systems-string</strong> <var class="def-var-arguments">string</var><a class="copiable-link" href="#index-find_002dcoding_002dsystems_002dstring"> &para;</a></span></dt>
<dd><p>This function returns a list of coding systems that could be used to
encode the text of <var class="var">string</var>.  All coding systems in the list can
safely encode any multibyte characters in <var class="var">string</var>.  If the text
contains no multibyte characters, this returns the list
<code class="code">(undecided)</code>.
</p></dd></dl>

<a class="index-entry-id" id="index-charset_002c-coding-systems-to-encode"></a>
<a class="index-entry-id" id="index-safely-encode-characters-in-a-charset"></a>
<dl class="first-deffn first-defun-alias-first-deffn">
<dt class="deffn defun-alias-deffn" id="index-find_002dcoding_002dsystems_002dfor_002dcharsets"><span class="category-def">Function: </span><span><strong class="def-name">find-coding-systems-for-charsets</strong> <var class="def-var-arguments">charsets</var><a class="copiable-link" href="#index-find_002dcoding_002dsystems_002dfor_002dcharsets"> &para;</a></span></dt>
<dd><p>This function returns a list of coding systems that could be used to
encode all the character sets in the list <var class="var">charsets</var>.
</p></dd></dl>

<dl class="first-deffn first-defun-alias-first-deffn">
<dt class="deffn defun-alias-deffn" id="index-check_002dcoding_002dsystems_002dregion"><span class="category-def">Function: </span><span><strong class="def-name">check-coding-systems-region</strong> <var class="def-var-arguments">start end coding-system-list</var><a class="copiable-link" href="#index-check_002dcoding_002dsystems_002dregion"> &para;</a></span></dt>
<dd><p>This function checks whether coding systems in the list
<code class="code">coding-system-list</code> can encode all the characters in the region
between <var class="var">start</var> and <var class="var">end</var>.  If all of the coding systems in
the list can encode the specified text, the function returns
<code class="code">nil</code>.  If some coding systems cannot encode some of the
characters, the value is an alist, each element of which has the form
<code class="code">(<var class="var">coding-system1</var> <var class="var">pos1</var> <var class="var">pos2</var> &hellip;)</code>, meaning
that <var class="var">coding-system1</var> cannot encode characters at buffer positions
<var class="var">pos1</var>, <var class="var">pos2</var>, <small class="enddots">...</small>.
</p>
<p><var class="var">start</var> may be a string, in which case <var class="var">end</var> is ignored and
the returned value references string indices instead of buffer
positions.
</p></dd></dl>

<dl class="first-deffn first-defun-alias-first-deffn">
<dt class="deffn defun-alias-deffn" id="index-detect_002dcoding_002dregion"><span class="category-def">Function: </span><span><strong class="def-name">detect-coding-region</strong> <var class="def-var-arguments">start end &amp;optional highest</var><a class="copiable-link" href="#index-detect_002dcoding_002dregion"> &para;</a></span></dt>
<dd><p>This function chooses a plausible coding system for decoding the text
from <var class="var">start</var> to <var class="var">end</var>.  This text should be a byte sequence,
i.e., unibyte text or multibyte text with only <abbr class="acronym">ASCII</abbr> and
eight-bit characters (see <a class="pxref" href="Explicit-Encoding.html">Explicit Encoding and Decoding</a>).
</p>
<p>Normally this function returns a list of coding systems that could
handle decoding the text that was scanned.  They are listed in order of
decreasing priority.  But if <var class="var">highest</var> is non-<code class="code">nil</code>, then the
return value is just one coding system, the one that is highest in
priority.
</p>
<p>If the region contains only <abbr class="acronym">ASCII</abbr> characters except for such
ISO-2022 control characters ISO-2022 as <code class="code">ESC</code>, the value is
<code class="code">undecided</code> or <code class="code">(undecided)</code>, or a variant specifying
end-of-line conversion, if that can be deduced from the text.
</p>
<p>If the region contains null bytes, the value is <code class="code">no-conversion</code>,
even if the region contains text encoded in some coding system.
</p></dd></dl>

<dl class="first-deffn first-defun-alias-first-deffn">
<dt class="deffn defun-alias-deffn" id="index-detect_002dcoding_002dstring"><span class="category-def">Function: </span><span><strong class="def-name">detect-coding-string</strong> <var class="def-var-arguments">string &amp;optional highest</var><a class="copiable-link" href="#index-detect_002dcoding_002dstring"> &para;</a></span></dt>
<dd><p>This function is like <code class="code">detect-coding-region</code> except that it
operates on the contents of <var class="var">string</var> instead of bytes in the buffer.
</p></dd></dl>

<a class="index-entry-id" id="index-null-bytes_002c-and-decoding-text"></a>
<dl class="first-defvr first-defvar-alias-first-defvr">
<dt class="defvr defvar-alias-defvr" id="index-inhibit_002dnull_002dbyte_002ddetection"><span class="category-def">Variable: </span><span><strong class="def-name">inhibit-null-byte-detection</strong><a class="copiable-link" href="#index-inhibit_002dnull_002dbyte_002ddetection"> &para;</a></span></dt>
<dd><p>If this variable has a non-<code class="code">nil</code> value, null bytes are ignored
when detecting the encoding of a region or a string.  This allows the
encoding of text that contains null bytes to be correctly detected,
such as Info files with Index nodes.
</p></dd></dl>

<dl class="first-defvr first-defvar-alias-first-defvr">
<dt class="defvr defvar-alias-defvr" id="index-inhibit_002diso_002descape_002ddetection"><span class="category-def">Variable: </span><span><strong class="def-name">inhibit-iso-escape-detection</strong><a class="copiable-link" href="#index-inhibit_002diso_002descape_002ddetection"> &para;</a></span></dt>
<dd><p>If this variable has a non-<code class="code">nil</code> value, ISO-2022 escape sequences
are ignored when detecting the encoding of a region or a string.  The
result is that no text is ever detected as encoded in some ISO-2022
encoding, and all escape sequences become visible in a buffer.
<strong class="strong">Warning:</strong> <em class="emph">Use this variable with extreme caution,
because many files in the Emacs distribution use ISO-2022 encoding.</em>
</p></dd></dl>

<a class="index-entry-id" id="index-charsets-supported-by-a-coding-system"></a>
<dl class="first-deffn first-defun-alias-first-deffn">
<dt class="deffn defun-alias-deffn" id="index-coding_002dsystem_002dcharset_002dlist"><span class="category-def">Function: </span><span><strong class="def-name">coding-system-charset-list</strong> <var class="def-var-arguments">coding-system</var><a class="copiable-link" href="#index-coding_002dsystem_002dcharset_002dlist"> &para;</a></span></dt>
<dd><p>This function returns the list of character sets (see <a class="pxref" href="Character-Sets.html">Character Sets</a>) supported by <var class="var">coding-system</var>.  Some coding systems that
support too many character sets to list them all yield special values:
</p><ul class="itemize mark-bullet">
<li>If <var class="var">coding-system</var> supports all Emacs characters, the value is
<code class="code">(emacs)</code>.
</li><li>If <var class="var">coding-system</var> supports all Unicode characters, the value is
<code class="code">(unicode)</code>.
</li><li>If <var class="var">coding-system</var> supports all ISO-2022 charsets, the value is
<code class="code">iso-2022</code>.
</li><li>If <var class="var">coding-system</var> supports all the characters in the internal
coding system used by Emacs version 21 (prior to the implementation of
internal Unicode support), the value is <code class="code">emacs-mule</code>.
</li></ul>
</dd></dl>

<p>See <a class="xref" href="Process-Information.html#Coding-systems-for-a-subprocess">Process Information</a>, in
particular the description of the functions
<code class="code">process-coding-system</code> and <code class="code">set-process-coding-system</code>, for
how to examine or set the coding systems used for I/O to a subprocess.
</p>
</div>
<hr>
<div class="nav-panel">
<p>
Next: <a href="User_002dChosen-Coding-Systems.html">User-Chosen Coding Systems</a>, Previous: <a href="Encoding-and-I_002fO.html">Encoding and I/O</a>, Up: <a href="Coding-Systems.html">Coding Systems</a> &nbsp; [<a href="index.html#SEC_Contents" title="Table of contents" rel="contents">Contents</a>][<a href="Index.html" title="Index" rel="index">Index</a>]</p>
</div>



</body>
</html>
