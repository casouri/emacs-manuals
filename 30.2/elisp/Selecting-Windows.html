<!DOCTYPE html>
<html>
<!-- Created by GNU Texinfo 7.1, https://www.gnu.org/software/texinfo/ -->
<head>
<meta http-equiv="Content-Type" content="text/html; charset=utf-8">
<!-- This is the GNU Emacs Lisp Reference Manual
corresponding to Emacs version 30.2.

Copyright Â© 1990-1996, 1998-2025 Free Software Foundation,
Inc.

Permission is granted to copy, distribute and/or modify this document
under the terms of the GNU Free Documentation License, Version 1.3 or
any later version published by the Free Software Foundation; with the
Invariant Sections being "GNU General Public License," with the
Front-Cover Texts being "A GNU Manual," and with the Back-Cover
Texts as in (a) below.  A copy of the license is included in the
section entitled "GNU Free Documentation License."

(a) The FSF's Back-Cover Text is: "You have the freedom to copy and
modify this GNU manual.  Buying copies from the FSF supports it in
developing GNU and promoting software freedom." -->
<title>Selecting Windows (GNU Emacs Lisp Reference Manual)</title>

<meta name="description" content="Selecting Windows (GNU Emacs Lisp Reference Manual)">
<meta name="keywords" content="Selecting Windows (GNU Emacs Lisp Reference Manual)">
<meta name="resource-type" content="document">
<meta name="distribution" content="global">
<meta name="Generator" content="makeinfo">
<meta name="viewport" content="width=device-width,initial-scale=1">

<link href="index.html" rel="start" title="Top">
<link href="Index.html" rel="index" title="Index">
<link href="index.html#SEC_Contents" rel="contents" title="Table of Contents">
<link href="Windows.html" rel="up" title="Windows">
<link href="Window-Sizes.html" rel="next" title="Window Sizes">
<link href="Windows-and-Frames.html" rel="prev" title="Windows and Frames">
<style type="text/css">
<!--
a.copiable-link {visibility: hidden; text-decoration: none; line-height: 0em}
span:hover a.copiable-link {visibility: visible}
strong.def-name {font-family: monospace; font-weight: bold; font-size: larger}
-->
</style>
<link rel="stylesheet" type="text/css" href="./manual.css">


</head>

<body lang="en">
<div class="section-level-extent" id="Selecting-Windows">
<div class="nav-panel">
<p>
Next: <a href="Window-Sizes.html" accesskey="n" rel="next">Window Sizes</a>, Previous: <a href="Windows-and-Frames.html" accesskey="p" rel="prev">Windows and Frames</a>, Up: <a href="Windows.html" accesskey="u" rel="up">Windows</a> &nbsp; [<a href="index.html#SEC_Contents" title="Table of contents" rel="contents">Contents</a>][<a href="Index.html" title="Index" rel="index">Index</a>]</p>
</div>
<hr>
<h3 class="section" id="Selecting-Windows-1"><span>29.3 Selecting Windows<a class="copiable-link" href="#Selecting-Windows-1"> &para;</a></span></h3>
<a class="index-entry-id" id="index-selecting-a-window"></a>

<a class="index-entry-id" id="index-selected-window"></a>
<a class="index-entry-id" id="index-window-selected-within-a-frame"></a>
<p>In each frame, at any time, exactly one Emacs window is designated
as <em class="dfn">selected within the frame</em>.  For the selected frame, that
window is called the <em class="dfn">selected window</em>&mdash;the one in which most
editing takes place, and in which the cursor for selected windows
appears (see <a class="pxref" href="Cursor-Parameters.html">Cursor Parameters</a>).  Keyboard input that inserts or
deletes text is also normally directed to this window.   The selected
window&rsquo;s buffer is usually also the current buffer, except when
<code class="code">set-buffer</code> has been used (see <a class="pxref" href="Current-Buffer.html">The Current Buffer</a>).  As for
non-selected frames, the window selected within the frame becomes the
selected window if the frame is ever selected.
</p>
<dl class="first-deffn first-defun-alias-first-deffn">
<dt class="deffn defun-alias-deffn" id="index-selected_002dwindow"><span class="category-def">Function: </span><span><strong class="def-name">selected-window</strong><a class="copiable-link" href="#index-selected_002dwindow"> &para;</a></span></dt>
<dd><p>This function returns the selected window (which is always a live
window).
</p></dd></dl>

<p>The following function explicitly selects a window and its frame.
</p>
<dl class="first-deffn first-defun-alias-first-deffn">
<dt class="deffn defun-alias-deffn" id="index-select_002dwindow"><span class="category-def">Function: </span><span><strong class="def-name">select-window</strong> <var class="def-var-arguments">window &amp;optional norecord</var><a class="copiable-link" href="#index-select_002dwindow"> &para;</a></span></dt>
<dd><p>This function makes <var class="var">window</var> the selected window and the window
selected within its frame, and selects that frame.  It also makes
<var class="var">window</var>&rsquo;s buffer (see <a class="pxref" href="Buffers-and-Windows.html">Buffers and Windows</a>) current and sets
that buffer&rsquo;s value of <code class="code">point</code> to the value of <code class="code">window-point</code>
(see <a class="pxref" href="Window-Point.html">Windows and Point</a>) in <var class="var">window</var>.  <var class="var">window</var> must be a live
window.  The return value is <var class="var">window</var>.
</p>
<p>By default, this function also moves <var class="var">window</var>&rsquo;s buffer to the front
of the buffer list (see <a class="pxref" href="Buffer-List.html">The Buffer List</a>) and makes <var class="var">window</var> the most
recently selected window.  If the optional argument <var class="var">norecord</var> is
non-<code class="code">nil</code>, these additional actions are omitted.
</p>
<p>In addition, this function by default also tells the display engine to
update the display of <var class="var">window</var> when its frame gets redisplayed the
next time.  If <var class="var">norecord</var> is non-<code class="code">nil</code>, such updates are
usually not performed.  If, however, <var class="var">norecord</var> equals the special
symbol <code class="code">mark-for-redisplay</code>, the additional actions mentioned above
are omitted but <var class="var">window</var>&rsquo;s display will be nevertheless updated.
</p>
<p>Note that sometimes selecting a window is not enough to show it, or
make its frame the top-most frame on display: you may also need to
raise the frame or make sure input focus is directed to that frame.
See <a class="xref" href="Input-Focus.html">Input Focus</a>.
</p></dd></dl>

<a class="index-entry-id" id="index-select-window-hooks"></a>
<a class="index-entry-id" id="index-running-a-hook-when-a-window-gets-selected"></a>
<p>For historical reasons, Emacs does not run a separate hook whenever a
window gets selected.  Applications and internal routines often
temporarily select a window to perform a few actions on it.  They do
that either to simplify coding&mdash;because many functions by default
operate on the selected window when no <var class="var">window</var> argument is
specified&mdash;or because some functions did not (and still do not) take a
window as argument and always operate(d) on the selected window instead.
Running a hook every time a window gets selected for a short time and
once more when the previously selected window gets restored is not
useful.
</p>
<p>However, when its <var class="var">norecord</var> argument is <code class="code">nil</code>,
<code class="code">select-window</code> updates the buffer list and thus indirectly runs
the normal hook <code class="code">buffer-list-update-hook</code> (see <a class="pxref" href="Buffer-List.html">The Buffer List</a>).
Consequently, that hook provides one way to run a function whenever a
window gets selected more &ldquo;permanently&rdquo;.
</p>
<p>Since <code class="code">buffer-list-update-hook</code> is also run by functions that are
not related to window management, it will usually make sense to save the
value of the selected window somewhere and compare it with the value of
<code class="code">selected-window</code> while running that hook.  Also, to avoid false
positives when using <code class="code">buffer-list-update-hook</code>, it is good practice
that every <code class="code">select-window</code> call supposed to select a window only
temporarily passes a non-<code class="code">nil</code> <var class="var">norecord</var> argument.  If
possible, the macro <code class="code">with-selected-window</code> (see below) should be
used in such cases.
</p>
<p>Emacs also runs the hook <code class="code">window-selection-change-functions</code>
whenever the redisplay routine detects that another window has been
selected since last redisplay.  See <a class="xref" href="Window-Hooks.html">Hooks for Window Scrolling and Changes</a>, for a detailed
explanation.  <code class="code">window-state-change-functions</code> (described in the
same section) is another abnormal hook run after a different window
has been selected but is triggered by other window changes as well.
</p>
<a class="index-entry-id" id="index-most-recently-selected-windows"></a>
<p>The sequence of calls to <code class="code">select-window</code> with a non-<code class="code">nil</code>
<var class="var">norecord</var> argument determines an ordering of windows by their
selection or use time, see below.  The function <code class="code">get-lru-window</code>,
for example, can then be used to retrieve the least recently selected
window (see <a class="pxref" href="Cyclic-Window-Ordering.html">Cyclic Ordering of Windows</a>).
</p>
<dl class="first-deffn first-defun-alias-first-deffn">
<dt class="deffn defun-alias-deffn" id="index-frame_002dselected_002dwindow"><span class="category-def">Function: </span><span><strong class="def-name">frame-selected-window</strong> <var class="def-var-arguments">&amp;optional frame</var><a class="copiable-link" href="#index-frame_002dselected_002dwindow"> &para;</a></span></dt>
<dd><p>This function returns the window on <var class="var">frame</var> that is selected
within that frame.  <var class="var">frame</var> should be a live frame; if omitted or
<code class="code">nil</code>, it defaults to the selected frame.
</p></dd></dl>

<dl class="first-deffn first-defun-alias-first-deffn">
<dt class="deffn defun-alias-deffn" id="index-set_002dframe_002dselected_002dwindow"><span class="category-def">Function: </span><span><strong class="def-name">set-frame-selected-window</strong> <var class="def-var-arguments">frame window &amp;optional norecord</var><a class="copiable-link" href="#index-set_002dframe_002dselected_002dwindow"> &para;</a></span></dt>
<dd><p>This function makes <var class="var">window</var> the window selected within the frame
<var class="var">frame</var>.  <var class="var">frame</var> should be a live frame; if <code class="code">nil</code>, it
defaults to the selected frame.  <var class="var">window</var> must denote a live window.
</p>
<p>If <var class="var">frame</var> is the selected frame, this makes <var class="var">window</var> the
selected window.
</p>
<p>If the optional argument <var class="var">norecord</var> is non-<code class="code">nil</code>, this function
does not alter the ordering of the most recently selected windows, nor
the buffer list.
</p></dd></dl>

<p>The following macros are useful to temporarily select a window without
affecting the ordering of recently selected windows or the buffer list.
</p>
<dl class="first-deffn first-defmac-alias-first-deffn">
<dt class="deffn defmac-alias-deffn" id="index-save_002dselected_002dwindow"><span class="category-def">Macro: </span><span><strong class="def-name">save-selected-window</strong> <var class="def-var-arguments">forms&hellip;</var><a class="copiable-link" href="#index-save_002dselected_002dwindow"> &para;</a></span></dt>
<dd><p>This macro records the selected frame, as well as the selected window
of each frame, executes <var class="var">forms</var> in sequence, then restores the
earlier selected frame and windows.  It also saves and restores the
current buffer.  It returns the value of the last form in <var class="var">forms</var>.
</p>
<p>This macro does not save or restore anything about the sizes,
arrangement or contents of windows; therefore, if <var class="var">forms</var> change
them, the change persists.  If the previously selected window of some
frame is no longer live at the time of exit from <var class="var">forms</var>, that
frame&rsquo;s selected window is left alone.  If the previously selected
window is no longer live, then whatever window is selected at the end of
<var class="var">forms</var> remains selected.  The current buffer is restored if and
only if it is still live when exiting <var class="var">forms</var>.
</p>
<p>This macro changes neither the ordering of recently selected windows nor
the buffer list.
</p></dd></dl>

<dl class="first-deffn first-defmac-alias-first-deffn">
<dt class="deffn defmac-alias-deffn" id="index-with_002dselected_002dwindow"><span class="category-def">Macro: </span><span><strong class="def-name">with-selected-window</strong> <var class="def-var-arguments">window forms&hellip;</var><a class="copiable-link" href="#index-with_002dselected_002dwindow"> &para;</a></span></dt>
<dd><p>This macro selects <var class="var">window</var>, executes <var class="var">forms</var> in sequence, then
restores the previously selected window and current buffer.  The
ordering of recently selected windows and the buffer list remain
unchanged unless you deliberately change them within <var class="var">forms</var>; for
example, by calling <code class="code">select-window</code> with argument <var class="var">norecord</var>
<code class="code">nil</code>.  Hence, this macro is the preferred way to temporarily work
with <var class="var">window</var> as the selected window without needlessly running
<code class="code">buffer-list-update-hook</code>.
</p>
<p>Note that this macro temporarily puts the window management code in an
unstable state.  In particular, the most recently used window (see below)
will not necessarily match the selected one.  Hence, functions like
<code class="code">get-lru-window</code> and <code class="code">get-mru-window</code> may return unexpected
results when called from the body of this macro.
</p></dd></dl>

<dl class="first-deffn first-defmac-alias-first-deffn">
<dt class="deffn defmac-alias-deffn" id="index-with_002dselected_002dframe"><span class="category-def">Macro: </span><span><strong class="def-name">with-selected-frame</strong> <var class="def-var-arguments">frame forms&hellip;</var><a class="copiable-link" href="#index-with_002dselected_002dframe"> &para;</a></span></dt>
<dd><p>This macro executes <var class="var">forms</var> with <var class="var">frame</var> as the selected
frame.  The value returned is the value of the last form in
<var class="var">forms</var>.  This macro saves and restores the selected frame, and
changes the order of neither the recently selected windows nor the
buffers in the buffer list.
</p></dd></dl>

<a class="index-entry-id" id="index-window-use-time"></a>
<a class="index-entry-id" id="index-use-time-of-window"></a>
<a class="index-entry-id" id="index-window-order-by-time-of-last-use"></a>
<dl class="first-deffn first-defun-alias-first-deffn">
<dt class="deffn defun-alias-deffn" id="index-window_002duse_002dtime"><span class="category-def">Function: </span><span><strong class="def-name">window-use-time</strong> <var class="def-var-arguments">&amp;optional window</var><a class="copiable-link" href="#index-window_002duse_002dtime"> &para;</a></span></dt>
<dd><p>This function returns the use time of window <var class="var">window</var>.  <var class="var">window</var>
must be a live window and defaults to the selected one.
</p>
<p>The <em class="dfn">use time</em> of a window is not really a time value, but an
integer that does increase monotonically with each call of
<code class="code">select-window</code> with a <code class="code">nil</code> <var class="var">norecord</var> argument.  The
window with the lowest use time is usually called the least recently
used window.  The window with the highest use time is called the most
recently used one (see <a class="pxref" href="Cyclic-Window-Ordering.html">Cyclic Ordering of Windows</a>) and is usually the
selected window unless <code class="code">with-selected-window</code> has been used.
</p></dd></dl>

<dl class="first-deffn first-defun-alias-first-deffn">
<dt class="deffn defun-alias-deffn" id="index-window_002dbump_002duse_002dtime"><span class="category-def">Function: </span><span><strong class="def-name">window-bump-use-time</strong> <var class="def-var-arguments">&amp;optional window</var><a class="copiable-link" href="#index-window_002dbump_002duse_002dtime"> &para;</a></span></dt>
<dd><p>This function marks <var class="var">window</var> as being the second most recently
used one (after the selected window).  It does nothing if <var class="var">window</var>
is the selected window or the selected window does not have the
highest use time among all windows which may happen within the scope
of <code class="code">with-selected-window</code>.
</p></dd></dl>

<a class="anchor" id="Window-Group"></a><p>Sometimes several windows collectively and
cooperatively display a buffer, for example, under the management of
Follow Mode (see <a data-manual="emacs" href="https://www.gnu.org/software/emacs/manual/html_node/emacs/Follow-Mode.html#Follow-Mode">(emacs)Follow Mode</a>), where the windows together
display a bigger portion of the buffer than one window could alone.
It is often useful to consider such a <em class="dfn">window group</em> as a single
entity.  Several functions such as <code class="code">window-group-start</code>
(see <a class="pxref" href="Window-Start-and-End.html">The Window Start and End Positions</a>) allow you to do this by supplying, as
an argument, one of the windows as a stand-in for the whole group.
</p>
<dl class="first-deffn first-defun-alias-first-deffn">
<dt class="deffn defun-alias-deffn" id="index-selected_002dwindow_002dgroup"><span class="category-def">Function: </span><span><strong class="def-name">selected-window-group</strong><a class="copiable-link" href="#index-selected_002dwindow_002dgroup"> &para;</a></span></dt>
<dd><a class="index-entry-id" id="index-selected_002dwindow_002dgroup_002dfunction"></a>
<p>When the selected window is a member of a group of windows, this
function returns a list of the windows in the group, ordered such that
the first window in the list is displaying the earliest part of the
buffer, and so on.  Otherwise the function returns a list containing
just the selected window.
</p>
<p>The selected window is considered part of a group when the buffer
local variable <code class="code">selected-window-group-function</code> is set to a
function.  In this case, <code class="code">selected-window-group</code> calls it with no
arguments and returns its result (which should be the list of windows
in the group).
</p></dd></dl>


</div>
<hr>
<div class="nav-panel">
<p>
Next: <a href="Window-Sizes.html">Window Sizes</a>, Previous: <a href="Windows-and-Frames.html">Windows and Frames</a>, Up: <a href="Windows.html">Windows</a> &nbsp; [<a href="index.html#SEC_Contents" title="Table of contents" rel="contents">Contents</a>][<a href="Index.html" title="Index" rel="index">Index</a>]</p>
</div>



</body>
</html>
