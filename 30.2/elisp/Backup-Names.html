<!DOCTYPE html>
<html>
<!-- Created by GNU Texinfo 7.1, https://www.gnu.org/software/texinfo/ -->
<head>
<meta http-equiv="Content-Type" content="text/html; charset=utf-8">
<!-- This is the GNU Emacs Lisp Reference Manual
corresponding to Emacs version 30.2.

Copyright Â© 1990-1996, 1998-2025 Free Software Foundation,
Inc.

Permission is granted to copy, distribute and/or modify this document
under the terms of the GNU Free Documentation License, Version 1.3 or
any later version published by the Free Software Foundation; with the
Invariant Sections being "GNU General Public License," with the
Front-Cover Texts being "A GNU Manual," and with the Back-Cover
Texts as in (a) below.  A copy of the license is included in the
section entitled "GNU Free Documentation License."

(a) The FSF's Back-Cover Text is: "You have the freedom to copy and
modify this GNU manual.  Buying copies from the FSF supports it in
developing GNU and promoting software freedom." -->
<title>Backup Names (GNU Emacs Lisp Reference Manual)</title>

<meta name="description" content="Backup Names (GNU Emacs Lisp Reference Manual)">
<meta name="keywords" content="Backup Names (GNU Emacs Lisp Reference Manual)">
<meta name="resource-type" content="document">
<meta name="distribution" content="global">
<meta name="Generator" content="makeinfo">
<meta name="viewport" content="width=device-width,initial-scale=1">

<link href="index.html" rel="start" title="Top">
<link href="Index.html" rel="index" title="Index">
<link href="index.html#SEC_Contents" rel="contents" title="Table of Contents">
<link href="Backup-Files.html" rel="up" title="Backup Files">
<link href="Numbered-Backups.html" rel="prev" title="Numbered Backups">
<style type="text/css">
<!--
a.copiable-link {visibility: hidden; text-decoration: none; line-height: 0em}
div.example {margin-left: 3.2em}
span:hover a.copiable-link {visibility: visible}
strong.def-name {font-family: monospace; font-weight: bold; font-size: larger}
-->
</style>
<link rel="stylesheet" type="text/css" href="./manual.css">


</head>

<body lang="en">
<div class="subsection-level-extent" id="Backup-Names">
<div class="nav-panel">
<p>
Previous: <a href="Numbered-Backups.html" accesskey="p" rel="prev">Making and Deleting Numbered Backup Files</a>, Up: <a href="Backup-Files.html" accesskey="u" rel="up">Backup Files</a> &nbsp; [<a href="index.html#SEC_Contents" title="Table of contents" rel="contents">Contents</a>][<a href="Index.html" title="Index" rel="index">Index</a>]</p>
</div>
<hr>
<h4 class="subsection" id="Naming-Backup-Files"><span>27.1.4 Naming Backup Files<a class="copiable-link" href="#Naming-Backup-Files"> &para;</a></span></h4>
<a class="index-entry-id" id="index-naming-backup-files"></a>

<p>The functions in this section are documented mainly because you can
customize the naming conventions for backup files by redefining them.
If you change one, you probably need to change the rest.
</p>
<dl class="first-deffn first-defun-alias-first-deffn">
<dt class="deffn defun-alias-deffn" id="index-backup_002dfile_002dname_002dp"><span class="category-def">Function: </span><span><strong class="def-name">backup-file-name-p</strong> <var class="def-var-arguments">filename</var><a class="copiable-link" href="#index-backup_002dfile_002dname_002dp"> &para;</a></span></dt>
<dd><p>This function returns a non-<code class="code">nil</code> value if <var class="var">filename</var> is a
possible name for a backup file.  It just checks the name, not whether
a file with the name <var class="var">filename</var> exists.
</p>
<div class="example smallexample">
<div class="group"><pre class="example-preformatted">(backup-file-name-p &quot;foo&quot;)
     &rArr; nil
</pre></div><div class="group"><pre class="example-preformatted">(backup-file-name-p &quot;foo~&quot;)
     &rArr; 3
</pre></div></div>

<p>The standard definition of this function is as follows:
</p>
<div class="example smallexample">
<div class="group"><pre class="example-preformatted">(defun backup-file-name-p (file)
  &quot;Return non-nil if FILE is a backup file \
name (numeric or not)...&quot;
  (string-match &quot;~\\'&quot; file))
</pre></div></div>

<p>Thus, the function returns a non-<code class="code">nil</code> value if the file name ends
with a &lsquo;<samp class="samp">~</samp>&rsquo;.  (We use a backslash to split the documentation
string&rsquo;s first line into two lines in the text, but produce just one
line in the string itself.)
</p>
<p>This simple expression is placed in a separate function to make it easy
to redefine for customization.
</p></dd></dl>

<dl class="first-deffn first-defun-alias-first-deffn">
<dt class="deffn defun-alias-deffn" id="index-make_002dbackup_002dfile_002dname"><span class="category-def">Function: </span><span><strong class="def-name">make-backup-file-name</strong> <var class="def-var-arguments">filename</var><a class="copiable-link" href="#index-make_002dbackup_002dfile_002dname"> &para;</a></span></dt>
<dd><p>This function returns a string that is the name to use for a
non-numbered backup file for file <var class="var">filename</var>.  On Unix, this is just
<var class="var">filename</var> with a tilde appended.
</p>
<p>The standard definition of this function, on most operating systems, is
as follows:
</p>
<div class="example smallexample">
<div class="group"><pre class="example-preformatted">(defun make-backup-file-name (file)
  &quot;Create the non-numeric backup file name for FILE...&quot;
  (concat file &quot;~&quot;))
</pre></div></div>

<p>You can change the backup-file naming convention by redefining this
function.  The following example redefines <code class="code">make-backup-file-name</code>
to prepend a &lsquo;<samp class="samp">.</samp>&rsquo; in addition to appending a tilde:
</p>
<div class="example smallexample">
<div class="group"><pre class="example-preformatted">(defun make-backup-file-name (filename)
  (expand-file-name
    (concat &quot;.&quot; (file-name-nondirectory filename) &quot;~&quot;)
    (file-name-directory filename)))
</pre></div><pre class="example-preformatted">

</pre><div class="group"><pre class="example-preformatted">(make-backup-file-name &quot;backups.texi&quot;)
     &rArr; &quot;.backups.texi~&quot;
</pre></div></div>

<p>Some parts of Emacs, including some Dired commands, assume that backup
file names end with &lsquo;<samp class="samp">~</samp>&rsquo;.  If you do not follow that convention, it
will not cause serious problems, but these commands may give
less-than-desirable results.
</p></dd></dl>

<dl class="first-deffn first-defun-alias-first-deffn">
<dt class="deffn defun-alias-deffn" id="index-find_002dbackup_002dfile_002dname"><span class="category-def">Function: </span><span><strong class="def-name">find-backup-file-name</strong> <var class="def-var-arguments">filename</var><a class="copiable-link" href="#index-find_002dbackup_002dfile_002dname"> &para;</a></span></dt>
<dd><p>This function computes the file name for a new backup file for
<var class="var">filename</var>.  It may also propose certain existing backup files for
deletion.  <code class="code">find-backup-file-name</code> returns a list whose <small class="sc">CAR</small> is
the name for the new backup file and whose <small class="sc">CDR</small> is a list of backup
files whose deletion is proposed.  The value can also be <code class="code">nil</code>,
which means not to make a backup.
</p>
<p>Two variables, <code class="code">kept-old-versions</code> and <code class="code">kept-new-versions</code>,
determine which backup versions should be kept.  This function keeps
those versions by excluding them from the <small class="sc">CDR</small> of the value.
See <a class="xref" href="Numbered-Backups.html">Making and Deleting Numbered Backup Files</a>.
</p>
<p>In this example, the value says that <samp class="file">~rms/foo.~5~</samp> is the name
to use for the new backup file, and <samp class="file">~rms/foo.~3~</samp> is an excess
version that the caller should consider deleting now.
</p>
<div class="example smallexample">
<div class="group"><pre class="example-preformatted">(find-backup-file-name &quot;~rms/foo&quot;)
     &rArr; (&quot;~rms/foo.~5~&quot; &quot;~rms/foo.~3~&quot;)
</pre></div></div>
</dd></dl>

<dl class="first-deffn first-defun-alias-first-deffn">
<dt class="deffn defun-alias-deffn" id="index-file_002dbackup_002dfile_002dnames"><span class="category-def">Function: </span><span><strong class="def-name">file-backup-file-names</strong> <var class="def-var-arguments">filename</var><a class="copiable-link" href="#index-file_002dbackup_002dfile_002dnames"> &para;</a></span></dt>
<dd><p>This function returns a list of all the backup file names for
<var class="var">filename</var>, or <code class="code">nil</code> if there are none.  The files are sorted
by modification time, descending, so that the most recent files are
first.
</p></dd></dl>

<dl class="first-deffn first-defun-alias-first-deffn">
<dt class="deffn defun-alias-deffn" id="index-file_002dnewest_002dbackup"><span class="category-def">Function: </span><span><strong class="def-name">file-newest-backup</strong> <var class="def-var-arguments">filename</var><a class="copiable-link" href="#index-file_002dnewest_002dbackup"> &para;</a></span></dt>
<dd><p>This function returns the first element of the list returned by
<code class="code">file-backup-file-names</code>.
</p>
<p>Some file comparison commands use this function so that they can
automatically compare a file with its most recent backup.
</p></dd></dl>

</div>
<hr>
<div class="nav-panel">
<p>
Previous: <a href="Numbered-Backups.html">Making and Deleting Numbered Backup Files</a>, Up: <a href="Backup-Files.html">Backup Files</a> &nbsp; [<a href="index.html#SEC_Contents" title="Table of contents" rel="contents">Contents</a>][<a href="Index.html" title="Index" rel="index">Index</a>]</p>
</div>



</body>
</html>
