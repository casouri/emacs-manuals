<!DOCTYPE html>
<html>
<!-- Created by GNU Texinfo 7.1, https://www.gnu.org/software/texinfo/ -->
<head>
<meta http-equiv="Content-Type" content="text/html; charset=utf-8">
<!-- This is the GNU Emacs Lisp Reference Manual
corresponding to Emacs version 30.2.

Copyright Â© 1990-1996, 1998-2025 Free Software Foundation,
Inc.

Permission is granted to copy, distribute and/or modify this document
under the terms of the GNU Free Documentation License, Version 1.3 or
any later version published by the Free Software Foundation; with the
Invariant Sections being "GNU General Public License," with the
Front-Cover Texts being "A GNU Manual," and with the Back-Cover
Texts as in (a) below.  A copy of the license is included in the
section entitled "GNU Free Documentation License."

(a) The FSF's Back-Cover Text is: "You have the freedom to copy and
modify this GNU manual.  Buying copies from the FSF supports it in
developing GNU and promoting software freedom." -->
<title>Misc Events (GNU Emacs Lisp Reference Manual)</title>

<meta name="description" content="Misc Events (GNU Emacs Lisp Reference Manual)">
<meta name="keywords" content="Misc Events (GNU Emacs Lisp Reference Manual)">
<meta name="resource-type" content="document">
<meta name="distribution" content="global">
<meta name="Generator" content="makeinfo">
<meta name="viewport" content="width=device-width,initial-scale=1">

<link href="index.html" rel="start" title="Top">
<link href="Index.html" rel="index" title="Index">
<link href="index.html#SEC_Contents" rel="contents" title="Table of Contents">
<link href="Input-Events.html" rel="up" title="Input Events">
<link href="Event-Examples.html" rel="next" title="Event Examples">
<link href="Xwidget-Events.html" rel="prev" title="Xwidget Events">
<style type="text/css">
<!--
a.copiable-link {visibility: hidden; text-decoration: none; line-height: 0em}
div.example {margin-left: 3.2em}
kbd.key {font-style: normal}
span:hover a.copiable-link {visibility: visible}
-->
</style>
<link rel="stylesheet" type="text/css" href="./manual.css">


</head>

<body lang="en">
<div class="subsection-level-extent" id="Misc-Events">
<div class="nav-panel">
<p>
Next: <a href="Event-Examples.html" accesskey="n" rel="next">Event Examples</a>, Previous: <a href="Xwidget-Events.html" accesskey="p" rel="prev">Xwidget events</a>, Up: <a href="Input-Events.html" accesskey="u" rel="up">Input Events</a> &nbsp; [<a href="index.html#SEC_Contents" title="Table of contents" rel="contents">Contents</a>][<a href="Index.html" title="Index" rel="index">Index</a>]</p>
</div>
<hr>
<h4 class="subsection" id="Miscellaneous-System-Events"><span>22.7.12 Miscellaneous System Events<a class="copiable-link" href="#Miscellaneous-System-Events"> &para;</a></span></h4>

<p>A few other event types represent occurrences within the system.
</p>
<dl class="table">
<dt><a id="index-text_002dconversion-event"></a><span><code class="code">text-conversion</code><a class="copiable-link" href="#index-text_002dconversion-event"> &para;</a></span></dt>
<dd><p>This kind of event is sent <strong class="strong">after</strong> a system-wide input method
performs an edit to one or more buffers.
</p>
<a class="index-entry-id" id="index-text_002dconversion_002dedits"></a>
<p>Once the event is sent, the input method may already have made changes
to multiple buffers inside many different frames.  To determine which
buffers have been changed, and what edits have been made to them, use
the variable <code class="code">text-conversion-edits</code>, which is set prior to each
<code class="code">text-conversion</code> event being sent; it is a list of the form:
</p>
<div class="example">
<pre class="example-preformatted"><code class="code">((<var class="var">buffer</var> <var class="var">beg</var> <var class="var">end</var> <var class="var">ephemeral</var>) ...)</code><!-- /@w -->
</pre></div>

<p>Where <var class="var">ephemeral</var> is the buffer which was modified, <var class="var">beg</var> and
<var class="var">end</var> are markers set to the positions of the edit at the time it
was completed, and <var class="var">ephemeral</var> is either a string, containing any
text which was inserted (or any text before point which was deleted),
<code class="code">t</code>, meaning that the edit is a temporary edit made by the input
method, or <code class="code">nil</code>, meaning that some text was deleted after point.
</p>
<a class="index-entry-id" id="index-text_002dconversion_002dstyle"></a>
<p>Whether or not this event is sent depends on the value of the
buffer-local variable <code class="code">text-conversion-style</code>, which determines
how an input method that wishes to make edits to buffer contents will
behave.
</p>
<p>This variable can have one of four values:
</p>
<dl class="table">
<dt><code class="code">nil</code></dt>
<dd><p>This means that the input method will be disabled entirely, and key
events will be sent instead of text conversion events.
</p>
</dd>
<dt><code class="code">action</code></dt>
<dd><p>This means that the input method will be enabled, but <kbd class="key">RET</kbd> will
be sent whenever the input method wants to insert a new line.
</p>
</dd>
<dt><code class="code">password</code></dt>
<dd><p>This is largely identical to <code class="code">action</code>, but also requests an input
method capable of inserting ASCII characters, and instructs it not to
save input in locations from which it might be subsequently retrieved
by features of the input method that cannot handle sensitive
information, such as text suggestions.
</p>
</dd>
<dt><code class="code">t</code></dt>
<dd><p>This, or any other value, means that the input method will be enabled
and make edits followed by <code class="code">text-conversion</code> events.
</p></dd>
</dl>

<a class="index-entry-id" id="index-set_002dtext_002dconversion_002dstyle"></a>
<p>Changes to the value of this variable will only take effect upon the
next redisplay after the buffer becomes the selected buffer of a
frame.  If you need to disable text conversion in a way that takes
immediate effect, call the function <code class="code">set-text-conversion-style</code>
instead.  This has the potential to lock up the input method for a
significant amount of time, and should be used with care.
</p>
<a class="index-entry-id" id="index-disable_002dinhibit_002dtext_002dconversion"></a>
<p>In addition, text conversion is automatically disabled after a prefix
key is read by the command loop or <code class="code">read-key-sequence</code>.  This can
be disabled by setting or binding the variable
<code class="code">disable-inhibit-text-conversion</code> to a non-<code class="code">nil</code> value.
</p>
</dd>
<dt><a id="index-delete_002dframe-event"></a><span><code class="code">(delete-frame (<var class="var">frame</var>))</code><a class="copiable-link" href="#index-delete_002dframe-event"> &para;</a></span></dt>
<dd><p>This kind of event indicates that the user gave the window manager
a command to delete a particular window, which happens to be an Emacs frame.
</p>
<p>The standard definition of the <code class="code">delete-frame</code> event is to delete <var class="var">frame</var>.
</p>
</dd>
<dt><a id="index-iconify_002dframe-event"></a><span><code class="code">(iconify-frame (<var class="var">frame</var>))</code><a class="copiable-link" href="#index-iconify_002dframe-event"> &para;</a></span></dt>
<dd><p>This kind of event indicates that the user iconified <var class="var">frame</var> using
the window manager.  Its standard definition is <code class="code">ignore</code>; since the
frame has already been iconified, Emacs has no work to do.  The purpose
of this event type is so that you can keep track of such events if you
want to.
</p>
</dd>
<dt><a id="index-make_002dframe_002dvisible-event"></a><span><code class="code">(make-frame-visible (<var class="var">frame</var>))</code><a class="copiable-link" href="#index-make_002dframe_002dvisible-event"> &para;</a></span></dt>
<dd><p>This kind of event indicates that the user deiconified <var class="var">frame</var> using
the window manager.  Its standard definition is <code class="code">ignore</code>; since the
frame has already been made visible, Emacs has no work to do.
</p>
</dd>
<dt><a id="index-touch_002dend-event"></a><span><code class="code">(touch-end (<var class="var">position</var>))</code><a class="copiable-link" href="#index-touch_002dend-event"> &para;</a></span></dt>
<dd><p>This kind of event indicates that the user&rsquo;s finger moved off the
mouse wheel or the touchpad.  The <var class="var">position</var> element is a mouse
position list (see <a class="pxref" href="Click-Events.html">Click Events</a>), specifying the position of the
mouse cursor when the finger moved off the mouse wheel.
</p>
</dd>
<dt><a class="index-entry-id" id="index-wheel_002ddown-event"></a>
<a id="index-wheel_002dup-event"></a><span><code class="code">(wheel-up <var class="var">position</var> <var class="var">clicks</var> <var class="var">lines</var> <var class="var">pixel-delta</var>)</code><a class="copiable-link" href="#index-wheel_002dup-event"> &para;</a></span></dt>
<dt><code class="code">(wheel-down <var class="var">position</var> <var class="var">clicks</var> <var class="var">lines</var> <var class="var">pixel-delta</var>)</code></dt>
<dd><p>These events are generated by moving a mouse wheel.  The
<var class="var">position</var> element is a mouse position list (see <a class="pxref" href="Click-Events.html">Click Events</a>), specifying the position of the mouse cursor when the event
occurred.
</p>
<a class="index-entry-id" id="index-mwheel_002dcoalesce_002dscroll_002devents"></a>
<p><var class="var">clicks</var>, if present, is the number of times that the wheel was
moved in quick succession.  See <a class="xref" href="Repeat-Events.html">Repeat Events</a>.  <var class="var">lines</var>, if
present and not <code class="code">nil</code>, is the positive number of screen lines
that should be scrolled (either up, when the event is <code class="code">wheel-up</code>,
or down when the event is <code class="code">wheel-down</code>).  <var class="var">pixel-delta</var>, if
present, is a cons cell of the form <code class="code">(<var class="var">x</var>&nbsp;.&nbsp;<var class="var">y</var>)</code><!-- /@w -->,
where <var class="var">x</var> and <var class="var">y</var> are the numbers of pixels by which to scroll
in each axis, a.k.a. <em class="dfn">pixelwise deltas</em>.  Usually, only one of
the two will be non-zero, the other will be either zero or very close
to zero; the larger number indicates the axis to scroll the window.
When the variable <code class="code">mwheel-coalesce-scroll-events</code> is <code class="code">nil</code>,
the scroll commands ignore the <var class="var">lines</var> element, even if it&rsquo;s
non-<code class="code">nil</code>, and use the <var class="var">pixel-delta</var> data instead; in that
case, the direction of scrolling is determined by the sign of the
pixelwise deltas, and the direction (up or down) implied by the event
kind is ignored.
</p>
<a class="index-entry-id" id="index-pixel_002dresolution-wheel-events"></a>
<p>You can use these <var class="var">x</var> and <var class="var">y</var> pixelwise deltas to determine
how much the mouse wheel has actually moved at pixel resolution.  For
example, the pixelwise deltas could be used to scroll the display at
pixel resolution, exactly according to the user&rsquo;s turning the mouse
wheel.  This pixelwise scrolling is possible only when
<code class="code">mwheel-coalesce-scroll-events</code> is <code class="code">nil</code>, and in general the
<var class="var">pixel-delta</var> data is not generated when that variable is
non-<code class="code">nil</code>.
</p>
<a class="index-entry-id" id="index-mouse_002dwheel_002dup_002devent"></a>
<a class="index-entry-id" id="index-mouse_002dwheel_002ddown_002devent"></a>
<p>The <code class="code">wheel-up</code> and <code class="code">wheel-down</code> events are generated only on
some kinds of systems.  On other systems, other events like <code class="code">mouse-4</code> and
<code class="code">mouse-5</code> are used instead.  Portable code should handle both
<code class="code">wheel-up</code> and <code class="code">wheel-down</code> events as well as the events
specified in the variables <code class="code">mouse-wheel-up-event</code> and
<code class="code">mouse-wheel-down-event</code>, defined in <samp class="file">mwheel.el</samp>.
Beware that for historical reasons the <code class="code">mouse-wheel-<em class="emph">up</em>-event</code>
is the variable that holds an event that should be handled similarly to
<code class="code">wheel-<em class="emph">down</em></code> and vice versa.
</p>
<a class="index-entry-id" id="index-mouse_002dwheel_002dleft_002devent"></a>
<a class="index-entry-id" id="index-mouse_002dwheel_002dright_002devent"></a>
<p>The same holds for the  horizontal wheel movements which are usually
represented by <code class="code">wheel-left</code> and <code class="code">wheel-right</code> events, but
for which portable code should also obey the variables
<code class="code">mouse-wheel-left-event</code> and <code class="code">mouse-wheel-right-event</code>,
defined in <samp class="file">mwheel.el</samp>.
However, some mice also generate other events at the same time as
they&rsquo;re generating these scroll events which may get in the way.
The way to fix this is generally to unbind these events (for instance,
<code class="code">mouse-6</code> or <code class="code">mouse-7</code>, but this is very hardware and
operating system dependent).
</p>
</dd>
<dt><a id="index-pinch-event"></a><span><code class="code">(pinch <var class="var">position</var> <var class="var">dx</var> <var class="var">dy</var> <var class="var">scale</var> <var class="var">angle</var>)</code><a class="copiable-link" href="#index-pinch-event"> &para;</a></span></dt>
<dd><p>This kind of event is generated by the user performing a &ldquo;pinch&rdquo;
gesture by placing two fingers on a touchpad and moving them towards
or away from each other.  <var class="var">position</var> is a mouse position list
(see <a class="pxref" href="Click-Events.html">Click Events</a>) that provides the position of the mouse pointer
when the event occurred, <var class="var">dx</var> is the change in the horizontal
distance between the fingers since the last event in the same sequence,
<var class="var">dy</var> is the vertical movement of the fingers since the last event
in the same sequence, <var class="var">scale</var> is the ratio of the current distance
between the fingers to that distance at the start of the sequence, and
<var class="var">angle</var> is the angular difference in degrees between the direction
of the line connecting the fingers in this event and the direction of
that line in the last event of the same sequence.
</p>
<p>As pinch events are only sent at the beginning or during a pinch
sequence, they do not report gestures where the user moves two fingers
on a touchpad in a rotating fashion without pinching the fingers.
</p>
<p>All arguments after <var class="var">position</var> are floating point numbers.
</p>
<p>This event is usually sent as part of a sequence, which begins with
the user placing two fingers on the touchpad, and ends with the user
removing those fingers.  <var class="var">dx</var>, <var class="var">dy</var>, and <var class="var">angle</var> will be
<code class="code">0.0</code> in the first event of a sequence; subsequent events will
report non-zero values for these members of the event structure.
</p>
<p><var class="var">dx</var> and <var class="var">dy</var> are reported in imaginary relative units, in
which <code class="code">1.0</code> is the width and height of the touchpad
respectively.  They are usually interpreted as being relative to the
size of the object beneath the gesture: image, window, etc.
</p>
</dd>
<dt><a id="index-preedit_002dtext-event"></a><span><code class="code">(preedit-text <var class="var">arg</var>)</code><a class="copiable-link" href="#index-preedit_002dtext-event"> &para;</a></span></dt>
<dd><p>This event is sent when a system input method tells Emacs to display
some text to indicate to the user what will be inserted.  The contents
of <var class="var">arg</var> are dependent on the window system being used.
</p>
<p>On X, <var class="var">arg</var> is a string describing some text to place behind the
cursor.  It can be <code class="code">nil</code>, which means to remove any text
previously displayed.
</p>
<p>On PGTK frames (see <a class="pxref" href="Frames.html">Frames</a>), <var class="var">arg</var> is a list of strings with
information about their color and underline attributes.  It has the
following form:
</p>
<div class="example">
<div class="group"><pre class="example-preformatted">   ((<var class="var">string1</var>
     (ul . <var class="var">underline-color</var>)
     (bg . <var class="var">background-color</var>)
     (fg . <var class="var">foreground-color</var>))
    (<var class="var">string2</var>
     (ul . <var class="var">underline-color</var>)
     (bg . <var class="var">background-color</var>)
     (fg . <var class="var">foreground-color</var>))
    ...
   )
</pre></div></div>

<p>Color information can be omitted, leaving just the text of the
strings.  <var class="var">underline-color</var> can be <code class="code">t</code>, meaning underlined
text with default underline color, or it can be a string, the name of
the color to draw the underline.
</p>
<p>This is a special event (see <a class="pxref" href="Special-Events.html">Special Events</a>), which normally
should not be bound by the user to any command.  Emacs will typically
display the text contained in the event in an overlay behind point
when it is received.
</p>
</dd>
<dt><a id="index-drag_002dn_002ddrop-event"></a><span><code class="code">(drag-n-drop <var class="var">position</var> <var class="var">files</var>)</code><a class="copiable-link" href="#index-drag_002dn_002ddrop-event"> &para;</a></span></dt>
<dd><p>This kind of event is generated when a group of files is
selected in an application outside of Emacs, and then dragged and
dropped onto an Emacs frame.
</p>
<p>The element <var class="var">position</var> is a list describing the position of the
event, in the same format as used in a mouse-click event (see <a class="pxref" href="Click-Events.html">Click Events</a>), and <var class="var">files</var> is the list of file names that were dragged
and dropped.  The usual way to handle this event is by visiting these
files.
</p>
<p>This kind of event is generated, at present, only on some kinds of
systems.
</p>
</dd>
<dt><a id="index-help_002decho-event"></a><span><code class="code">help-echo</code><a class="copiable-link" href="#index-help_002decho-event"> &para;</a></span></dt>
<dd><p>This kind of event is generated when a mouse pointer moves onto a
portion of buffer text which has a <code class="code">help-echo</code> text property.
The generated event has this form:
</p>
<div class="example">
<pre class="example-preformatted">(help-echo <var class="var">frame</var> <var class="var">help</var> <var class="var">window</var> <var class="var">object</var> <var class="var">pos</var>)
</pre></div>

<p>The precise meaning of the event parameters and the way these
parameters are used to display the help-echo text are described in
<a class="ref" href="Special-Properties.html#Text-help_002decho">Text help-echo</a>.
</p>
</dd>
<dt><a class="index-entry-id" id="index-sigusr2-event"></a>
<a class="index-entry-id" id="index-user-signals"></a>
<a id="index-sigusr1-event"></a><span><code class="code">sigusr1</code><a class="copiable-link" href="#index-sigusr1-event"> &para;</a></span></dt>
<dt><code class="code">sigusr2</code></dt>
<dd><p>These events are generated when the Emacs process receives
the signals <code class="code">SIGUSR1</code> and <code class="code">SIGUSR2</code>.  They contain no
additional data because signals do not carry additional information.
They can be useful for debugging (see <a class="pxref" href="Error-Debugging.html">Entering the Debugger on an Error</a>).
</p>
<p>To catch a user signal, bind the corresponding event to an interactive
command in the <code class="code">special-event-map</code> (see <a class="pxref" href="Controlling-Active-Maps.html">Controlling the Active Keymaps</a>).
The command is called with no arguments, and the specific signal event is
available in <code class="code">last-input-event</code> (see <a class="pxref" href="Event-Input-Misc.html">Miscellaneous Event Input Features</a>.  For
example:
</p>
<div class="example smallexample">
<pre class="example-preformatted">(defun sigusr-handler ()
  (interactive)
  (message &quot;Caught signal %S&quot; last-input-event))

(keymap-set special-event-map &quot;&lt;sigusr1&gt;&quot; 'sigusr-handler)
</pre></div>

<p>To test the signal handler, you can make Emacs send a signal to itself:
</p>
<div class="example smallexample">
<pre class="example-preformatted">(signal-process (emacs-pid) 'sigusr1)
</pre></div>

</dd>
<dt><a id="index-language_002dchange-event"></a><span><code class="code">language-change</code><a class="copiable-link" href="#index-language_002dchange-event"> &para;</a></span></dt>
<dd><p>This kind of event is generated on MS-Windows when the input language
has changed.  This typically means that the keyboard keys will send to
Emacs characters from a different language.  The generated event has
this form:
</p>
<div class="example smallexample">
<pre class="example-preformatted">(language-change <var class="var">frame</var> <var class="var">codepage</var> <var class="var">language-id</var>)
</pre></div>

<p>Here <var class="var">frame</var> is the frame which was current when the input
language changed; <var class="var">codepage</var> is the new codepage number; and
<var class="var">language-id</var> is the numerical ID of the new input language.  The
coding-system (see <a class="pxref" href="Coding-Systems.html">Coding Systems</a>) that corresponds to
<var class="var">codepage</var> is <code class="code">cp<var class="var">codepage</var></code> or
<code class="code">windows-<var class="var">codepage</var></code>.  To convert <var class="var">language-id</var> to a
string (e.g., to use it for various language-dependent features, such
as <code class="code">set-language-environment</code>), use the
<code class="code">w32-get-locale-info</code> function, like this:
</p>
<div class="example smallexample">
<pre class="example-preformatted">;; Get the abbreviated language name, such as &quot;ENU&quot; for English
(w32-get-locale-info language-id)
;; Get the full English name of the language,
;; such as &quot;English (United States)&quot;
(w32-get-locale-info language-id 4097)
;; Get the full localized name of the language
(w32-get-locale-info language-id t)
</pre></div>

</dd>
<dt><a id="index-end_002dsession-event"></a><span><code class="code">end-session</code><a class="copiable-link" href="#index-end_002dsession-event"> &para;</a></span></dt>
<dd><p>This event is generated on MS-Windows when the operating system
informs Emacs that the user terminated the interactive session, or
that the system is shutting down.  The standard definition of this
event is to invoke the <code class="code">kill-emacs</code> command (see <a class="pxref" href="Killing-Emacs.html">Killing Emacs</a>) so as to shut down Emacs in an orderly fashion; if there are
unsaved changes, this will produce auto-save files
(see <a class="pxref" href="Auto_002dSaving.html">Auto-Saving</a>) that the user can use after restarting the
session to restore the unsaved edits.
</p></dd>
</dl>

<p>If one of these events arrives in the middle of a key sequence&mdash;that
is, after a prefix key&mdash;then Emacs reorders the events so that this
event comes either before or after the multi-event key sequence, not
within it.
</p>
<p>Some of these special events, such as <code class="code">delete-frame</code>, invoke
Emacs commands by default; others are not bound.  If you want to
arrange for a special event to invoke a command, you can do that via
<code class="code">special-event-map</code>.  The command you bind to a function key in
that map can then examine the full event which invoked it in
<code class="code">last-input-event</code>.  See <a class="xref" href="Special-Events.html">Special Events</a>.
</p>
</div>
<hr>
<div class="nav-panel">
<p>
Next: <a href="Event-Examples.html">Event Examples</a>, Previous: <a href="Xwidget-Events.html">Xwidget events</a>, Up: <a href="Input-Events.html">Input Events</a> &nbsp; [<a href="index.html#SEC_Contents" title="Table of contents" rel="contents">Contents</a>][<a href="Index.html" title="Index" rel="index">Index</a>]</p>
</div>



</body>
</html>
