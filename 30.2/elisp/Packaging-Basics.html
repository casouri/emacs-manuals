<!DOCTYPE html>
<html>
<!-- Created by GNU Texinfo 7.1, https://www.gnu.org/software/texinfo/ -->
<head>
<meta http-equiv="Content-Type" content="text/html; charset=utf-8">
<!-- This is the GNU Emacs Lisp Reference Manual
corresponding to Emacs version 30.2.

Copyright Â© 1990-1996, 1998-2025 Free Software Foundation,
Inc.

Permission is granted to copy, distribute and/or modify this document
under the terms of the GNU Free Documentation License, Version 1.3 or
any later version published by the Free Software Foundation; with the
Invariant Sections being "GNU General Public License," with the
Front-Cover Texts being "A GNU Manual," and with the Back-Cover
Texts as in (a) below.  A copy of the license is included in the
section entitled "GNU Free Documentation License."

(a) The FSF's Back-Cover Text is: "You have the freedom to copy and
modify this GNU manual.  Buying copies from the FSF supports it in
developing GNU and promoting software freedom." -->
<title>Packaging Basics (GNU Emacs Lisp Reference Manual)</title>

<meta name="description" content="Packaging Basics (GNU Emacs Lisp Reference Manual)">
<meta name="keywords" content="Packaging Basics (GNU Emacs Lisp Reference Manual)">
<meta name="resource-type" content="document">
<meta name="distribution" content="global">
<meta name="Generator" content="makeinfo">
<meta name="viewport" content="width=device-width,initial-scale=1">

<link href="index.html" rel="start" title="Top">
<link href="Index.html" rel="index" title="Index">
<link href="index.html#SEC_Contents" rel="contents" title="Table of Contents">
<link href="Packaging.html" rel="up" title="Packaging">
<link href="Simple-Packages.html" rel="next" title="Simple Packages">
<style type="text/css">
<!--
a.copiable-link {visibility: hidden; text-decoration: none; line-height: 0em}
kbd.kbd {font-style: oblique}
span:hover a.copiable-link {visibility: visible}
strong.def-name {font-family: monospace; font-weight: bold; font-size: larger}
-->
</style>
<link rel="stylesheet" type="text/css" href="./manual.css">


</head>

<body lang="en">
<div class="section-level-extent" id="Packaging-Basics">
<div class="nav-panel">
<p>
Next: <a href="Simple-Packages.html" accesskey="n" rel="next">Simple Packages</a>, Up: <a href="Packaging.html" accesskey="u" rel="up">Preparing Lisp code for distribution</a> &nbsp; [<a href="index.html#SEC_Contents" title="Table of contents" rel="contents">Contents</a>][<a href="Index.html" title="Index" rel="index">Index</a>]</p>
</div>
<hr>
<h3 class="section" id="Packaging-Basics-1"><span>44.1 Packaging Basics<a class="copiable-link" href="#Packaging-Basics-1"> &para;</a></span></h3>
<a class="index-entry-id" id="index-package-attributes"></a>
<a class="index-entry-id" id="index-package-name"></a>
<a class="index-entry-id" id="index-package-version"></a>
<a class="index-entry-id" id="index-dependencies"></a>
<a class="index-entry-id" id="index-package-dependencies"></a>

<p>A package is either a <em class="dfn">simple package</em> or a <em class="dfn">multi-file
package</em>.  A simple package is stored in a package archive as a single
Emacs Lisp file, while a multi-file package is stored as a tar file
(containing multiple Lisp files, and possibly non-Lisp files such as a
manual).
</p>
<p>In ordinary usage, the difference between simple packages and
multi-file packages is relatively unimportant; the Package Menu
interface makes no distinction between them.  However, the procedure
for creating them differs, as explained in the following sections.
</p>
<p>Each package (whether simple or multi-file) has certain
<em class="dfn">attributes</em>:
</p>
<dl class="table">
<dt>Name</dt>
<dd><p>A short word (e.g., &lsquo;<samp class="samp">auctex</samp>&rsquo;).  This is usually also the symbol
prefix used in the program (see <a class="pxref" href="Coding-Conventions.html">Emacs Lisp Coding Conventions</a>).
</p>
</dd>
<dt>Version</dt>
<dd><p>A version number, in a form that the function <code class="code">version-to-list</code>
understands (e.g., &lsquo;<samp class="samp">11.86</samp>&rsquo;).  Each release of a package should be
accompanied by an increase in the version number so that it will be
recognized as an upgrade by users querying the package archive.
</p>
</dd>
<dt>Brief description</dt>
<dd><p>This is shown when the package is listed in the Package Menu.  It
should occupy a single line, ideally in 36 characters or less.
</p>
</dd>
<dt>Long description</dt>
<dd><p>This is shown in the buffer created by <kbd class="kbd">C-h P</kbd>
(<code class="code">describe-package</code>), following the package&rsquo;s brief description
and installation status.  It normally spans multiple lines, and should
fully describe the package&rsquo;s capabilities and how to begin using it
once it is installed.
</p>
</dd>
<dt>Dependencies</dt>
<dd><p>A list of other packages (possibly including minimal acceptable
version numbers) on which this package depends.  The list may be
empty, meaning this package has no dependencies.  Otherwise,
installing this package also automatically installs its dependencies,
recursively; if any dependency cannot be found, the package cannot be
installed.
</p></dd>
</dl>

<a class="index-entry-id" id="index-content-directory_002c-package"></a>
<p>Installing a package, either via the command <code class="code">package-install-file</code>,
or via the Package Menu, creates a subdirectory of
<code class="code">package-user-dir</code> named <samp class="file"><var class="var">name</var>-<var class="var">version</var></samp>, where
<var class="var">name</var> is the package&rsquo;s name and <var class="var">version</var> its version
(e.g., <samp class="file">~/.emacs.d/elpa/auctex-11.86/</samp>).  We call this the
package&rsquo;s <em class="dfn">content directory</em>.  It is where Emacs puts the
package&rsquo;s contents (the single Lisp file for a simple package, or the
files extracted from a multi-file package).
</p>
<a class="index-entry-id" id="index-package-autoloads"></a>
<p>Emacs then searches every Lisp file in the content directory for
autoload magic comments (see <a class="pxref" href="Autoload.html">Autoload</a>).  These autoload
definitions are saved to a file named <samp class="file"><var class="var">name</var>-autoloads.el</samp>
in the content directory.  They are typically used to autoload the
principal user commands defined in the package, but they can also
perform other tasks, such as adding an element to
<code class="code">auto-mode-alist</code> (see <a class="pxref" href="Auto-Major-Mode.html">How Emacs Chooses a Major Mode</a>).  Note that a package
typically does <em class="emph">not</em> autoload every function and variable defined
within it&mdash;only the handful of commands typically called to begin
using the package.  Emacs then byte-compiles every Lisp file in the
package.
</p>
<p>After installation, the installed package is <em class="dfn">loaded</em>: Emacs
adds the package&rsquo;s content directory to <code class="code">load-path</code>, and
evaluates the autoload definitions in <samp class="file"><var class="var">name</var>-autoloads.el</samp>.
</p>
<p>Whenever Emacs starts up, it automatically calls the function
<code class="code">package-activate-all</code> to make installed packages available to the
current session.  This is done after loading the early init file, but
before loading the regular init file (see <a class="pxref" href="Startup-Summary.html">Summary: Sequence of Actions at Startup</a>).
Packages are not automatically made available if the user option
<code class="code">package-enable-at-startup</code> is set to <code class="code">nil</code> in the early
init file.
</p>
<dl class="first-deffn first-defun-alias-first-deffn">
<dt class="deffn defun-alias-deffn" id="index-package_002dactivate_002dall"><span class="category-def">Function: </span><span><strong class="def-name">package-activate-all</strong><a class="copiable-link" href="#index-package_002dactivate_002dall"> &para;</a></span></dt>
<dd><p>This function makes the packages available to the current session.
The user option <code class="code">package-load-list</code> specifies which packages to
make available; by default, all installed packages are made available.
See <a data-manual="emacs" href="https://www.gnu.org/software/emacs/manual/html_node/emacs/Package-Installation.html#Package-Installation">Package Installation</a> in <cite class="cite">The GNU Emacs Manual</cite>.
</p>
<p>In most cases, you should not need to call <code class="code">package-activate-all</code>,
as this is done automatically during startup.  Simply make sure to put
any code that should run before <code class="code">package-activate-all</code> in the early
init file, and any code that should run after it in the primary init
file (see <a data-manual="emacs" href="https://www.gnu.org/software/emacs/manual/html_node/emacs/Init-File.html#Init-File">Init File</a> in <cite class="cite">The GNU Emacs Manual</cite>).
</p></dd></dl>

<dl class="first-deffn">
<dt class="deffn" id="index-package_002dinitialize"><span class="category-def">Command: </span><span><strong class="def-name">package-initialize</strong> <var class="def-var-arguments">&amp;optional no-activate</var><a class="copiable-link" href="#index-package_002dinitialize"> &para;</a></span></dt>
<dd><p>This function initializes Emacs&rsquo;s internal record of which packages are
installed, and then calls <code class="code">package-activate-all</code>.
</p>
<p>The optional argument <var class="var">no-activate</var>, if non-<code class="code">nil</code>, causes
Emacs to update its record of installed packages without actually
making them available.
</p></dd></dl>

</div>
<hr>
<div class="nav-panel">
<p>
Next: <a href="Simple-Packages.html">Simple Packages</a>, Up: <a href="Packaging.html">Preparing Lisp code for distribution</a> &nbsp; [<a href="index.html#SEC_Contents" title="Table of contents" rel="contents">Contents</a>][<a href="Index.html" title="Index" rel="index">Index</a>]</p>
</div>



</body>
</html>
