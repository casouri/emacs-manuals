<!DOCTYPE html>
<html>
<!-- Created by GNU Texinfo 7.1, https://www.gnu.org/software/texinfo/ -->
<head>
<meta http-equiv="Content-Type" content="text/html; charset=iso-8859-1">
<!-- This is the GNU Emacs Lisp Reference Manual
corresponding to Emacs version 24.3.

Copyright © 1990-1996, 1998-2013 Free Software Foundation, Inc.

Permission is granted to copy, distribute and/or modify this document
under the terms of the GNU Free Documentation License, Version 1.3 or
any later version published by the Free Software Foundation; with the
Invariant Sections being "GNU General Public License," with the
Front-Cover texts being "A GNU Manual," and with the Back-Cover
Texts as in (a) below.  A copy of the license is included in the
section entitled "GNU Free Documentation License."

(a) The FSF's Back-Cover Text is: "You have the freedom to copy and
modify this GNU manual.  Buying copies from the FSF supports it in
developing GNU and promoting software freedom." -->
<title>Activation of Advice (GNU Emacs Lisp Reference Manual)</title>

<meta name="description" content="Activation of Advice (GNU Emacs Lisp Reference Manual)">
<meta name="keywords" content="Activation of Advice (GNU Emacs Lisp Reference Manual)">
<meta name="resource-type" content="document">
<meta name="distribution" content="global">
<meta name="Generator" content="makeinfo">
<meta name="viewport" content="width=device-width,initial-scale=1">

<link href="index.html" rel="start" title="Top">
<link href="Index.html" rel="index" title="Index">
<link href="index.html#SEC_Contents" rel="contents" title="Table of Contents">
<link href="Advising-Functions.html" rel="up" title="Advising Functions">
<link href="Enabling-Advice.html" rel="next" title="Enabling Advice">
<link href="Computed-Advice.html" rel="prev" title="Computed Advice">
<style type="text/css">
<!--
a.copiable-link {visibility: hidden; text-decoration: none; line-height: 0em}
span:hover a.copiable-link {visibility: visible}
strong.def-name {font-family: monospace; font-weight: bold; font-size: larger}
-->
</style>


</head>

<body lang="en">
<div class="section-level-extent" id="Activation-of-Advice">
<div class="nav-panel">
<p>
Next: <a href="Enabling-Advice.html" accesskey="n" rel="next">Enabling and Disabling Advice</a>, Previous: <a href="Computed-Advice.html" accesskey="p" rel="prev">Computed Advice</a>, Up: <a href="Advising-Functions.html" accesskey="u" rel="up">Advising Emacs Lisp Functions</a> &nbsp; [<a href="index.html#SEC_Contents" title="Table of contents" rel="contents">Contents</a>][<a href="Index.html" title="Index" rel="index">Index</a>]</p>
</div>
<hr>
<h3 class="section" id="Activation-of-Advice-1"><span>17.5 Activation of Advice<a class="copiable-link" href="#Activation-of-Advice-1"> &para;</a></span></h3>
<a class="index-entry-id" id="index-activating-advice"></a>
<a class="index-entry-id" id="index-advice_002c-activating"></a>

<p>By default, advice does not take effect when you define it&mdash;only when
you <em class="dfn">activate</em> advice for the function.  However, the advice will
be activated automatically if you define or redefine the function
later.  You can request the activation of advice for a function when
you define the advice, by specifying the <code class="code">activate</code> flag in the
<code class="code">defadvice</code>; or you can activate the advice separately by calling
the function <code class="code">ad-activate</code> or one of the other activation
commands listed below.
</p>
<p>Separating the activation of advice from the act of defining it permits
you to add several pieces of advice to one function efficiently, without
redefining the function over and over as each advice is added.  More
importantly, it permits defining advice for a function before that
function is actually defined.
</p>
<p>When a function&rsquo;s advice is first activated, the function&rsquo;s original
definition is saved, and all enabled pieces of advice for that function
are combined with the original definition to make a new definition.
(Pieces of advice that are currently disabled are not used; see
<a class="ref" href="Enabling-Advice.html">Enabling and Disabling Advice</a>.)  This definition is installed, and optionally
byte-compiled as well, depending on conditions described below.
</p>
<p>In all of the commands to activate advice, if <var class="var">compile</var> is
<code class="code">t</code> (or anything but <code class="code">nil</code> or a negative number), the
command also compiles the combined definition which implements the
advice.  If it is <code class="code">nil</code> or a negative number, what happens
depends on <code class="code">ad-default-compilation-action</code> as described below.
</p>
<dl class="first-deffn">
<dt class="deffn" id="index-ad_002dactivate"><span class="category-def">Command: </span><span><strong class="def-name">ad-activate</strong> <var class="def-var-arguments">function &amp;optional compile</var><a class="copiable-link" href="#index-ad_002dactivate"> &para;</a></span></dt>
<dd><p>This command activates all the advice defined for <var class="var">function</var>.
</p></dd></dl>

<p>Activating advice does nothing if <var class="var">function</var>&rsquo;s advice is already
active.  But if there is new advice, added since the previous time you
activated advice for <var class="var">function</var>, it activates the new advice.
</p>
<dl class="first-deffn">
<dt class="deffn" id="index-ad_002ddeactivate"><span class="category-def">Command: </span><span><strong class="def-name">ad-deactivate</strong> <var class="def-var-arguments">function</var><a class="copiable-link" href="#index-ad_002ddeactivate"> &para;</a></span></dt>
<dd><p>This command deactivates the advice for <var class="var">function</var>.
<a class="index-entry-id" id="index-deactivating-advice"></a>
</p></dd></dl>

<dl class="first-deffn">
<dt class="deffn" id="index-ad_002dupdate"><span class="category-def">Command: </span><span><strong class="def-name">ad-update</strong> <var class="def-var-arguments">function &amp;optional compile</var><a class="copiable-link" href="#index-ad_002dupdate"> &para;</a></span></dt>
<dd><p>This command activates the advice for <var class="var">function</var>
if its advice is already activated.  This is useful
if you change the advice.
</p></dd></dl>

<dl class="first-deffn">
<dt class="deffn" id="index-ad_002dactivate_002dall"><span class="category-def">Command: </span><span><strong class="def-name">ad-activate-all</strong> <var class="def-var-arguments">&amp;optional compile</var><a class="copiable-link" href="#index-ad_002dactivate_002dall"> &para;</a></span></dt>
<dd><p>This command activates the advice for all functions.
</p></dd></dl>

<dl class="first-deffn">
<dt class="deffn" id="index-ad_002ddeactivate_002dall"><span class="category-def">Command: </span><span><strong class="def-name">ad-deactivate-all</strong><a class="copiable-link" href="#index-ad_002ddeactivate_002dall"> &para;</a></span></dt>
<dd><p>This command deactivates the advice for all functions.
</p></dd></dl>

<dl class="first-deffn">
<dt class="deffn" id="index-ad_002dupdate_002dall"><span class="category-def">Command: </span><span><strong class="def-name">ad-update-all</strong> <var class="def-var-arguments">&amp;optional compile</var><a class="copiable-link" href="#index-ad_002dupdate_002dall"> &para;</a></span></dt>
<dd><p>This command activates the advice for all functions
whose advice is already activated.  This is useful
if you change the advice of some functions.
</p></dd></dl>

<dl class="first-deffn">
<dt class="deffn" id="index-ad_002dactivate_002dregexp"><span class="category-def">Command: </span><span><strong class="def-name">ad-activate-regexp</strong> <var class="def-var-arguments">regexp &amp;optional compile</var><a class="copiable-link" href="#index-ad_002dactivate_002dregexp"> &para;</a></span></dt>
<dd><p>This command activates all pieces of advice whose names match
<var class="var">regexp</var>.  More precisely, it activates all advice for any function
which has at least one piece of advice that matches <var class="var">regexp</var>.
</p></dd></dl>

<dl class="first-deffn">
<dt class="deffn" id="index-ad_002ddeactivate_002dregexp"><span class="category-def">Command: </span><span><strong class="def-name">ad-deactivate-regexp</strong> <var class="def-var-arguments">regexp</var><a class="copiable-link" href="#index-ad_002ddeactivate_002dregexp"> &para;</a></span></dt>
<dd><p>This command deactivates all pieces of advice whose names match
<var class="var">regexp</var>.  More precisely, it deactivates all advice for any
function which has at least one piece of advice that matches
<var class="var">regexp</var>.
</p></dd></dl>

<dl class="first-deffn">
<dt class="deffn" id="index-ad_002dupdate_002dregexp"><span class="category-def">Command: </span><span><strong class="def-name">ad-update-regexp</strong> <var class="def-var-arguments">regexp &amp;optional compile</var><a class="copiable-link" href="#index-ad_002dupdate_002dregexp"> &para;</a></span></dt>
<dd><p>This command activates pieces of advice whose names match <var class="var">regexp</var>,
but only those for functions whose advice is already activated.
<a class="index-entry-id" id="index-reactivating-advice"></a>
</p>
<p>Reactivating a function&rsquo;s advice is useful for putting into effect all
the changes that have been made in its advice (including enabling and
disabling specific pieces of advice; see <a class="pxref" href="Enabling-Advice.html">Enabling and Disabling Advice</a>) since the
last time it was activated.
</p></dd></dl>

<dl class="first-deffn">
<dt class="deffn" id="index-ad_002dstart_002dadvice"><span class="category-def">Command: </span><span><strong class="def-name">ad-start-advice</strong><a class="copiable-link" href="#index-ad_002dstart_002dadvice"> &para;</a></span></dt>
<dd><p>Turn on automatic advice activation when a function is defined or
redefined.  This is the default mode.
</p></dd></dl>

<dl class="first-deffn">
<dt class="deffn" id="index-ad_002dstop_002dadvice"><span class="category-def">Command: </span><span><strong class="def-name">ad-stop-advice</strong><a class="copiable-link" href="#index-ad_002dstop_002dadvice"> &para;</a></span></dt>
<dd><p>Turn off automatic advice activation when a function is defined or
redefined.
</p></dd></dl>

<dl class="first-defvr first-defopt-alias-first-defvr">
<dt class="defvr defopt-alias-defvr" id="index-ad_002ddefault_002dcompilation_002daction"><span class="category-def">User Option: </span><span><strong class="def-name">ad-default-compilation-action</strong><a class="copiable-link" href="#index-ad_002ddefault_002dcompilation_002daction"> &para;</a></span></dt>
<dd><p>This variable controls whether to compile the combined definition
that results from activating advice for a function.
</p>
<p>A value of <code class="code">always</code> specifies to compile unconditionally.
A value of <code class="code">never</code> specifies never compile the advice.
</p>
<p>A value of <code class="code">maybe</code> specifies to compile if the byte compiler is
already loaded.  A value of <code class="code">like-original</code> specifies to compile
the advice if the original definition of the advised function is
compiled or a built-in function.
</p>
<p>This variable takes effect only if the <var class="var">compile</var> argument of
<code class="code">ad-activate</code> (or any of the above functions) did not force
compilation.
</p></dd></dl>

<p>If the advised definition was constructed during &ldquo;preactivation&rdquo;
(see <a class="pxref" href="Preactivation.html">Preactivation</a>), then that definition must already be compiled,
because it was constructed during byte-compilation of the file that
contained the <code class="code">defadvice</code> with the <code class="code">preactivate</code> flag.
</p>
</div>
<hr>
<div class="nav-panel">
<p>
Next: <a href="Enabling-Advice.html">Enabling and Disabling Advice</a>, Previous: <a href="Computed-Advice.html">Computed Advice</a>, Up: <a href="Advising-Functions.html">Advising Emacs Lisp Functions</a> &nbsp; [<a href="index.html#SEC_Contents" title="Table of contents" rel="contents">Contents</a>][<a href="Index.html" title="Index" rel="index">Index</a>]</p>
</div>



</body>
</html>
