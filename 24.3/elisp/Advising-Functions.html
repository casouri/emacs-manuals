<!DOCTYPE html PUBLIC "-//W3C//DTD HTML 4.01 Transitional//EN" "http://www.w3.org/TR/html4/loose.dtd">
<html>
<!-- This is the GNU Emacs Lisp Reference Manual
corresponding to Emacs version 24.3.

Copyright © 1990-1996, 1998-2013 Free Software Foundation, Inc.

Permission is granted to copy, distribute and/or modify this document
under the terms of the GNU Free Documentation License, Version 1.3 or
any later version published by the Free Software Foundation; with the
Invariant Sections being "GNU General Public License," with the
Front-Cover texts being "A GNU Manual," and with the Back-Cover
Texts as in (a) below.  A copy of the license is included in the
section entitled "GNU Free Documentation License."

(a) The FSF's Back-Cover Text is: "You have the freedom to copy and
modify this GNU manual.  Buying copies from the FSF supports it in
developing GNU and promoting software freedom." -->
<!-- Created by GNU Texinfo 6.5, http://www.gnu.org/software/texinfo/ -->
<head>
<meta http-equiv="Content-Type" content="text/html; charset=iso-8859-1">
<title>Advising Functions (GNU Emacs Lisp Reference Manual)</title>

<meta name="description" content="Advising Functions (GNU Emacs Lisp Reference Manual)">
<meta name="keywords" content="Advising Functions (GNU Emacs Lisp Reference Manual)">
<meta name="resource-type" content="document">
<meta name="distribution" content="global">
<meta name="Generator" content="makeinfo">
<link href="index.html#Top" rel="start" title="Top">
<link href="Index.html#Index" rel="index" title="Index">
<link href="index.html#SEC_Contents" rel="contents" title="Table of Contents">
<link href="index.html#Top" rel="up" title="Top">
<link href="Simple-Advice.html#Simple-Advice" rel="next" title="Simple Advice">
<link href="Disassembly.html#Disassembly" rel="prev" title="Disassembly">
<style type="text/css">
<!--
a.summary-letter {text-decoration: none}
blockquote.indentedblock {margin-right: 0em}
blockquote.smallindentedblock {margin-right: 0em; font-size: smaller}
blockquote.smallquotation {font-size: smaller}
div.display {margin-left: 3.2em}
div.example {margin-left: 3.2em}
div.lisp {margin-left: 3.2em}
div.smalldisplay {margin-left: 3.2em}
div.smallexample {margin-left: 3.2em}
div.smalllisp {margin-left: 3.2em}
kbd {font-style: oblique}
pre.display {font-family: inherit}
pre.format {font-family: inherit}
pre.menu-comment {font-family: serif}
pre.menu-preformatted {font-family: serif}
pre.smalldisplay {font-family: inherit; font-size: smaller}
pre.smallexample {font-size: smaller}
pre.smallformat {font-family: inherit; font-size: smaller}
pre.smalllisp {font-size: smaller}
span.nolinebreak {white-space: nowrap}
span.roman {font-family: initial; font-weight: normal}
span.sansserif {font-family: sans-serif; font-weight: normal}
ul.no-bullet {list-style: none}
-->
</style>


</head>

<body lang="en">
<a name="Advising-Functions"></a>
<div class="header">
<p>
Next: <a href="Debugging.html#Debugging" accesskey="n" rel="next">Debugging</a>, Previous: <a href="Byte-Compilation.html#Byte-Compilation" accesskey="p" rel="prev">Byte Compilation</a>, Up: <a href="index.html#Top" accesskey="u" rel="up">Top</a> &nbsp; [<a href="index.html#SEC_Contents" title="Table of contents" rel="contents">Contents</a>][<a href="Index.html#Index" title="Index" rel="index">Index</a>]</p>
</div>
<hr>
<a name="Advising-Emacs-Lisp-Functions"></a>
<h2 class="chapter">17 Advising Emacs Lisp Functions</h2>
<a name="index-advising-functions"></a>

<p>The <em>advice</em> feature lets you add to the existing definition of
a function, by <em>advising the function</em>.  This is a cleaner method
for a library to customize functions defined within Emacs&mdash;cleaner
than redefining the whole function.
</p>
<a name="index-piece-of-advice"></a>
<p>Each function can have multiple <em>pieces of advice</em>, each of
which can be separately defined and then <em>enabled</em> or
<em>disabled</em>.  All the enabled pieces of advice for any given
function actually take effect when you <em>activate advice</em> for that
function, or when you define or redefine the function.  Note that
enabling a piece of advice and activating advice for a function are
not the same thing.
</p>
<p>Advice is useful for altering the behavior of existing calls to an
existing function.  If you want the new behavior for new function
calls or new key bindings, you should define a new function or
command, and have it use the existing function as a subroutine.
</p>
<p>Advising a function can cause confusion in debugging, since people
who debug calls to the original function may not notice that it has
been modified with advice.  Therefore, if you have the possibility to
change the code of that function to run a hook, please solve the
problem that way.  Advice should be reserved for the cases where you
cannot get the function changed.  In particular, Emacs&rsquo;s own source
files should not put advice on functions in Emacs.  There are
currently a few exceptions to this convention, but we aim to correct
them.
</p>
<p>Unless you know what you are doing, do <em>not</em> advise a primitive
(see <a href="What-Is-a-Function.html#What-Is-a-Function">What Is a Function</a>).  Some primitives are used by the advice
mechanism; advising them could cause an infinite recursion.  Also,
many primitives are called directly from C code.  Calls to the
primitive from Lisp code will take note of the advice, but calls from
C code will ignore the advice.
</p>
<table class="menu" border="0" cellspacing="0">
<tr><td align="left" valign="top">&bull; <a href="Simple-Advice.html#Simple-Advice" accesskey="1">Simple Advice</a>:</td><td>&nbsp;&nbsp;</td><td align="left" valign="top">A simple example to explain the basics of advice.
</td></tr>
<tr><td align="left" valign="top">&bull; <a href="Defining-Advice.html#Defining-Advice" accesskey="2">Defining Advice</a>:</td><td>&nbsp;&nbsp;</td><td align="left" valign="top">Detailed description of <code>defadvice</code>.
</td></tr>
<tr><td align="left" valign="top">&bull; <a href="Around_002dAdvice.html#Around_002dAdvice" accesskey="3">Around-Advice</a>:</td><td>&nbsp;&nbsp;</td><td align="left" valign="top">Wrapping advice around a function&rsquo;s definition.
</td></tr>
<tr><td align="left" valign="top">&bull; <a href="Computed-Advice.html#Computed-Advice" accesskey="4">Computed Advice</a>:</td><td>&nbsp;&nbsp;</td><td align="left" valign="top">...is to <code>defadvice</code> as <code>fset</code> is to <code>defun</code>.
</td></tr>
<tr><td align="left" valign="top">&bull; <a href="Activation-of-Advice.html#Activation-of-Advice" accesskey="5">Activation of Advice</a>:</td><td>&nbsp;&nbsp;</td><td align="left" valign="top">Advice doesn&rsquo;t do anything until you activate it.
</td></tr>
<tr><td align="left" valign="top">&bull; <a href="Enabling-Advice.html#Enabling-Advice" accesskey="6">Enabling Advice</a>:</td><td>&nbsp;&nbsp;</td><td align="left" valign="top">You can enable or disable each piece of advice.
</td></tr>
<tr><td align="left" valign="top">&bull; <a href="Preactivation.html#Preactivation" accesskey="7">Preactivation</a>:</td><td>&nbsp;&nbsp;</td><td align="left" valign="top">Preactivation is a way of speeding up the
                              loading of compiled advice.
</td></tr>
<tr><td align="left" valign="top">&bull; <a href="Argument-Access-in-Advice.html#Argument-Access-in-Advice" accesskey="8">Argument Access in Advice</a>:</td><td>&nbsp;&nbsp;</td><td align="left" valign="top">How advice can access the function&rsquo;s arguments.
</td></tr>
<tr><td align="left" valign="top">&bull; <a href="Combined-Definition.html#Combined-Definition" accesskey="9">Combined Definition</a>:</td><td>&nbsp;&nbsp;</td><td align="left" valign="top">How advice is implemented.
</td></tr>
</table>

<hr>
<div class="header">
<p>
Next: <a href="Debugging.html#Debugging" accesskey="n" rel="next">Debugging</a>, Previous: <a href="Byte-Compilation.html#Byte-Compilation" accesskey="p" rel="prev">Byte Compilation</a>, Up: <a href="index.html#Top" accesskey="u" rel="up">Top</a> &nbsp; [<a href="index.html#SEC_Contents" title="Table of contents" rel="contents">Contents</a>][<a href="Index.html#Index" title="Index" rel="index">Index</a>]</p>
</div>



</body>
</html>
