<!DOCTYPE html>
<html>
<!-- Created by GNU Texinfo 7.1, https://www.gnu.org/software/texinfo/ -->
<head>
<meta http-equiv="Content-Type" content="text/html; charset=iso-8859-1">
<!-- This is the GNU Emacs Lisp Reference Manual
corresponding to Emacs version 24.3.

Copyright © 1990-1996, 1998-2013 Free Software Foundation, Inc.

Permission is granted to copy, distribute and/or modify this document
under the terms of the GNU Free Documentation License, Version 1.3 or
any later version published by the Free Software Foundation; with the
Invariant Sections being "GNU General Public License," with the
Front-Cover texts being "A GNU Manual," and with the Back-Cover
Texts as in (a) below.  A copy of the license is included in the
section entitled "GNU Free Documentation License."

(a) The FSF's Back-Cover Text is: "You have the freedom to copy and
modify this GNU manual.  Buying copies from the FSF supports it in
developing GNU and promoting software freedom." -->
<title>Rename or Copy (GNU Emacs Lisp Reference Manual)</title>

<meta name="description" content="Rename or Copy (GNU Emacs Lisp Reference Manual)">
<meta name="keywords" content="Rename or Copy (GNU Emacs Lisp Reference Manual)">
<meta name="resource-type" content="document">
<meta name="distribution" content="global">
<meta name="Generator" content="makeinfo">
<meta name="viewport" content="width=device-width,initial-scale=1">

<link href="index.html" rel="start" title="Top">
<link href="Index.html" rel="index" title="Index">
<link href="index.html#SEC_Contents" rel="contents" title="Table of Contents">
<link href="Backup-Files.html" rel="up" title="Backup Files">
<link href="Numbered-Backups.html" rel="next" title="Numbered Backups">
<link href="Making-Backups.html" rel="prev" title="Making Backups">
<style type="text/css">
<!--
a.copiable-link {visibility: hidden; text-decoration: none; line-height: 0em}
span:hover a.copiable-link {visibility: visible}
strong.def-name {font-family: monospace; font-weight: bold; font-size: larger}
ul.mark-bullet {list-style-type: disc}
-->
</style>


</head>

<body lang="en">
<div class="subsection-level-extent" id="Rename-or-Copy">
<div class="nav-panel">
<p>
Next: <a href="Numbered-Backups.html" accesskey="n" rel="next">Making and Deleting Numbered Backup Files</a>, Previous: <a href="Making-Backups.html" accesskey="p" rel="prev">Making Backup Files</a>, Up: <a href="Backup-Files.html" accesskey="u" rel="up">Backup Files</a> &nbsp; [<a href="index.html#SEC_Contents" title="Table of contents" rel="contents">Contents</a>][<a href="Index.html" title="Index" rel="index">Index</a>]</p>
</div>
<hr>
<h4 class="subsection" id="Backup-by-Renaming-or-by-Copying_003f"><span>26.1.2 Backup by Renaming or by Copying?<a class="copiable-link" href="#Backup-by-Renaming-or-by-Copying_003f"> &para;</a></span></h4>
<a class="index-entry-id" id="index-backup-files_002c-rename-or-copy"></a>

<p>There are two ways that Emacs can make a backup file:
</p>
<ul class="itemize mark-bullet">
<li>Emacs can rename the original file so that it becomes a backup file, and
then write the buffer being saved into a new file.  After this
procedure, any other names (i.e., hard links) of the original file now
refer to the backup file.  The new file is owned by the user doing the
editing, and its group is the default for new files written by the user
in that directory.

</li><li>Emacs can copy the original file into a backup file, and then overwrite
the original file with new contents.  After this procedure, any other
names (i.e., hard links) of the original file continue to refer to the
current (updated) version of the file.  The file&rsquo;s owner and group will
be unchanged.
</li></ul>

<p>The first method, renaming, is the default.
</p>
<p>The variable <code class="code">backup-by-copying</code>, if non-<code class="code">nil</code>, says to use
the second method, which is to copy the original file and overwrite it
with the new buffer contents.  The variable <code class="code">file-precious-flag</code>,
if non-<code class="code">nil</code>, also has this effect (as a sideline of its main
significance).  See <a class="xref" href="Saving-Buffers.html">Saving Buffers</a>.
</p>
<dl class="first-defvr first-defopt-alias-first-defvr">
<dt class="defvr defopt-alias-defvr" id="index-backup_002dby_002dcopying"><span class="category-def">User Option: </span><span><strong class="def-name">backup-by-copying</strong><a class="copiable-link" href="#index-backup_002dby_002dcopying"> &para;</a></span></dt>
<dd><p>If this variable is non-<code class="code">nil</code>, Emacs always makes backup files by
copying.  The default is <code class="code">nil</code>.
</p></dd></dl>

<p>The following three variables, when non-<code class="code">nil</code>, cause the second
method to be used in certain special cases.  They have no effect on the
treatment of files that don&rsquo;t fall into the special cases.
</p>
<dl class="first-defvr first-defopt-alias-first-defvr">
<dt class="defvr defopt-alias-defvr" id="index-backup_002dby_002dcopying_002dwhen_002dlinked"><span class="category-def">User Option: </span><span><strong class="def-name">backup-by-copying-when-linked</strong><a class="copiable-link" href="#index-backup_002dby_002dcopying_002dwhen_002dlinked"> &para;</a></span></dt>
<dd><p>If this variable is non-<code class="code">nil</code>, Emacs makes backups by copying for
files with multiple names (hard links).  The default is <code class="code">nil</code>.
</p>
<p>This variable is significant only if <code class="code">backup-by-copying</code> is
<code class="code">nil</code>, since copying is always used when that variable is
non-<code class="code">nil</code>.
</p></dd></dl>

<dl class="first-defvr first-defopt-alias-first-defvr">
<dt class="defvr defopt-alias-defvr" id="index-backup_002dby_002dcopying_002dwhen_002dmismatch"><span class="category-def">User Option: </span><span><strong class="def-name">backup-by-copying-when-mismatch</strong><a class="copiable-link" href="#index-backup_002dby_002dcopying_002dwhen_002dmismatch"> &para;</a></span></dt>
<dd><p>If this variable is non-<code class="code">nil</code> (the default), Emacs makes backups
by copying in cases where renaming would change either the owner or
the group of the file.
</p>
<p>The value has no effect when renaming would not alter the owner or
group of the file; that is, for files which are owned by the user and
whose group matches the default for a new file created there by the
user.
</p>
<p>This variable is significant only if <code class="code">backup-by-copying</code> is
<code class="code">nil</code>, since copying is always used when that variable is
non-<code class="code">nil</code>.
</p></dd></dl>

<dl class="first-defvr first-defopt-alias-first-defvr">
<dt class="defvr defopt-alias-defvr" id="index-backup_002dby_002dcopying_002dwhen_002dprivileged_002dmismatch"><span class="category-def">User Option: </span><span><strong class="def-name">backup-by-copying-when-privileged-mismatch</strong><a class="copiable-link" href="#index-backup_002dby_002dcopying_002dwhen_002dprivileged_002dmismatch"> &para;</a></span></dt>
<dd><p>This variable, if non-<code class="code">nil</code>, specifies the same behavior as
<code class="code">backup-by-copying-when-mismatch</code>, but only for certain user-id
values: namely, those less than or equal to a certain number.  You set
this variable to that number.
</p>
<p>Thus, if you set <code class="code">backup-by-copying-when-privileged-mismatch</code>
to 0, backup by copying is done for the superuser only,
when necessary to prevent a change in the owner of the file.
</p>
<p>The default is 200.
</p></dd></dl>

</div>
<hr>
<div class="nav-panel">
<p>
Next: <a href="Numbered-Backups.html">Making and Deleting Numbered Backup Files</a>, Previous: <a href="Making-Backups.html">Making Backup Files</a>, Up: <a href="Backup-Files.html">Backup Files</a> &nbsp; [<a href="index.html#SEC_Contents" title="Table of contents" rel="contents">Contents</a>][<a href="Index.html" title="Index" rel="index">Index</a>]</p>
</div>



</body>
</html>
