<!DOCTYPE html>
<html>
<!-- Created by GNU Texinfo 7.1, https://www.gnu.org/software/texinfo/ -->
<head>
<meta http-equiv="Content-Type" content="text/html; charset=utf-8">
<!-- This is the GNU Emacs Lisp Reference Manual
corresponding to Emacs version 28.2.

Copyright Â© 1990-1996, 1998-2022 Free Software Foundation,
Inc.

Permission is granted to copy, distribute and/or modify this document
under the terms of the GNU Free Documentation License, Version 1.3 or
any later version published by the Free Software Foundation; with the
Invariant Sections being "GNU General Public License," with the
Front-Cover Texts being "A GNU Manual," and with the Back-Cover
Texts as in (a) below.  A copy of the license is included in the
section entitled "GNU Free Documentation License."

(a) The FSF's Back-Cover Text is: "You have the freedom to copy and
modify this GNU manual.  Buying copies from the FSF supports it in
developing GNU and promoting software freedom." -->
<title>Buffer Contents (GNU Emacs Lisp Reference Manual)</title>

<meta name="description" content="Buffer Contents (GNU Emacs Lisp Reference Manual)">
<meta name="keywords" content="Buffer Contents (GNU Emacs Lisp Reference Manual)">
<meta name="resource-type" content="document">
<meta name="distribution" content="global">
<meta name="Generator" content="makeinfo">
<meta name="viewport" content="width=device-width,initial-scale=1">

<link href="index.html" rel="start" title="Top">
<link href="Index.html" rel="index" title="Index">
<link href="index.html#SEC_Contents" rel="contents" title="Table of Contents">
<link href="Text.html" rel="up" title="Text">
<link href="Comparing-Text.html" rel="next" title="Comparing Text">
<link href="Near-Point.html" rel="prev" title="Near Point">
<style type="text/css">
<!--
a.copiable-link {visibility: hidden; text-decoration: none; line-height: 0em}
div.example {margin-left: 3.2em}
span:hover a.copiable-link {visibility: visible}
strong.def-name {font-family: monospace; font-weight: bold; font-size: larger}
-->
</style>
<link rel="stylesheet" type="text/css" href="./manual.css">


</head>

<body lang="en">
<div class="section-level-extent" id="Buffer-Contents">
<div class="nav-panel">
<p>
Next: <a href="Comparing-Text.html" accesskey="n" rel="next">Comparing Text</a>, Previous: <a href="Near-Point.html" accesskey="p" rel="prev">Examining Text Near Point</a>, Up: <a href="Text.html" accesskey="u" rel="up">Text</a> &nbsp; [<a href="index.html#SEC_Contents" title="Table of contents" rel="contents">Contents</a>][<a href="Index.html" title="Index" rel="index">Index</a>]</p>
</div>
<hr>
<h3 class="section" id="Examining-Buffer-Contents"><span>33.2 Examining Buffer Contents<a class="copiable-link" href="#Examining-Buffer-Contents"> &para;</a></span></h3>
<a class="index-entry-id" id="index-buffer-portion-as-string"></a>

<p>This section describes functions that allow a Lisp program to
convert any portion of the text in the buffer into a string.
</p>
<dl class="first-deffn first-defun-alias-first-deffn">
<dt class="deffn defun-alias-deffn" id="index-buffer_002dsubstring"><span class="category-def">Function: </span><span><strong class="def-name">buffer-substring</strong> <var class="def-var-arguments">start end</var><a class="copiable-link" href="#index-buffer_002dsubstring"> &para;</a></span></dt>
<dd><p>This function returns a string containing a copy of the text of the
region defined by positions <var class="var">start</var> and <var class="var">end</var> in the current
buffer.  If the arguments are not positions in the accessible portion
of the buffer, <code class="code">buffer-substring</code> signals an
<code class="code">args-out-of-range</code> error.
</p>
<p>Here&rsquo;s an example which assumes Font-Lock mode is not enabled:
</p>
<div class="example">
<div class="group"><pre class="example-preformatted">---------- Buffer: foo ----------
This is the contents of buffer foo

---------- Buffer: foo ----------
</pre></div><pre class="example-preformatted">

</pre><div class="group"><pre class="example-preformatted">(buffer-substring 1 10)
     &rArr; &quot;This is t&quot;
</pre></div><div class="group"><pre class="example-preformatted">(buffer-substring (point-max) 10)
     &rArr; &quot;he contents of buffer foo\n&quot;
</pre></div></div>

<p>If the text being copied has any text properties, these are copied into
the string along with the characters they belong to.  See <a class="xref" href="Text-Properties.html">Text Properties</a>.  However, overlays (see <a class="pxref" href="Overlays.html">Overlays</a>) in the buffer and
their properties are ignored, not copied.
</p>
<p>For example, if Font-Lock mode is enabled, you might get results like
these:
</p>
<div class="example">
<div class="group"><pre class="example-preformatted">(buffer-substring 1 10)
     &rArr; #(&quot;This is t&quot; 0 1 (fontified t) 1 9 (fontified t))
</pre></div></div>
</dd></dl>

<dl class="first-deffn first-defun-alias-first-deffn">
<dt class="deffn defun-alias-deffn" id="index-buffer_002dsubstring_002dno_002dproperties"><span class="category-def">Function: </span><span><strong class="def-name">buffer-substring-no-properties</strong> <var class="def-var-arguments">start end</var><a class="copiable-link" href="#index-buffer_002dsubstring_002dno_002dproperties"> &para;</a></span></dt>
<dd><p>This is like <code class="code">buffer-substring</code>, except that it does not copy text
properties, just the characters themselves.  See <a class="xref" href="Text-Properties.html">Text Properties</a>.
</p></dd></dl>

<dl class="first-deffn first-defun-alias-first-deffn">
<dt class="deffn defun-alias-deffn" id="index-buffer_002dstring"><span class="category-def">Function: </span><span><strong class="def-name">buffer-string</strong><a class="copiable-link" href="#index-buffer_002dstring"> &para;</a></span></dt>
<dd><p>This function returns the contents of the entire accessible portion of
the current buffer, as a string.  If the text being copied has any
text properties, these are copied into the string along with the
characters they belong to.
</p></dd></dl>

<p>If you need to make sure the resulting string, when copied to a
different location, will not change its visual appearance due to
reordering of bidirectional text, use the
<code class="code">buffer-substring-with-bidi-context</code> function
(see <a class="pxref" href="Bidirectional-Display.html">buffer-substring-with-bidi-context</a>).
</p>
<dl class="first-deffn first-defun-alias-first-deffn">
<dt class="deffn defun-alias-deffn" id="index-filter_002dbuffer_002dsubstring"><span class="category-def">Function: </span><span><strong class="def-name">filter-buffer-substring</strong> <var class="def-var-arguments">start end &amp;optional delete</var><a class="copiable-link" href="#index-filter_002dbuffer_002dsubstring"> &para;</a></span></dt>
<dd><p>This function filters the buffer text between <var class="var">start</var> and <var class="var">end</var>
using a function specified by the variable
<code class="code">filter-buffer-substring-function</code>, and returns the result.
</p>
<p>The default filter function consults the obsolete wrapper hook
<code class="code">filter-buffer-substring-functions</code> (see the documentation string
of the macro <code class="code">with-wrapper-hook</code> for the details about this
obsolete facility), and the obsolete variable
<code class="code">buffer-substring-filters</code>.  If both of these are <code class="code">nil</code>, it
returns the unaltered text from the buffer, i.e., what
<code class="code">buffer-substring</code> would return.
</p>
<p>If <var class="var">delete</var> is non-<code class="code">nil</code>, the function deletes the text
between <var class="var">start</var> and <var class="var">end</var> after copying it, like
<code class="code">delete-and-extract-region</code>.
</p>
<p>Lisp code should use this function instead of <code class="code">buffer-substring</code>,
<code class="code">buffer-substring-no-properties</code>,
or <code class="code">delete-and-extract-region</code> when copying into user-accessible
data structures such as the kill-ring, X clipboard, and registers.
Major and minor modes can modify <code class="code">filter-buffer-substring-function</code>
to alter such text as it is copied out of the buffer.
</p></dd></dl>

<dl class="first-defvr first-defvar-alias-first-defvr">
<dt class="defvr defvar-alias-defvr" id="index-filter_002dbuffer_002dsubstring_002dfunction"><span class="category-def">Variable: </span><span><strong class="def-name">filter-buffer-substring-function</strong><a class="copiable-link" href="#index-filter_002dbuffer_002dsubstring_002dfunction"> &para;</a></span></dt>
<dd><p>The value of this variable is a function that <code class="code">filter-buffer-substring</code>
will call to do the actual work.  The function receives three
arguments, the same as those of <code class="code">filter-buffer-substring</code>,
which it should treat as per the documentation of that function.  It
should return the filtered text (and optionally delete the source text).
</p></dd></dl>

<p>The following two variables are obsoleted by
<code class="code">filter-buffer-substring-function</code>, but are still supported for
backward compatibility.
</p>
<dl class="first-defvr first-defvar-alias-first-defvr">
<dt class="defvr defvar-alias-defvr" id="index-filter_002dbuffer_002dsubstring_002dfunctions"><span class="category-def">Variable: </span><span><strong class="def-name">filter-buffer-substring-functions</strong><a class="copiable-link" href="#index-filter_002dbuffer_002dsubstring_002dfunctions"> &para;</a></span></dt>
<dd><p>This obsolete variable is a wrapper hook, whose members should be functions
that accept four arguments: <var class="var">fun</var>, <var class="var">start</var>, <var class="var">end</var>, and
<var class="var">delete</var>.  <var class="var">fun</var> is a function that takes three arguments
(<var class="var">start</var>, <var class="var">end</var>, and <var class="var">delete</var>), and returns a string.  In
both cases, the <var class="var">start</var>, <var class="var">end</var>, and <var class="var">delete</var> arguments are
the same as those of <code class="code">filter-buffer-substring</code>.
</p>
<p>The first hook function is passed a <var class="var">fun</var> that is equivalent to
the default operation of <code class="code">filter-buffer-substring</code>, i.e., it
returns the buffer-substring between <var class="var">start</var> and <var class="var">end</var>
(processed by any <code class="code">buffer-substring-filters</code>) and optionally
deletes the original text from the buffer.  In most cases, the hook
function will call <var class="var">fun</var> once, and then do its own processing of
the result.  The next hook function receives a <var class="var">fun</var> equivalent to
this, and so on.  The actual return value is the result of all the
hook functions acting in sequence.
</p></dd></dl>

<dl class="first-defvr first-defvar-alias-first-defvr">
<dt class="defvr defvar-alias-defvr" id="index-buffer_002dsubstring_002dfilters"><span class="category-def">Variable: </span><span><strong class="def-name">buffer-substring-filters</strong><a class="copiable-link" href="#index-buffer_002dsubstring_002dfilters"> &para;</a></span></dt>
<dd><p>The value of this obsolete variable should be a list of functions
that accept a single string argument and return another string.
The default <code class="code">filter-buffer-substring</code> function passes the buffer
substring to the first function in this list, and the return value of
each function is passed to the next function.  The return value of the
last function is passed to <code class="code">filter-buffer-substring-functions</code>.
</p></dd></dl>

<dl class="first-deffn first-defun-alias-first-deffn">
<dt class="deffn defun-alias-deffn" id="index-current_002dword"><span class="category-def">Function: </span><span><strong class="def-name">current-word</strong> <var class="def-var-arguments">&amp;optional strict really-word</var><a class="copiable-link" href="#index-current_002dword"> &para;</a></span></dt>
<dd><p>This function returns the symbol (or word) at or near point, as a
string.  The return value includes no text properties.
</p>
<p>If the optional argument <var class="var">really-word</var> is non-<code class="code">nil</code>, it finds a
word; otherwise, it finds a symbol (which includes both word
characters and symbol constituent characters).
</p>
<p>If the optional argument <var class="var">strict</var> is non-<code class="code">nil</code>, then point
must be in or next to the symbol or word&mdash;if no symbol or word is
there, the function returns <code class="code">nil</code>.  Otherwise, a nearby symbol or
word on the same line is acceptable.
</p></dd></dl>

<dl class="first-deffn first-defun-alias-first-deffn">
<dt class="deffn defun-alias-deffn" id="index-thing_002dat_002dpoint"><span class="category-def">Function: </span><span><strong class="def-name">thing-at-point</strong> <var class="def-var-arguments">thing &amp;optional no-properties</var><a class="copiable-link" href="#index-thing_002dat_002dpoint"> &para;</a></span></dt>
<dd><p>Return the <var class="var">thing</var> around or next to point, as a string.
</p>
<p>The argument <var class="var">thing</var> is a symbol which specifies a kind of
syntactic entity.  Possibilities include <code class="code">symbol</code>, <code class="code">list</code>,
<code class="code">sexp</code>, <code class="code">defun</code>, <code class="code">filename</code>, <code class="code">existing-filename</code>,
<code class="code">url</code>, <code class="code">word</code>, <code class="code">sentence</code>, <code class="code">whitespace</code>,
<code class="code">line</code>, <code class="code">page</code>, <code class="code">string</code>, and others.
</p>
<p>When the optional argument <var class="var">no-properties</var> is non-<code class="code">nil</code>, this
function strips text properties from the return value.
</p>
<div class="example">
<pre class="example-preformatted">---------- Buffer: foo ----------
Gentlemen may cry ``Pea&lowast;ce! Peace!,''
but there is no peace.
---------- Buffer: foo ----------

(thing-at-point 'word)
     &rArr; &quot;Peace&quot;
(thing-at-point 'line)
     &rArr; &quot;Gentlemen may cry ``Peace! Peace!,''\n&quot;
(thing-at-point 'whitespace)
     &rArr; nil
</pre></div>

<dl class="first-defvr first-defvar-alias-first-defvr">
<dt class="defvr defvar-alias-defvr" id="index-thing_002dat_002dpoint_002dprovider_002dalist"><span class="category-def">Variable: </span><span><strong class="def-name">thing-at-point-provider-alist</strong><a class="copiable-link" href="#index-thing_002dat_002dpoint_002dprovider_002dalist"> &para;</a></span></dt>
<dd><p>This variable allows users and modes to tweak how
<code class="code">thing-at-point</code> works.  It&rsquo;s an association list of <var class="var">thing</var>s
and functions (called with zero parameters) to return that thing.
Entries for <var class="var">thing</var> will be evaluated in turn until a
non-<code class="code">nil</code> result is returned.
</p>
<p>For instance, a major mode could say:
</p>
<div class="example lisp">
<pre class="lisp-preformatted">(setq-local thing-at-point-provider-alist
            (append thing-at-point-provider-alist
                    '((url . my-mode--url-at-point))))
</pre></div>

<p>If no providers have a non-<code class="code">nil</code> return, the <var class="var">thing</var> will be
computed the standard way.
</p></dd></dl>
</dd></dl>

</div>
<hr>
<div class="nav-panel">
<p>
Next: <a href="Comparing-Text.html">Comparing Text</a>, Previous: <a href="Near-Point.html">Examining Text Near Point</a>, Up: <a href="Text.html">Text</a> &nbsp; [<a href="index.html#SEC_Contents" title="Table of contents" rel="contents">Contents</a>][<a href="Index.html" title="Index" rel="index">Index</a>]</p>
</div>



</body>
</html>
